{"./":{"url":"./","title":"Introduction","keywords":"","body":"cryptoeconomics \"Cryptoeconomics brings together the fields of economics and computer science to study the decentralized marketplaces and applications that can be built by combining cryptography with economic incentives.\" 加密经济学将经济学和计算机科学领域结合起来，研究通过结合密码学与经济激励来构建分布式市场和应用。 \"It focuses on individual decision-making and strategic interaction between different participants in a digital ecosystem (e.g. users, providers of key resources, application developers etc.), and uses methodologies from the field of economics - such as game theory, mechanism design and causal inference - to understand how to fund, design, develop, facilitate the operations and encourage the adoption of decentralized marketplaces and related services and digital assets. \" 它侧重于数字生态系统中不同参与者之间的个人决策和战略互动（例如用户，关键资源提供者，应用程序开发者等），并使用经济学领域的方法论 —— 如博弈论，机制设计和因果关系推断 —— 去理解如何为系统运转提供资助、设计、开发、促进，并鼓励采用分布式市场以及相关服务与数字资产。 \"The resulting \"digital economies\" often require the definition of a monetary, fiscal, privacy and innovation policy. Moreover, they need effective governance to ensure that the platform maintainers can upgrade the underlying software protocols over time in response to changes in the environment, technology or market needs.\" 由此产生的“数字经济”往往需要定义货币、财政、隐私和创新政策。此外，他们需要有效的治理来确保平台维护人员能够随着时间的推移升级底层软件协议，以响应环境、技术或市场需求的变化。 "},"Decentralized_Payment_Systems_Economics/":{"url":"Decentralized_Payment_Systems_Economics/","title":"Introduction","keywords":"","body":"Decentralized Payment Systems Economics The Original: Chapter 7——Economics of \"Decentralized Payment Systems Principles and Design\" 原文来自：《分布式支付系统原理与设计》的第七章——经济学 Editors: Giulia Fanti and Pramod Viswanath 原文编辑：朱利亚·法蒂、普拉莫德·维斯瓦纳斯 The Distributed Technology Research Foundation 出自：分布式技术研究基金会 January 16, 2019 原文发布于2019年1月16日 Translator：听风（Future Labs） 本系列章节为论文《分布式支付系统原理与设计》第7章部分的中英双语译本，仅为知识传播学习与借鉴，不做商业用途，感谢 Giulia Fanti 和 Pramod Viswanath 对原文做出的贡献，原文版权归分布式技术研究基金会。 "},"Decentralized_Payment_Systems_Economics/CH00_Preface.html":{"url":"Decentralized_Payment_Systems_Economics/CH00_Preface.html","title":"Preface","keywords":"","body":"Decentralized Payment Systems Economics Table of Contents Beginning Beginning The economic properties of cryptocurrencies are of central interest to a payment system and the focus of this chapter. Economic properties are closely intertwined with the specifics of the system design; this is particularly true for proof-of-stake (PoS) cryptocurrencies. In this chapter, we focus on three broad and connected issues related to the design of Unit-e: (i) valuation of cryptocurrencies in the proof-of-stake setting, (ii) the selection of block rewards, and (iii) the selection and disbursal of transaction fees. In particular, we highlight the delicate connection between these issues and our overall design of Unit-e as a proof-of-stake (PoS) payment system. 加密货币的经济属性是一个支付系统的核心利益，也是本章的重点。 经济属性与支付系统设计的细节密切相关，对于使用权益证明（PoS）机制的加密货币尤其如此。在本章中，我们着重讨论与 Unit-e 设计相关的三个普遍而紧密相连的问题：（i）使用权益证明（PoS）机制的加密货币的估值问题，（ii）区块奖励选择问题，以及（iii）交易费用的选择和支付问题。 尤其是，Unit-e 作为一个权益证明（PoS）机制下的支付系统，我们要特别强调这些问题与 Unit-e 整体设计之间的细微联系。 注：Unit-e，是要给专注于支付的加密货币，是由分布式技术研究基金会支持的一个高度可扩展的、完全分布式的支付系统。 This chapter has three contributions: 这篇文章有三个贡献： We present a theoretical valuation framework for PoS payment systems. Although cryptocurrencies can have applications beyond just payment processing, this framework gives us a concrete lower bound for reasoning about the fiat valuation of Unit-e. Unlike PoW cryptocurrencies, the first-order eﬀect is no longer the cost of keeping the network running (i.e., mining). Instead, token valuation stems from a combination of two factors: consumer demand for holding tokens, and validator demand for holding tokens. The first term is inversely proportional to token velocity, whereas the second term is proportional to the economic value of the aggregate transaction fee flow. Our analysis provides an important input into various design decisions in PoS systems, including monetary policy, rewards, transaction fees, and network security mechanisms. We study the effects of block rewards on user adoption and equity of rewards among block proposers and validators. One key insight is that in PoS systems, severe stake imbalance can arise from compounding in users’ stake pools, even if nodes are following protocol. That is, a node that starts with a small fraction of stake can end up with an arbitrarily high fraction of stake, simply due to randomness in the PoS proposal stage. We show theoretically that this eﬀect can be mitigated through two factors: choice of block reward function and size of the initial stake pool. We prove the optimality (in terms of maximizing equitability) of a novel geometric block reward function and advocate for starting with a large initial stake pool to mitigate the eﬀects of stake compounding. We discuss various transaction fee mechanisms, highlighting key tradeoﬀs of various design choices in terms of supporting low congestion and stable valuations according to the models in part (1). 我们提出了一个PoS支付系统的估值架构。虽然加密货币的应用不仅仅局限于支付的处理，但这个框架为我们提供了一个具体的下限，用于对e单元（Unit-e）进行法定估值推理。与PoW加密货币不同，一阶效应不再是维持网络运转（即挖矿）的成本。相反，代币估值源于两个因素的组合：消费者持有代币的需求和验证者持有代币的需求。第一项与代币的周转率成反比，而第二项与总交易费用流的经济价值成正比。我们的分析为POS系统的各种设计决策提供了重要的输入，包括货币政策、奖励、交易费用和网络安全机制。 我们研究了区块奖励对用户采用情况的影响，以及奖励的公平性在出块人和验证人之间的影响。一个关键的领悟是，在 PoS 系统中，即使节点遵守协议，用户权益池中的复利也可能引起严重的权益失衡。也就是说，一个只是以很小的权益开始的节点，最终可能获得一个任意高比例的权益，而这仅仅是由于 PoS 提案阶段的随机性所致。我们从理论上证明，这种影响可以通过两个因素来减轻：区块奖励函数的选择、初始权益池的大小。我们证明了一个新奇的几何区块奖励函数在公平性最大化方面的最优性，并提倡从一个大的初始权益池开始，以减轻权益复利的影响。 根据论文第（1）部分的模型，我们论述了各种交易费用机制，着重强调了各种设计选择在支持低拥堵和稳定估值方面的关键权衡。 We want to emphasize that valuation and incentive mechanisms are closely intertwined. Incentive mechanisms play a dual role in the payment network: they elicit “good” behavior from network participants, such as block validators; they also distribute rewards, thereby aﬀecting the allocation of tokens and the overall valuation. Our focus here is on the second aspect. Because tokens can be easily re-allocated across the network, they must earn the same rate of return regardless of how they are used. This implies that a system’s choice of incentive mechanisms in relation to any particular activity (e.g., block validation, or oﬀ-chain transaction routing) potentially aﬀects the entire system through its eﬀect on token valuation. For example, suppose one were to increase rewards for block validation: each token staked would now earn a higher expected number of tokens per unit of time as a reward. This would attract tokens towards validation and away from other activities, e.g., from oﬀ-chain transaction routing. The result would be increased congestion for on-chain transactions, and lower transaction volume of oﬀ-chain transactions. Another implication could be a reduction in the rate of growth of the token price, which would act to oﬀset the increased level of rewards for validation in terms of tokens. This, in turn, would make it more costly to hold tokens for transaction purposes. As this informal argument highlights, it is critical to analyze incentive designs in equilibrium, internalizing the eﬀect of each incentive scheme on the entire network. 我们要强调的是，估值和激励机制是紧密相连的。激励机制在支付网络中扮演着双重角色：他们会引导网络参与者向“善”，比如区块验证者；它们还扮演着分发奖励的角色，从而影响代币的分配和整体估值。这里我们着重关注第二部分。因为代币很容易在整个网络中被重新分配，所以无论他们被如何使用，都必须获得相同的回报率。这意味着，系统中对任何特定活动的激励机制的选择（例如，区块验证、链下交易通道），都会通过对代币估值的影响从而对整个系统产生潜在影响。举个例子，假设一个人为了增加区块验证的奖励：现在，他押入的每一个代币在每个时间单元将获得更高期望值的代币数量作为奖励。这将吸引代币朝着验证聚集，并远离其他活动，例如，从链下交易通道转向去做验证。其结果是增加了链上交易的拥堵，降低了链下交易的交易额。另一层含义可能是降低代币价格的增长率，这表现为抵消了验证奖励的代币所带来的收益增长水平。相应地，这将使持有代币进行交易的成本更高。正如这一非正式的论点所强调的，这对于分析激励设计的均衡性、将每个激励方案在整个网络中的效果进行内化是至关重要的。 More concretely, our primary focus in this chapter will be on incentive mechanisms that encourage participation in block proposal and validation. Participation incentives in cryptocurrencies generally take one of two forms: (1) transaction fees, and (2) validation/block rewards. Transaction fees are a small fee paid to validators and/or block proposers as a reward for processing a given transaction. In Bitcoin, transaction fees are given to the miner whose block contains the transaction, and are paid by the user who generates the payment. Block rewards, on the other hand, are freshly-minted tokens that are awarded to the node(s) that validate and/or propose a particular block. In some blockchain systems, the roles of block proposers and validators can be separate; for instance, Ethereum proposes such a structure in its future roadmap [183], and Prism naturally separates the functionalities (Chapter 3). In aggregate, transaction fees and block rewards must be valuable enough to incentivize validators to participate in the network. At the same time, transaction fees must be low enough to incentivize participation from transactors. The idea of cryptocurrencies as payment systems has garnered mainstream support based on the premise that transaction fees can be lower relative to traditional services (e.g., credit cards). Thus, at the outset, there exists potential surplus that consumers and network participants aim to realize by reducing transaction frictions. Network participants, like validators, oﬀer services that consume resources and need to be compensated: these services are ultimately compensated with fees paid by consumers. A network design (like Bitcoin) that relies on congestion to induce consumers to oﬀer suﬃciently high fees to support network activities is ineﬃcient: while congestion serves as a part of the revelation mechanism, it imposes dead-weight losses on the entire economic system. From this perspective, a design like the POS system, which instead relies on financial incentives (which are transfers between various actors) is appealing due to its eﬃciency: it better preserves the total consumer surplus. 更具体地说，我们在本章中的主要关注点是鼓励参与出块和验证的激励机制。加密货币的参与激励手段通常采用两种形式之一：（1）交易费用；（2）验证/出块奖励。交易费用是支付给验证者和/或区块提案人的小额费用，作为处理给定交易的奖励。在比特币中，交易费用被支付给了所打包区块中包含该笔交易的矿工，并且是由产生该笔付款的用户支付。另一方面，区块奖励是新“铸造”出来的代币，奖励给验证和/或提案特定区块的节点（单个或多个节点）。在一些区块链系统中，区块的出块者和验证者的角色可能是分开的；例如，以太坊在其未来的路线图[183]中提出了这样的结构，还有，Prism协议也自然而然地分开了这个功能（Prism协议，一个接近物理极限的共识协议，在本论文第3章给出了详细解说）。总的来说，交易费用和区块奖励必须具有足够的价值，以激励验证者参与网络。同时，交易费用必须足够低，以激励交易人士的参与。加密货币作为支付系统的理念获得主流支持的前提是交易费用相对于传统服务（如信用卡）可以更低。因此，从一开始，消费者和网络参与者都希望通过减少交易摩擦来赚取潜在的盈余。网络参与者，如验证者，提供一些消耗资源的服务，并且需要得到补偿：这些服务最终由消费者支付的费用来补偿。一个依靠网络拥堵来诱导消费者提供足够高的费用来支持网络活动的区块链网络设计（如比特币）是没有效率的：当拥堵成为启示机制的一部分的时候，它会强加给整个经济系统以沉重的损失。从这个角度来看，像POS系统这样依靠金融激励（在不同参与者之间传输）的设计之所以吸引人，是因为它的效率：它更好地保留了消费者的全部盈余。 "},"Decentralized_Payment_Systems_Economics/CH01_Valuation.html":{"url":"Decentralized_Payment_Systems_Economics/CH01_Valuation.html","title":"Valuation","keywords":"","body":" Table of Contents 7.1 Valuation(估值) 7.1.1 A Simple Model with Fee-Based Rewards（一个基于费用奖励的简单模型） 7.1.2 An Extended Model with Increasing Token Supply（增加代币供应的扩展模型） 7.1 Valuation(估值) Quantifying the valuation of a PoS cryptocurrency is critical, since the security of PoS systems depends primarily on the value of the underlying tokens. Valuation hinges on two key properties of this system. The first property has to do with the blockchain formation mechanism in a PoS network. Abstracting from the precise details of block validation and block proposal mechanisms, a key property of PoS networks is that the validation protocol requires participating nodes to commit (stake) a certain amount of tokens as collateral. In practice, PoS blockchain protocols typically ask nodes to commit stake for two main purposes: block proposal and block validation. Validation can be thought of either as a periodic finalization process (e.g., the Casper protocol from Ethereum [37]), or more generally, the process of nodes checking the validity of blocks and certifying their correctness in the blockchain. Rewards that accrue to the nodes participating in block proposal and validation are distributed in relation to the size of their committed stake. This protocol, in combination with additional measures (such as penalties for non-participation) is designed to induce proper participation in the validation process. 对一个PoS机制的加密货币进行估值量化是非常重要的，因为PoS系统的安全性主要依赖于其潜在代币的价值。估值取决于这个系统的两个关键属性。第一个属性与POS网络中的区块链形成机制有关。从区块验证和出块机制的精确细节出发，POS网络的一个关键特性是，验证协议要求参与进来的节点保证（质押）一定数量的代币作为担保。在实践中，POS区块链协议通常要求节点保证其权益出于两个主要目的：区块出块和区块验证。验证可以被认为要么是一个周期性的终结过程（例如，以太坊的Casper协议[37]），要么更通俗地说，是节点检查区块的有效性并在区块链中证明其正确性的过程。参与区块出块和验证的节点所获得的奖励将根据其承诺的权益（也就是质押的代币量）大小进行分配。本协议与其他附加措施（如对不参与的处罚）相结合，旨在促使验证过程有适当的参与者。 For our purposes, the main economic implication of this mechanism is that network participants who serve as block proposers or validators can earn rewards by committing their tokens to such activities. In our model, we do not distinguish between the two functionalities; we refer to both simply as ‘validation’. Thus, as long as tokens are used for validation, each token generates a stream of cash flows for its holder in the form of additional tokens. This simplified model does not necessarily represent more complex consensus structures (e.g., Prism); however, we use it as a starting point for more nuanced models of PoS consensus. 出于我们的目的，该机制的主要经济含义是，让作为区块出块者或验证者的网络参与者能够通过质押他们的代币到此类活动中来获得奖励。在我们的模型中，我们并不对这两个功能做区分：我们把两者都简单的称为“验证”。因此，只要代币被用于验证，每个代币都会以额外代币的形式为其持有者产生一个现金流。这个简单的模型不一定代表更复杂的共识结构（例如，Prism协议）；但是，我们可以作为更细微的PoS共识模型的起点。 The second property of the PoS network is that tokens can be re-allocated across various uses: the same token can be used for validation, for consumer and merchant transactions, for oﬀ-chain routing of payments, etc. Our analysis assumes, as an approximation, that tokens can be re-allocated in a frictionless manner. If a specific design deviates from this idealized frictionless model, e.g., due to constraints imposed on movements of tokens within the system, one would need to enrich the model with an explicit description of such frictions. PoS网络的第二个特性是，代币可以通过不同的用途被再分配：同一个代币可以用于验证、消费者和商家的交易、链下支付通道等。做一个近似的分析，我们假设代币可以很顺畅地被再分配。如果一个特定的设计偏离了这个理想化的无摩擦模型，例如，由于强加于系统内代币调动的限制，我们需要对这种摩擦有一个明确的描述来丰富模型。 In a frictionless system, individual optimization by the network participants implies that expected rates of return on alternative feasible uses of the tokens must be equalized. In particular, any holder of a token may exchange it for ﬁat currency and invest the proceeds in a portfolio of financial assets with a return risk proﬁle similar to that of the tokens. Thus, in a system where tokens can be easily exchanged without frictions for ﬁat currency, the rate of return on holding tokens must equal the opportunity cost: the expected rate of return on the risk-matched investment strategy in financial markets. 在一个无摩擦的系统中，网络参与者的个体优化意味着对代币的替代可行用途的预期回报率必须是均衡的。特别是，任何一个代币持有人都可能将其兑换成法币，并将收益投资于和代币的收益风险相近的金融资产组合。因此，在这样一个可以将代币很容易又很顺畅地兑换成法币的系统中，持有代币的收益率必须等于机会成本：即在金融市场中风险相匹配的投资策略可获得的预期回报率。 7.1.1 A Simple Model with Fee-Based Rewards（一个基于费用奖励的简单模型） We next outline a parsimonious model in which rewards for validation activity are paid entirely in transaction fees generated by retail transactions rather than in newly minted tokens [103]. This model abstracts away from many empirically-relevant details to focus on the main mechanism of token valuation. 接下来，我们将概述一个节俭的模型，在这个模型中，验证活动的奖励完全以零散交易产生的交易费用支付，而不是以新铸造的代币支付[103]。该模型是从许多经验相关的细节中抽象而来，重点研究了代币估值的主要机制。 Consider a payment network. Suppose that in each period, the network processes retail transactions in the amount of \\(Y_t\\)，measured in the ﬁat currency, “dollars.” Assume that the aggregate float of tokens is fixed, and without loss of generality equal to one. Let \\(p_t\\) denote the equilibrium price of the tokens in terms of the fiat currency. Assume that the network is in a stationary growth regime: the volume of transactions is expected to grow at a constant rate \\(g_Y\\), so that \\(\\mathbb{E}_t [Y_{t+s}] = Y_t (1+g_Y)^s\\). 考虑一个支付网络，假如在每个时期，网络处理零售交易的交易总额为\\(Y_t\\)，该交易总额以法币“美元”计量。假设代币的总流通量是固定的，我们不妨假设（不失一般性）其等于1。我们用 \\(p_t\\) 表示代币对等的法币价格。假设支付网络处于平稳增长状态：交易量预期增长率恒定为 \\(g_Y\\)，则有： \\(\\mathbb{E}_t [Y_{t+s}] = Y_t (1+g_Y)^s\\) （\\(\\mathbb{E}_t[Y_{t+s}]\\)——s时间段内的交易总额均值；\\(\\mathbb{E}[*]\\)为随机过程的均值函数） In this model we do not distinguish between block proposal and block validation functions, and refer to block proposers and block validators simply as “validators.” We assume that the protocol for transactions is such that, whenever transactions take place, some tokens must be transferred to the validators as rewards for their activities, and, importantly, individual validators collect their pro-rata share of the total rewards, in proportion to their token stake. The latter assumption rules out individual strategies like selfish mining, which may distort the allocation of rewards among validators in relation to their individual token balances. We assume that the aggregate amount of fees generated by the network grows at the same long-run rate as the aggregate transaction volume (the ratio of the two series is a stationary process). To simplify the derivations in our model, we further restrict aggregate fees to be a constant multiple of the transaction volume – thus, validators receive fees in the collective amount of \\(cY_t\\) dollars per period (actual rewards are in tokens, which validators sell to consumers in exchange for dollars). We should note that this assumption applies to the total volume of fees, rather than the fee structure for individual transactions. Our assumption of aggregate fee dynamics is consistent with multiple alternative fee schedules, and does not mean that Unit-e must necessarily adopt transaction fees that are a fixed fraction of transaction value; we are still evaluating different design choices. In particular, we discuss the tradeoffs between user-determined transaction fees and algorithmic transaction fees in Section 7.3 below. 在这个模型中，我们不区分出块者和验证者的功能，把出块者和验证者统称为“验证者”。我们假设交易协议是这样的，无论什么时候产生交易，一些代币必须转移给验证者作为他们参与网络活动的奖励，而且，更重要的，个人验证者是按照他们代币权益的占比来获取他们在总奖励中占有的比例。后一种假设排除了像私自挖矿这样的个人策略，私自挖矿可能会引起验证者之间与其代币余额相关的奖励分配的失真。我们假设通过网络产生的总费用以与交易总量相同的长期增长率增长（两个系列的比率是固定的）。为了简化我们模型中的推导，我们进一步将总费用限制为交易量的恒定倍数——如此，每个时期验证者获取的费用总额就是（\\( cY_t \\)）美元（实际奖励是以代币的形式，验证者可以在交易所卖给消费者换取美元）。我们应该注意到这个假设适用于所有费用的总额，而不是个人交易所产生的费用结构。我们对总费用动态的假设与多重备选费用表是一致的，但这并不意味着 Unit-e 必须要采用一个与交易值固定比例的交易费用；我们仍然在评估不同的设计选择。尤其是，在下面的7.3节中我们讨论了在确定交易费用和算法交易费用之间的权衡取舍。 We assume that validators have unrestricted access to financial markets and behave competitively: they take market prices, and, importantly, the design of the payment network, as exogenous and not aﬀected by their individual actions. Also, we assume that the risk premium associated with a ﬁnancial claim paying \\(Y_t\\) dollars per period is constant and equal to \\(λ_Y\\) (in equilibrium, this determines the opportunity cost of capital associated with validation activity). Finally, we also assume that there are no physical costs associated with block validation activities. 我们假设验证者们能够不受限制地进入金融市场，并表现出竞争性：他们将市场价格，以及更重要的支付网络设计，视为一种外因，是不会被他们的个人行为所影响的。此外，我们假设，与每个时期支付 \\(Y_t\\) 美元的金融债权相关联的风险溢价是恒定的，等于 \\(λ_Y\\)（平衡时，这决定了参与验证活动的资本的机会成本）。最后，我们还假设没有与验证活动相关的物理成本。 We look for a stationary equilibrium, in which \\(ϕ∈[0,1]\\) tokens are held by the validators, and \\(1 − ϕ\\) are held by consumers for transaction purposes. We assume that validators have no use for tokens outside of their validation activity, and therefore stake their entire token balance. The equilibrium distribution of token holdings, \\(ϕ\\), is endogenous and determined as a part of the solution. 我们寻求一种静态均衡，在这里面，验证者持有的代币我们称为\\(ϕ\\)，\\(ϕ\\)处于0到1之间，即 \\(ϕ∈[0,1]\\)；而被交易者持有用于交易的代币就是（\\(1 – ϕ\\)）。我们假设验证者持有的代币除了验证活动不会用于其他用途，因此他们也质押了全部的代币余额。作为这个方案的一部分，代币持有量 \\(ϕ\\) 的均衡分布是内生的、确定的。 In equilibrium, the total market value of all the tokens held by the validators is \\(ϕp_t\\) , which is the value of a ﬁnancial claim on the perpetual stream of cash flows in the amount of \\(cY_t\\) per period. Assuming no valuation bubbles, the market value of this cash flow stream is given by the valuation formula for a perpetuity with constant growth: 在均衡状态下，验证者持有的所有代币的总市值为 \\(ϕp_t\\) ，这是每个时期以 \\(cY_t\\) 美元计算的永续现金流金融债权的价值。假设没有验证泡沫，这笔现金流流通的市场价值可以通过持续增长型永续年金（指在无限期内，时间间隔相同、不间断、金额不相等但每期增长率相等的一系列现金流）的估值公式给出： \\[ \\ p_t \\phi = \\ \\lim_{T\\to \\infty} [\\sum_{s=1}^T \\frac {cY_t(1 + g_Y)^s} {(1 + λ_Y)^s}] \\ = \\frac {cY_t} {λ_Y - g_Y } \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ (7.1) \\] \\(p_t ϕ\\) ——持续增长型永续年金； \\(p_t\\) —— 代币对应的法币价格； \\(ϕ\\) —— 验证者的代币持有量； \\(g_Y\\) —— 交易量预期增长率； \\(λ_Y\\) —— 风险溢价，已确定的投资收益率与冒风险所获得的收益率之差； \\(cY_t\\) —— 每个时期验证者获取的费用总额，\\(Y_t\\)为每个时期的交易总额，\\(c\\)为系数。 To pin down the value of the tokens, we need to make an assumption about consumer’s demand for tokens. In a market with inﬁnite token velocity, consumers would hold no balances, which would imply that in equilibrium \\(ϕ=1\\) and \\(p_t=(cY_t)/(λ_Y-g_Y)\\). More generally, if consumers hold balances equal to k times the transaction volume per period, then \\(p_t(1-ϕ_t)=kY_t\\) , and therefore the equilibrium token value is 为了确定代币的价值，我们需要对消费者的代币需求做一个假设。在一个有着无限的代币周转率的市场中，消费者可能几乎没有余额，这就意味着在平衡状态，\\(ϕ=1\\) 而 \\(p_t=(cY_t)/(λ_Y - g_Y)\\)。更普遍来说，如果消费者持有的代币余额等于每个时期交易量的 k 倍，那么 \\(p_t(1-ϕ_t)=kY_t\\)，因此代币的均衡价值是： \\[ \\ p_t = (k + \\frac {c} {λ_Y - g_Y})Y_t \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ （7.2） \\] Note that in the absence of an explicit description of demand for token balances, \\((cY_t )/(λ_Y - g_Y)\\) serves as a lower bound on the token value. 注意，在缺少对消费者代币余额需求的明确描述下，\\((cY_t )/(λ_Y - g_Y)\\) 充当了代币价值的下限。 The equilibrium value of the tokens in (7.2) consists of two terms. The ﬁrst term, \\(kY_t\\), reﬂects consumer demand for holding token balances. The value of this term depends on \\(k\\), which is inversely related to the equilibrium token velocity. It is important to acknowledge that token velocity is an equilibrium outcome, related to a number of properties of the payment network and the broader market. Wider adoption of the tokens could raise demand for token balances, while eﬃcient channels for transactions between tokens and ﬁat currency would enable consumers to support the desired volume of transactions with lower token balances and result in higher token velocity. 在公式（7.2）中的代币均衡价值由两项组成。第一项，\\(kY_t\\)，反应了消费者持有代币余额的需求。这一项的值取决于 \\(k\\)，与均衡代币周转率成逆相关。必须承认，代币周转率是一种均衡结果，与支付网络和更广泛市场的许多特性有关。代币更广泛的采用能够提高对代币持有余额的需求，而代币和法币之间有效的兑换渠道将会促使消费者提高对交易量的渴望，而保持较低的代币余额，最后的结果就是代币的周转率会更高。 The relation between token value and token velocity is commonly invoked when discussing the valuation of cryptocurrencies. While token velocity and equilibrium token value are certainly related in equilibrium, the relation between the two, like its analog in traditional monetary economics, is not a true structural relation and it does not provide a reliable anchor for token valuation. 在讨论加密货币的估值时，通常会援引代币价值和代币周转率之间的关系。虽然代币周转率和代币均衡价值在均衡状态下必然相关，但是两者之间的关系，就跟在传统货币经济学中的类似物一样，并不是真正的结构关系，也不能够为代币估值提供一个可靠的锚定。 The second term in the valuation equation (7.2), \\((cY_t )/(λ_Y-g_Y )\\), reﬂects the demand for tokens from validators. This term is proportional to the overall volume of retail transactions, \\(Y_t\\) , and to the rate at which fees are charged for transactions. All else equal, broader adoption and utilization of the payment system (higher \\(Y_t\\)) results in higher value of the tokens. Importantly, the above equation does not suggest that token value is increasing in the level of fees. Our analysis here focuses on a single stationary equilibrium and does not explicitly describe how the systems responds to changes in parameters: higher fee levels would eventually lead to lower transaction volume. [1] 在（7.2）的估值方程中的第二项，\\((cY_t )/(λ_Y - g_Y)\\)，反应了验证者对代币的需求。这一项与总体的零售交易额 \\(Y_t\\) 和交易收费率成正比。所有其他一切平稳时，更广泛的采用和使用支付系统（更高的 \\(Y_t\\)），会导致更高的代币价值。重要的是，上述等式并没有表明代币价值在收费水平上的增长。我们这里的分析侧重于单一的稳定均衡，并没有明确描述系统如何响应收费水平参数的变化：较高的费用水平最终会导致较低的交易量。 Our analysis in this section also relies critically on the assumption of competitive behavior by the network participants. To what extent this assumption oﬀers a good approximation of agent behavior in this environment depends on individual opportunities and incentives to engage in strategic behavior. Ultimately, individual incentives and token valuation are closely linked in PoS systems, and must be analyzed jointly. Such analysis is beyond the scope of this chapter. 我们在本节中的分析也非常依赖于对网络参与者的竞争行为做的假设。这种假设能够在多大程度上很好地近似这种环境中的代理行为，取决于从事这种战略行为的个人机会与激励措施。最终，个人激励和代币估值在PoS系统中紧密相连，必须共同分析。这种分析已超出了本章的范围。 7.1.2 An Extended Model with Increasing Token Supply（增加代币供应的扩展模型） Here we extend the valuation model of the previous section to allow for increasing token supply. In this model, validators are rewarded in newly minted tokens in addition to the fees collected from consumer transactions. For tractability, we formulate the extended model in continuous time. 在这里，我们扩展了上一节里的估值模型，允许增加代币供应。在这个模型中，除了从消费者交易中收取的费用外，验证者还将获得新铸造的代币奖励。为了易于处理，我们建立连续时间的扩展模型。 We now allow the transaction volume growth parameter to vary in time, and denote it by \\(g_Y(t)\\). We also introduce randomness into the evolution of the transaction volume \\(Y_t\\), as shown in the following differential equation: 现在我们允许交易量增长参数随着时间变化，并用 \\(g_Y(t)\\) 表示。我们也将在交易量 \\(Y_t\\) 的演变过程引入随机性，如下微分方程所示： \\[ \\frac {dY_t} {Y_t} = g_Y(t)dt+ \\sigma (t)dZ_t \\] where \\(g_Y(t)\\) and \\(\\sigma(t)\\) are bounded continuous functions of time, and \\(Z_t\\) is a Brownian motion. [2] Here \\(Z_t\\) is a simple model for the randomness in the system, and \\(σ(t)\\) represents the instantaneous volatility of growth in transaction volume. Investors require compensation for being exposed to \\(dZ_t\\) shocks based on the comparable investment opportunities in ﬁnancial markets, which we assume to be η units of expected excess returns per unit of risk. \\(η\\) is known as the market price of risk, and we take it to be constant here, for simplicity. Then, under the risk-neutral valuation measure \\(Q\\) , the transaction volume follows 这里的 \\(g_Y(t)\\) 和 \\(\\sigma(t)\\) 是关于时间的有界连续函数，而 \\(Z_t\\) 是一种布朗运动。这里 \\(Z_t\\) 是系统随机性的简单模型，而 \\(\\sigma(t)\\) 代表了交易量增长的瞬时波动性。依据金融市场的可比投资机会，投资者对遭受 \\(dZ_t\\) 冲击要求补偿，我们假设单位风险的预期超额回报是 \\(\\eta\\) 个单位，为了简便起见，我们在这里设为常数。然后，在风险中性定价指标 \\(Q\\) 下，交易量遵循以下方程： \\[ \\frac {dY_t} {Y_t} = g_Y^Q (t) dt + \\sigma (t) dZ_t^Q \\] Where 其中 \\[ \\ g_Y^Q (t) = g_Y (t) - \\eta σ(t) \\] and \\(Z_t^Q\\) is a Brownian motion under measure \\(Q\\). 而 \\(Z_t^Q\\) 是指标 \\(Q\\) 下的布朗运动。 As above, \\(p_t\\) denotes the total value of tokens at time \\(t\\) and validators hold fraction \\(ϕ_t\\) of all tokens. The market clearing condition requires that validators and consumers collectively hold all tokens, and thus 如上所述，\\(p_t\\) 代表了时间 \\(t\\) 时的代币总价值，验证人持有的代币份额 \\(ϕ_t\\) 。市场清算条件要求验证者和消费者共同持有了所有代币，因此有： \\[ \\ ϕ_t p_t = p_t - kY_t \\] where \\(k\\) is a consumer demand parameter, which we again assume to be constant. Thus, 其中 \\(k\\) 是消费者需求参数，我们再次假设其为常数。因此： \\[ \\ ϕ_t = 1 - k \\frac {Y_t} {p_t} \\] We assume that token supply grows deterministically over time. Specifically, we assume that new tokens are issued at (bounded) rate \\(r(t)\\). In expectation, under the risk-neutral valuation measure, validators earn the risk-free rate of return, which we assume to be constant and denote it by \\(λ_f\\). Thus, we obtain the valuation equation: 我们假设代币供应随着时间的推移有确定性的增长。具体来讲，我们假设新的代币以（有限的）速率 \\(r(t)\\) 发行。期望着，在风险中性定价指标下，验证者赚取无风险回报率，假设为常数，用 \\(λ_f\\) 表示。因此，得出估值方程： \\begin{equation} \\phi_{t} p_{t} = c Y_{t} dt + e^{-\\lambda_{f} dt} E_{t}^{Q} \\left[\\left(\\phi_{t} + \\left(1 - \\phi_{t} \\right) r(t) dt \\right) p_{t+dt}\\right]. \\end{equation} On the left-hand side, \\(ϕ_t p_t\\) is the total market value of the tokens staked by the validators at time t. On the right-hand side, we have two terms. The first term, \\(cY_t dt\\), is the flow of transaction fees that accrue to the validators over the infinitesimal period \\([t,t+dt)\\).The second term, \\(e^{-λ_f dt} E_t^Q [(ϕ_t+(1-ϕ_t) r(t) dt) p_{t + dt}\\)], is the discounted expected value ( under measure \\(Q\\) ) of the validators’ token holdings at the end of the period. [3] Then, 在左边，\\(ϕ_t p_t\\) 是验证者在时间t质押的代币的总市值。在右边，有两项。第一项，\\(cY_t dt\\)，是在无限小的时间区间 \\([t,t + dt)\\) 内积累到验证者的交易费用流。第二项，\\(e^{-λ_f dt} E_t^Q [ ( ϕ_t+(1-ϕ_t) r(t) dt ) p_{t+dt} \\)]，是验证者持有的代币在这个时期结束时的贴现期望值（在指标 \\(Q\\) 下）。 那么： \\[ \\ E_t^Q [dp_t] = \\ λ_f p_t dt - \\frac {p_t} {p_t - kY_t} (cY_t + kY_t r(t))dt \\] We look for an equilibrium token price process p_t of the form p_t=p(t,Y_t), where p(t,Y_t) is a sufficiently smooth function of its arguments. Applying Ito’s lemma, we obtain a PDE on the token price function: 我们以 \\(p_t = p(t,Y_t)\\) 的形式处理 \\(p_t\\) 来寻求一个均衡代币价格，其中 \\(p(t,Y_t)\\) 是其参数的足够充分的光滑函数（定义域内连续可导）。应用伊藤引理，我们获得代币价格方程的偏微分方程： \\begin{equation} \\frac{\\partial p}{\\partial t} + \\frac {\\partial p} {\\partial Y} g_{Y}^{Q}(t) Y + \\frac {1}{2} \\frac {\\partial^{2} p} {\\partial Y^{2}} \\sigma(t)^{2} Y^{2} - \\lambda_{f} p + \\frac {p} {p-k Y} (c+k r(t)) Y = 0 \\quad \\quad \\quad \\quad \\quad (7.3) \\end{equation} Equation (7.3) is the valuation PDE. This equation has multiple solutions, and we look for a non-negative solution without valuation bubbles. Speciﬁcally, we look for a solution with suitably bounded growth in \\(Y\\), and subject to a boundary condition 方程（7.3）是估值偏微分方程。这个方程有多个解，我们要寻找一个没有估值泡沫的非负解。具体地说，我们寻找一个在 \\(Y\\) 上有适当边界增长的解，并且符合以下边界条件： \\[ \\ p(t,0) = 0 \\] which requires that token value vanishes at zero transaction volume (recall that zero is an absorbing boundary for the transaction volume process). The above equation has a linear solution, 这要求代币价值零交易量（记住零是交易量过程的吸收边界条件）时消失。上面的方程有一个线性解： \\[ \\ p(t,Y ) = A(t)Y \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ (7.4) \\] where the unknown function \\(A(t)\\) is a bounded, positive solution of the ODE: 其中未知函数 \\(A(t)\\) 是以下常微分方程的有界正数解： \\[ \\ \\frac {dA(t)} {dt} + g_Y^Q (t)A(t) - λ_f A(t) \\ + \\frac {A(t)} {A(t)-k} (c + k r(t)) = 0 \\] In the stationary case of \\(r(t) = r\\), \\(σ(t) = σ\\), and \\(g_Y (t) = g_Y\\), the total value of tokens \\(p_t\\) is a constant multiple of the transaction volume \\(Y_t\\): 在 \\(r(t) = r\\), \\(σ(t) = σ\\), 和 \\(g_Y (t) = g_Y\\) 的静止情况下，代币的总价值 \\(p_t\\) 是交易量 \\(Y_t\\) 的常数倍： \\[ \\ \\frac {p_t} {Y_t} = A(t) = k + \\frac {c+kr} {λ_f + ησ - g_Y} \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ (7.5) \\] This solution describes the total value of tokens under constant growth rate in the number of outstanding tokens. Note that, \\(λ_f + ησ = λ_Y\\) , which is the expected return on the ﬁnancial claim paying a cash ﬂow stream equal to the aggregate ﬂow of transaction fees, \\(cY_t\\). We thus recover the valuation formula (7.2) by setting the token rewards to zero, \\(r = 0\\). 此方案描述了未完成代币的在恒定增长率下的代币总价值。注意到， \\(λ_f + ησ = λ_Y\\)，这是在金融债权上支付等同于 \\(cY_t\\) 的现金流获取的预期收益，\\(cY_t\\) 是交易费用总额。因此，通过将代币奖励设置成零，即 \\(r = 0\\)，我们可以恢复到估值方程（7.2）。 The above solution highlights the valuation effect of rewarding validators in newly minted tokens. In addition to collecting transaction fees, validators also collect proceeds from seignorage. Comparing with (7.2), we see that this effectively raises the ﬂow of proceeds to validators from \\(c\\) to \\(c + kr\\). The second term, \\(kr\\) is intuitive: transfers to validators due to seignorage are proportional to the level of token balances held by consumers. If consumers hold no token balances between transactions, any benefit validators derive from collecting rewards in newly minted tokens is completely offset by the decline in the market value of tokens in their stake. 上述解决方案突出了用新铸造的代币奖励验证者的估值影响。除了收取交易费用之外，验证者还从新币铸造中获取收益。与公式（7.2）相比，我们发现这有效地将验证者的收益流从 \\(c\\) 增加到了 \\((c + kr)\\)。第二项，\\(kr\\) 是很直观的：由于新币铸造转移给验证者的代币与消费者持有的代币余额水平成正比。如果消费者在交易过程中没有代币持有余额，验证者在新币铸造中收取报酬获取的收益就完全被其权益代币的市值下降所抵消了。 1. The effect of transaction fees on token value is analogous to the concept of the Laffer Curve in the theory of taxation. (交易费用对代币价格的影响类似于税收理论中的拉菲尔曲线概念：对边际收入和资本减税，可获得更多的税收。理由是，减税将产生更多资本，提高企业和员工的生产率，整体经济将增长。) 2. We implicitly assume that all elements of the model, e.g., the growth rate of \\(Y_t\\) , are properly restricted so that tokens have a ﬁnite value in equilibrium.（我们暗含假设模型的所有要素，例如 \\(Y_t\\) 的增长率，都被适当的限制，因此代币在平衡时具有有限的价值。） 3. To see how this term is determined, note footnotethat all new tokens accrue to the validators. Therefore, if validators start the period \\([t, t + dt)\\) with a fraction \\(ϕ_t\\) of the tokens, they end the period with tokens： + （要了解这一项是如何确定的，要注意，所有的新币都积累到验证者那里。因此，如果验证者在时间区间 \\([t, t + dt)\\) 开始时拥有的代币份额是 \\(ϕ_t\\) ，在时间区间结束时拥有的代币份额是：） \\begin{equation} \\frac{\\phi_{t} + r(t) dt} {1+r(t) dt} = \\left(\\phi_{t} + r(t) dt \\right) (1 - r(t) dt) + o(dt) = \\phi_{t} + \\left(1 - \\phi_{t} \\right) r(t) dt + o(dt) \\end{equation} "},"Decentralized_Payment_Systems_Economics/CH02_Block_Rewards.html":{"url":"Decentralized_Payment_Systems_Economics/CH02_Block_Rewards.html","title":"Block Rewards","keywords":"","body":" Table of Contents 7.2 Block Rewards(区块奖励) 7.2.1 The economic implications of block rewards（区块奖励的经济意义） 7.2.2 Block Reward Schedule: Design Considerations（区块奖励计划：设计考虑） 7.2.3 Equitability in PoS block reward schemes（PoS系统区块奖励方案的均衡性） 7.2.3.1 Equitability（均衡性） 7.2.3.2 Equitable choices of the total reward R（总奖励R的合理选择） 7.2 Block Rewards(区块奖励) Choosing a block reward schedule is an important question that is often addressed heuristically. For instance, in (7.5), we considered a stationary setting where the rate of growth of the token pool \\(r(t)\\) was constant. In general, we do not expect the system to be stationary; in fact, choosing a block reward function \\(r(t)\\) is of central interest. In this section, we discuss some of the key economic implications of block rewards for incentives of network participants, as well as distributional implications of alternative reward schedules. 选择一个区块奖励计划是一件很重要是事，这通常是摸着石头过河。例如，在公式（7.5）中，我们做了一个恒定设置，认为代币池的增长率 \\(r(t)\\) 是常数。通常，我们不期望系统是静止不变的；事实上，选择一个区块奖励函数 \\(r(t)\\) 是核心利益所在。在本节中，我们讨论了一些用来激励网络参与者的区块奖励的关键经济意义，以及替代奖励计划的分配影响。 A key property of block rewards is that they add to the total token supply. Some cryptocurrencies (e.g., Bitcoin [61] and derivatives) oﬀer a block reward that decreases over time according to a fixed schedule, with a pre-determined end date. The total supply of Bitcoin tokens is thus limited. Others (e.g., Monero) maintain the block reward rate in excess of a positive lower bound at all time [177]; hence the token supply is unbounded. A natural question is how to evaluate these two operating points. In this section, we discuss some of the design tradeoffs. 区块奖励的一个关键属性就是它对代币总供应量的增加。一些加密货币（如，比特币[61]及其衍生品）会根据固定的时间表减少区块奖励，并有预先确定的日期。比特币的总供应量因此受到限制。其他的（如，门罗币）始终保持一个超过正下限的区块奖励率[177]；因此代币供应是无限的。那么，如何评估这两种操作方法就成了一个很自然的问题。在本节，我们将讨论一些设计上的权衡取舍。 7.2.1 The economic implications of block rewards（区块奖励的经济意义） Who pays for running the network? （谁为网络的运行买单？） Growth in total token supply imposes a cost on all token balances, since purchasing power of tokens is eroded over time. This effect is analogous to the well-known concept of “inflation tax” in conventional economic systems. Validators (recall that we group validators together with block proposers) are the beneficiaries of this “tax,” since they collect the newly minted tokens in the form of block rewards. As far as valuation goes, block rewards effectively raise the fees collected by the validators. This can be seen from the steady-state valuation equation (7.5): holding all else equal, raising \\(kr\\), where \\(r\\) is the rate of flow of block rewards, is equivalent to raising the transaction fee parameter \\(c\\). The precise breakdown between transaction fees and token-based rewards matters, however, because it determines who exactly pays for network operations. 由于代币的购买力随着时间的推移受到侵蚀，代币供应总量的增长会迫使所有代币余额产生成本。这种影响类似于传统经济体系中众所周知的“通货膨胀税”概念。验证者们（注意，我们把验证者和出块者组合在了一起）是这些“税”的受益人，因为他们以区块奖励的形式收到了新铸造的代币。就估值而言，区块奖励有效地提高了验证者收取的费用。这可以从稳态估值方程（7.5）中看出：保持所有其他值平稳，提高 \\(kr\\)，其中 \\(r\\) 是区块奖励的速率，相当于提高交易费用参数 \\(c\\)。交易费用和基于代币的奖励的精确分解是有重要影响的，因为它确切地决定了是谁在为网络运营买单。 Both types of rewards, transaction fees and block rewards, ensure that all those enjoying the benefits of the network contribute resources to running it. This arrangement closely resembles the funding of commonly used infrastructure in conventional economic systems: for instance, a highway network may be supported through toll fees, paid directly by the drivers, and through public funds, contributed by the broad base of tax payers enjoying the indirect benefits of the highway system. In the context of the electronic payment system, transaction fees are paid by the consumers whenever they use tokens for retail transactions, and accrue to the validators who support operations of the payment network that enables such transactions. In turn, block rewards expressed in newly minted tokens are effectively paid for by all network participants who hold token balances, whether or not they use their tokens for transactions. Importantly, all those who hold tokens as a store of value or for speculative purposes end up bearing some of the cost of such block rewards. 交易费用和区块奖励这二者都确保了所有享受网络红利的人都能为网络的运转贡献资源。这种设置和传统金融系统中常用的基础设施资金很相似：例如，一条高速公路网络将从通行费和公共资金中得到支持，其中通行费由司机直接支付，而公共资金是由更广泛的享受着高速公路系统间接利益的纳税人所贡献。在电子支付系统背景下，交易费用是由消费者在使用电子代币进行零售交易时所支付的，并累积给支持此类交易操作的支付网络的验证者。相应地，所有持有代币余额的网络参与者，无论他们是否将其代币用于交易，新铸造地代币都会通过他们被有效地支付作为区块奖励。重要的是，所有持有代币作为价值储藏或投机目的的人最终都要承受这种区块奖励的部分成本。 Spreading the burden of funding network operations across a broad range of users, from frequent transactors to long-term holders of tokens, is more than an issue of fairness. All else equal, making speculators pay for some of the block rewards reduces the required level of transaction fees, which generally enhances token adoption and growth of the network. It is reasonable to expect that, in a new system, the volume of retail transactions starts at a relatively low level, grows over time. In contrast, speculative trading may be very active from the start, when future prospects of the network are highly uncertain, declining eventually as the network settles into its steady-state dynamics. Under such expectations of the network’s growth, distributional considerations dictate that one should initiate the network with a relatively high initial block reward rate, so resources needed to support network function at this early stage are contributed primarily by speculators, and gradually reduce block rewards as the volume of retail transactions rises. In the long run, funding of network functions would then increasingly rely on the transaction fees, rather than block rewards. 在广泛的用户范围内，将网络的运营资金负担分散到频繁交易者乃至代币的长期持有者身上，这不仅仅是一个公平性的问题。所有人都是平等的，让投机者为区块奖励做出一些付出会减少交易费用水平的需求，这通常也会提高代币的采用以及网络的发展。在一个新的系统中，期望零售交易量以一个较低的水平开始，然后随着时间增长，这是合理的。相反，投机交易在刚开始可能会很活跃，当网络的未来前景高度不确定时，随着网络逐渐进入稳定状态，投机交易最终会降低。在对网络发展的这种期望下，处于对分配的考虑，决定了人们应该以相对较高的初始区块奖励率来启动网络，因此，早期支持网络功能所需的资源主要由投机者贡献，并且随着零售交易量的增加要逐步减少区块奖励。从此长远来看，网络功能所需的运转资金会越来越多的依赖于交易费用，而不是区块奖励。 Incentives for Validators（验证激励） Consider the steady-state solution for token valuation, (7.4, 7.5). Validators earn an expected rate of return equal to \\(λ_f + ησ\\), which is their opportunity cost of taking on the risk of the flow of transaction fees and block rewards. Note that the equilibrium expected return of the validators is neither affected by the level of transaction fees nor the block reward rate. Rather, validators’ expected rate of return is determined by the opportunity cost of holding tokens. In equilibrium, each validator decides how many tokens to stake. As validators stake more tokens, they collectively drive down the equilibrium rate of return each of them earns; conversely, their rate of return rises as validators stake fewer tokens. As a result, the level of transaction fees \\(c\\) and block reward rate \\(r\\) affect the combined value of the validators’ stakes, but not the equilibrium expected rate of return they earn. Specifically, the combined value of the validators’ stakes is 我们来思考代币估值的稳态解，（即7.4、7.5所示）。验证者获得的预期回报率等于 \\(λ_f + ησ\\)，这是他们承担交易费用和区块奖励资金流风险的机会成本。要注意的是，验证者的均衡预期回报，既不受交易费用水平的影响，也不受区块奖励率的影响。相反，验证者的预期回报率是由持有代币的机会成本决定的。在平衡状态下，每个验证者自我决定要质押多少代币。当验证者质押更多的代币时，他们共同压低了他们每个人获得的均衡回报率；相反，当验证者质押较少的代币时，他们的回报率会上升。因此，交易费用水平 \\(c\\) 和区块奖励率 \\(r\\) 影响的是验证者权益代币的综合价值，而不是他们赚取的预期回报率。具体来说，验证者权益代币的综合价值是： \\[ \\ \\phi_t p_t = (A - k) Y_t = \\ \\frac {c+kr} {λ_f + ησ - g_Y} Y_t \\] All else equal, the value of validators’ token holdings increases in the level of transaction fees \\(c\\) and the block reward rate \\(r\\). The fraction of the overall token pool held by the validators is also increasing in these two parameters. 其他一切平稳的情况下，验证者持有的代币价值增加于交易费用水平 \\(c\\) 和区块奖励率 \\(r\\)。验证者持有的代币在整体代币池中的占比也增加于这两个参数的影响。 Rewarding validators with new tokens thus offers them a claim on the proceeds from seigniorage in the PoS system. Those network participants who hold balances and do not act as validators have no such claim –– they maintain token balances because of their convenience value or for speculative reasons. This creates a wedge, \\(λ_f + ησ - g_Y + r\\), between expected returns earned by the validators and returns earned by other holders of tokens. Thus, while not affecting the equilibrium expected rate of return of validators, the rate of growth of token supply \\(r\\) lowers the expected return earned by other network participants. A higher rate of block rewards thus discourages network participants from passively holding tokens and not acting as validators. This mechanism becomes particularly meaningful when we account for various additional costs faced by validators, including physical costs of running validator nodes and losses due to stake slashing (triggered by accidental violations, e.g., validator nodes being off-line). 用新币奖励验证者，这样就给他们了一份在PoS系统中的铸币收益债权。那些持有余额但不充当验证者的网络参与者不拥有这样的债权——他们保持代币余额是因为它们的便利价值或者是出于投机的原因。这在验证者赚取的预期回报与其他的代币持有者赚取的回报之间创造了一个楔子，即 \\(λ_f + ησ - g_Y + r\\)。这样，虽然不影响验证者的均衡预期回报率，但代币的供应增长率 \\(r\\) 降低了其他的网络参与者赚取的预期回报。更高的区块奖励率因此也阻碍了网络参与者的被动持有代币，而不充当验证者。当我们对验证者所面临的各种额外成本做出解释时，这种机制就变的特别有意义了，这些成本包括了运行验证节点的物理成本，以及因削减权益代币造成从损失（这种削减由意外违规触发，例如，验证节点处于离线状态）。 User Adoption（用户的采用） In the stylized model of this chapter, the volume of consumer-merchant transactions using tokens is exogenous, and consumer holdings of tokens are inelastically related to this transaction volume. In a more realistic description of network dynamics, consumer demand for token balances should be elastic with respect to the expected rate of return earned on such balances, in addition to the liquidity benefits of holding tokens. By penalizing token balances, higher block reward rates reduce consumer demand for token balances, ultimately translating into lower adoption of tokens by consumers and merchants. In other words, by reducing expected returns on passive holdings of tokens, higher block reward rates may eventually hurt user adoption of the cryptocurrency. Such considerations inform our thinking about the qualitative aspects of the desirable block reward schedule. More formal analysis of user adoption requires further research, and is beyond the scope of this chapter. 在本章程式化的模型中，使用代币进行商业消费的交易量是外生的，而消费者的持币与这种交易量是非弹性相关的。我们对网络动态做一个更现实的描述，除了持有代币的流动性收益外，消费者持有代币余额的需求与他们在这些代币余额上赚取的预期回报率应该是弹性相关的。通过使代币余额处于不利地位，较高的区块奖励率削弱了消费者对代币余额的需求，最终转化为消费者和商人对代币更低的采用水平。换句话说，通过减少被动持有代币的预期回报，更高的区块奖励率最终可能会损害用户对加密货币的采用。这些考虑反映了我们对理想的区块奖励计划在定性方面的思考。关于用户采用的更正式的分析需要进一步的研究，也超出了本章节的范围。 7.2.2 Block Reward Schedule: Design Considerations（区块奖励计划：设计考虑） Our analysis of economic implications of block rewards provides some guidance for how to design block reward schedules with desirable properties. A well-chosen block reward schedule should ensure long-term economic viability of the payment network, including sufficient incentives for user adoption and for participation in performing network functions (block proposals and validation), while also enforcing fairness among validators and proposers. We currently envision a design with a reward rate that starts at a relatively high level at the launch of the network, and decays over time as the network matures. 我们对区块奖励的经济意义所做的分析，对于如何设计一个具有理想属性的区块奖励计划提供了一些指导。一个精心选择的区块奖励计划应确保支付网络的长期经济可行性，包括了对用户采用和参与执行网络功能（出块和验证）的充分激励，同时也在验证者和出块者之间强加了公平性。我们目前设想的一种奖励率的设计，其奖励率在网络启动之初以一个相对较高的水平开始，随着网络的成熟而逐渐衰减。 A high initial rate of block rewards is in line with the design of many existing cryptocurrencies. This encourages participation of token holders in the validation pool during the early period of network development, when the volume of consumer transactions, and thus the volume of transaction fees is low. During this early period, it is imperative to reward proposer and validator nodes for their efforts; without such nodes, the system cannot operate. 高初始块奖励率符合许多现有加密货币的设计。这会鼓励代币持有者在网络开发初期参与到验证池中，那时候消费者交易量较低，因此交易费用的量也很低。在这一早期阶段，对出块节点和验证节点所做的努力给予奖励是必要的；没有这些节点，系统将无法运行。 As adoption increases, initial growth in token supply will gradually decline. In the long run, the desirable rate of block rewards is subject to the tradeoffs discussed in Section 7.2.1 above. Higher reward rate distributes the financial burden of running the network over a broader base of token holders. At the same time, higher reward rate effectively taxes passive token balances, hurting user adoption. Depending on which of these forces dominates, the long-run block reward rate may remain positive or possibly converge to zero. We are still in the process of selecting a block reward schedule. 随着采用率的增加，代币供应的初始增长率将逐渐下降。从长远来看，理想的区块奖励率符合在上文第\\(7.2.1\\)小节中讨论到的权衡。较高的回报率在更广泛的代币持有人基础上分散了运行网络的财务负担。同时，更高的回报率有效地对被动代币余额征了税，也损害了用户的采用。依据这些力量中谁占主导地位，长期的区块奖励率可能保持为正又或者可能收敛到零。我们仍然是处于一个区块奖励计划的选择过程中。 Figure 7.1: Comparison between common block reward functions. Halving is used in Bitcoin and many of its derivatives, whereas smooth decay is used in Monero. （图7.1：常见区块奖励函数之间的比较。比特币及其许多衍生品使用减半法，而门罗币则使用平滑衰减法。） For reference, Figure 7.1 shows caricatures of reward rate schedules that have been adopted in existing cryptocurrencies. ‘Halving’ refers to reward schedules that maintain a constant reward over a long period (e.g. years), and periodically reduce the block reward by half. This approach is used in Bitcoin and several cryptocurrencies derived from it. ‘Smooth decay’ is used in Monero, and gives a smooth approximation of the reward function in Bitcoin. Notice that the smooth decay curve is lower bounded by a fixed minimum block reward; this is a detail specified by Monero’s monetary policy. In our case, that minimum rate of growth in token supply need not exist. 作为参考，图7.1模拟了采用在现有加密货币上的块奖励率方案。“减半法”是指在较长时间内（如几年）保持不变的奖励计划，并定期将区块奖励减少一半。这种方法被用于比特币及其衍生的几种加密货币。“平滑衰减法”用于门罗币，对比特币中的奖励函数的做了一个平滑近似。请注意，平滑衰减曲线的下限是一个固定的最小区块奖励；这是由门罗币的货币政策指定的细节。在我们的例子中，代币供应的最低增长率不需要存在。 We show in the next section (7.2.3) that choosing large initial block rewards (compared to the initial stake pool) can lead to substantial and irreversible wealth imbalance in PoS systems. For example, Bitcoin started with a stake pool of 50 BTC and initial block rewards of 50 BTC per block; in a PoS system, such parameter choices could very easily lead to substantial wealth concentration. Starting with a large initial stake pool compared to the block reward size is an easy way to counter these effects. At ﬁrst glance, this directive seems to counter the earlier conclusion that we need high initial inflation to encourage adoption. Indeed, there is a tradeoff between choosing inflation high enough to encourage adoption and keeping it low enough to prevent severe wealth imbalance. To this point, notice that to prevent stake imbalance, the inflation rate does not need to be excessively small. In practice, our simulations suggest that if the block reward is less than, say, a thousandth of the initial stake pool, then stake imbalance remains mild [68]. For example, if Unit-e begins with an initial stake pool of 1.5 billion tokens, then this rule of thumb suggests a block reward of at most 1.5 million tokens per block. Aggregated over all the blocks in a year at a (conservative) block rate of 30 seconds per block, this imposes an upper bound on annual inflation of around 100,000%. Such an inflation rate is orders of magnitude higher than any we would set in practice, even in the early days of Unit-e. Hence, the apparent tension between encouraging equitability and adoption is weak; for a large enough stake pool, we can choose inflation to be very high without affecting equitability. 我们在下一节（7.2.3）中会指出，选择大额初始区块奖励（与初始代币权益池相比）可能导致PoS系统中的具有实质性的且不可逆转的财富失衡。例如，比特币从 50 个比特币的权益池和每个区块 50 个比特币的初始奖励开始；在一个 POS 系统中，这样的参数选择很容易导致大量财富集中。与区块奖励规模相比，从一个大的初始权益池开始，是一个很容易应对这些影响的方法。乍一看，这一指令似乎与早先的结论相反，即我们需要高初始通胀率来鼓励采用。实际上，在选择足够高的通胀率来鼓励采用和保持足够低的通胀率以防止严重的财富失衡之间存在着一种权衡。到目前为止，请注意，为了防止股权失衡，通胀率不需要太过于小。在实践中，我们的模拟表明，如果区块回报低于，比如说，初始权益池的千分之一，那么权益失衡仍然很温和 [68]。例如，如果 Unit-e 从 15 亿代币的初始权益池开始，那么这个经验法则建议每个区块最多可获得 150 万代币的区块奖励。在一年内以 30 秒/区块的（保守的）块速度对所有块进行合计，这迫使年通胀率上限大约为 100,000%。这样的通胀率比我们在实践中设定的任何通胀率都要高出几个数量级，即使是在 Unit-e 的早期。因此，在鼓励均衡性和采用之间明显的紧张关系是微弱的；对于足够大的代币权益池，我们可以选择非常高的通胀率而不影响均衡性。 7.2.3 Equitability in PoS block reward schemes（PoS系统区块奖励方案的均衡性） In this section, we study one of the tradeoffs involved in choosing a block reward function: equitability. At a high level, equitability means that a party that begins with a certain fraction of stake cannot unduly amplify its fraction of stake simply by participating in block proposal or validation. Perhaps surprisingly, standard PoS implementations can exhibit extreme inequitability if system parameters are chosen naively. For example, consider a PoS blockchain that awards the full block reward to the user that proposes each block. This is a standard assumption that is used in almost every PoS cryptocurrency today. Suppose further that block rewards are immediately incorporated into each party’s portion of the proposal stake pool. Now let us initialize such a system with parameters comparable to Bitcoin’s initial state: 50 initial tokens and a block reward of 50 tokens. If party A owns \\(\\frac 1 3\\) of the initial stake, a simple Polya’s urn argument shows that as the block length tends to inﬁnity, the limiting stake of party A converges almost surely to a random variable with distribution Beta\\((\\frac 1 3, \\frac 2 3)\\), visualized in Figure 7.2 by the blue solid curve labelled ‘Constant Rewards, PoS’. 在这一部分中，我们研究了在选择一个块奖励函数时涉及到的权衡之一：均衡性。在高层次上，均衡性意味着以某一权益比例开始的一方不能仅仅通过参与出块或验证而过度扩大其权益比例。也许令人惊讶的是，如果系统参数的选择太幼稚，标准的 PoS 实现方案可以表现出极端的不均衡性。例如，我们来思考这样一个 PoS 区块链，它将全部的区块奖励奖励给了每个块的出块者。这是一个标准的假设，几乎被用于目前的每一个 PoS 加密货币中。再进一步假设，区块奖励被立即并入到各方的出块权益池份额中。现在，让我们将这个系统初始化到与比特币初始状态相当的参数：50 个初始代币和 50 个代币的区块奖励。如果参与方 A 拥有初始权益的\\(\\frac 1 3\\)，一个简单的波利亚坛子模型论据表明，当区块长度趋于无穷大时，甲方的极限权益几乎肯定会收敛于一个遵循 \\(β(\\frac 1 3,\\frac 2 3)\\) 分布的随机变量，直观显示在图7.2中，用‘Constant Rewards, PoS’标记的蓝色实曲线。 Figure 7.2: Limiting stake distribution of a party with 1/3 stake, under a PoS and PoW system initialized with Bitcoin’s block reward parameters.（图7.2：在用比特币的区块奖励参数初始化的POS和POW系统下，持有1/3股权方的极限权益分布。） An important and troublesome property of this Beta distribution is the high probability mass near 0 and 1. Effectively, this means that party A can end up with extremely high or low stake percentages, simply through the natural randomness of the PoS leader election protocol. Moreover, this convergence occurs quickly in practice. In contrast, the black dashed curve illustrates the stake distribution for PoW after T = 1,000 blocks, using the same constant block reward function as Bitcoin. Notice that the PoW curve is substantially more concentrated around party A’s initial stake deposit. A natural question is whether any block reward function can produce a limiting stake distribution comparable to the black curve in a PoS setting. Our objective in this section is to explore this phenomenon more formally; we theoretically demonstrate how compounding affects fairness in PoS systems, both as an effect of the block reward function and the initial conditions of the system. To this end, we introduce a new metric called equitability, which intuitively measures how much a party can augment or decrease their fractional stake over time. We show that no block reward function can achieve the same degree of equitability as PoW, while also introducing a new geometric reward function that is maximally equitable over all reward functions. Figure 7.2 illustrates the empirical stake distribution of geometric rewards over T = 1,000 slots as a green histogram; notice that it is closer, but not the same, as the PoW baseline. This is a fundamental price we pay for the efficiency of PoS. Despite the fact that PoS cannot achieve the same equitability as PoW, we ﬁnd that through proper system initialization, these eﬀects can be dramatically mitigated. In particular, our ﬁndings give concrete guidelines for choosing the size of the initial stake pool, and the amount of rewards that should be disseminated over time, in order to ensure an acceptable level of equitability. 贝塔分布的一个重要且麻烦的特性就是会大概率地集中在0到1附近。实际上，这意味着，只要通过PoS领袖选举协议的自然随机性，甲方就可以获得极高或极低的权益比例。此外，这种收敛在实践中也很快发生。相比之下，黑色虚线说明了 T=1000 个区块后的 POW 的权益分布，使用地是与比特币相同的常量区块奖励函数。注意，PoW 曲线基本上是更多的集中在甲方的初始权益存款上。那么问题来了，在 PoS 系统设置中，是不是任何的区块奖励函数都会产生和黑色曲线相当的极限权益分布呢？我们在本节中的目标就是更正式地研究这一现象；我们从理论上证明了不同配制组合在 PoS 系统中对公平性的影响，既是作为区块奖励函数的影响，也是系统初始条件的影响。为此，我们引进了一个新的度量标准，称作“均衡性”，它直观地度量了某一方随着时间的推移能够增加或减少其权益比例到什么程度。我们表明了没有区块奖励函数能够达到和 PoW 同样水平的均衡性，同时也提出了一个新的几何奖励函数，遍及所有的奖励函数，该函数都是最大公平的函数。图7.2以绿色柱状图的形式说明了 T=1000 个槽的经验性的几何奖励权益分布情况；注意，它与 PoW 基线更接近，但不相同。这是我们为 PoS 的效率付出的一个基本代价。尽管 PoS 无法达到与 PoW 相同的均衡性，但我们发现，通过适当的系统初始化，这些影响可以显著减轻。尤其是，我们的研究结果对初始权益池规模的选择给出了具体的参考，而奖励的量也应该随着时间而散布，以确保一个可接受的均衡度水平。 Model We begin with some notation modeling a simple chain-based proof-of-stake system. We consider \\(m\\) parties: \\(\\mathcal{A}\\)\\(= {A_1,...,A_m }\\). We assume that all parties keep all of their stake in the proposal stake pool, which is a pool of tokens that is used to choose the next proposer. As before, we consider a discrete-time system, \\(n = 1,2,...,T\\), where each time slot corresponds to the addition of one block to the blockchain. In reality, new blocks may not arrive at perfectly-synchronized time intervals, but we index the system by block arrivals. For any integer \\(x\\), we use the notation \\([x]:= {1, 2, ..., x}\\). We call the time interval \\([T]\\) an epoch: a period of time (blocks) during which a pre-specified number of inflation tokens should be dispensed. In Bitcoin, for example, an epoch lasts about four years, or 210,000 blocks; this is the time period over which the block reward function remains constant prior to the halving events. 建 模 我们用一些符号开始建模一个简单的基于链的PoS系统。我们考虑有 \\(m\\) 个相关方：\\(\\mathcal{A}\\)\\(= {A_1,...,A_m }\\) 代表所有相关方的集合。我们假设各方都将其权益代币保留在出块权益池中，这是一个用于选择下一个出块人的代币池。和以前一样，我们按照一个离散时间系统来考虑，\\(n = 1,2,...,T\\)，其中每个时间间隙对应于向区块链上添加一个区块。实际上，新的区块可能不会以完全同步的时间间隔到达，但是我们通过区块的到达对系统进行索引。对于任何整数 \\(x\\)，我们定义 \\([x]:= {1, 2, ..., x}\\)。我们称时间间隔 \\([T]\\) 为一个纪元：这是一段时间（或者一定数量的区块），在此期间，应完成预先指定数量的流通代币的分配。例如，在比特币中，一个纪元持续四年，或者说210000个区块；在这个时间段，在减半事件发生之前，区块奖励函数保持不变。 For all \\(i \\in [m]\\), let \\(S_(A_i) (n)\\) denote the total stake held by party \\(A_i\\) in the proposal stake pool at time \\(n\\). We let \\(S(n) = \\sum_{i=1}^m [S_(A_i) (n)]\\) denote the total stake in the proposer stake pool at time n, and \\(\\upsilon_{A_i} (n)\\) denotes the fractional stake of node \\(A_i\\) at time \\(n\\): \\(\\upsilon_{A_i} (n) = \\frac {S_(A_i) (n)} {S(n)}\\). For simplicity, we normalize the initial stake pool size to \\(S(0)=1\\); each party starts with \\(S_{A_i} (0) = \\upsilon_(A_i) (0)\\) fraction of the original stake. 对于所有的 \\(i \\in [m]\\)，用 \\(S_(A_i) (n)\\) 表示在时间 \\(n\\) 某一方 \\(A_i\\) 在出块权益池中所占的权益总额。用 \\(S(n) = \\sum_{i=1}^m [S_{A_i} (n)]\\) 表示在时间 \\(n\\) 时出块权益池中的全部权益总额，而\\(\\upsilon_{A_i} (n)\\) 表示节点 \\(A_i\\) 在时间 \\(n\\) 时的权益比例，即：\\(\\upsilon_{A_i} (n) = \\frac {S_(A_i) (n)} {S(n)}\\)。简单起见，我们将初始权益池大小标准化为 S(0)=1；则各方开始时的初始权益比例为：\\(S_{A_i} (0) = \\upsilon_(A_i) (0)\\)。 At each time slot \\(n \\in [T]\\) ，the system chooses a proposer node \\(W(n) \\in \\mathcal{A}\\) such that 在每一个时段n， \\(n \\in [T]\\)，系统选出一个出块节点 \\(W(n)\\)， \\(W(n) \\in \\mathcal{A}\\)，即： \\[ \\ W(n)=\\left \\{ \\begin {array} {c} {A_{1}} & {w.p.} & {\\upsilon_{A_{1}}(n)} \\\\ {\\dots} \\\\ {A_{m}} & {w.p.} & {\\upsilon_{A_{m}}(n)} \\end {array} \\right. \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ (7.6) \\] Upon being selected as a proposer, \\(W(n)\\) appends a block to the blockchain. As compensation for this service, \\(W(n)\\) receives a block reward of \\(r(n)\\) stake, which is immediately added to its allocation in the proposer pool. That is, 当被选为出块人时，\\(W(n)\\) 就会添加一个区块到区块链上。为了补偿这个服务，\\(W(n)\\) 会获得一份计为 \\(r(n)\\) 权益值的区块奖励，这份奖励会立即在出块池中被分配。即： \\[ \\ S_{W(n)}(n+1)=S_{W(n)}(n)+r(n) \\] The reward \\(r(n)\\) is freshly-minted at each time step, so it causes the total number of tokens to grow. We assume the total reward dispensed in time period \\(T\\) is ﬁxed, so \\(\\sum_{n=1}^{T} r(n) = R\\). 这份 \\(r(n)\\) 的奖励是在每个时间跨度新铸造出来的，因此它使得代币的总数量在增长。我们假设在时间周期T被分配的奖励总量是固定的，即 \\(\\sum_{n=1}^{T} r(n) = R\\)。 Consider a closed PoS system where no stake is taken out of or put into the proposal stake pool over a fixed period of time T. The only changes to the stake of each party during this interval are due to the compounding effects of the rewards earned in proposing new blocks. At each (discrete) time step, a block reward is dispensed according to the randomized proposer election in Eq. (7.6). This is immediately added to the stake of the elected proposer. We focus on the scenario where every party follows protocol as a starting point. 考虑到一个封闭的PoS系统，在一个固定的时间周期T内，出块权益池中不会有权益代币被取出或者新增。在这个时间间隔内，每一方权益的唯一变化是由于新出块奖励混合进来造成的影响。在每一个（离散的）时间跨度，区块奖励将被分配给随机选择出来的出块人，正如方程（7.6）所示。这将立即被添加到所选的出块人的权益中去。我们致力于让每一方都以遵循协议为起点。 Common reward functions Between checkpoints, we can choose any block reward schedule \\(r(n)\\) that respects the total reward constraint of R. A natural choice, famously adopted in Bitcoin, is the constant block reward function, defined as: 常见的区块奖励函数 在允许范围内，我们可以选择任何受总奖励 \\(R\\) 约束的区块奖励计划 \\(r(n)\\)。在众所周知的比特币中，很自然地选择了一个常量块奖励函数，定义如下： \\[ \\ r_{c}(n) : = \\frac {R} {T} \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ (7.7) \\] Perhaps surprisingly, we ﬁnd that \\(r_c\\) introduce inequitability to the block reward scheme if initialized improperly. Critically, this can happen without any strategic behavior from any of the participants. Rather, it is the combined effect of compounding stake and randomized leader election that causes this effect. A main result of this work is that a geometric reward function, defined as 也许令人惊讶的是，我们发现如果初始化不当，\\(r_c\\) 会给块奖励方案引入不均衡性。更严重地，这可能发生在没有任何参与者做出过任何战略性行为的情况下。相反，这是复合权益和领导人的随机选择造成的综合影响。产生的主要的效果可以归结成一个几何奖励函数，定义如下： \\[ \\ r_{g}(n) := (1+R)^{\\frac {n} {T} } - (1+R)^{\\frac{n-1}{T}} \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ (7.8) \\] provably minimizes inequitability and exhibits a number of other desirable properties. Although geometric rewards may not be appropriate for deployment in a real cryptocurrency for various practical reasons, this work helps us to methodically choose system parameters, such as initial stake pool size. 可以证明，这会最大限度地减少不均衡性，并表现出许多其他理想的性能。尽管，因为各种原因，在真实的数字货币中部署几何奖励可能并不合适，但这项工作可以帮助我们有条理地选择系统参数，例如初始权益池规模。 7.2.3.1 Equitability（均衡性） We study the stochastic dynamics of the fractional stake of one of the participating parties \\(A\\), who started with \\(\\upsilon_A(0)\\) fraction of the initial total stake of \\(S(0) = 1\\). This is without loss of generality, as the random process is homogeneous in scaling both \\(R\\) and \\(S(0)\\) by a constant. We denote this fractional stake at time n by \\(\\upsilon_{A,r} (n)\\), to make the dependency on the reward function explicit. 我们研究了其中某一个参与方 \\(A\\) 的权益份额的随机动态，该参与方 \\(A\\) 的初始权益比例是 \\(\\upsilon_A(0)\\)，\\(\\upsilon_A(0)\\)代表在初始总权益 (\\(S(0) = 1\\)) 中的占比。这并不失一般性，因为这个随机过程只是同质性地将 \\(R\\) 和 \\(S(0)\\) 缩放了常数倍。我们将其在时间 \\(n\\) 时地权益比例表示为 \\(\\upsilon_{A,r} (n)\\)，以明确对块奖励函数的依赖性。 One desired property of a closed and fair PoS system is that the fractional stake should remain constant over time in expectation. If \\(A\\) contributes 10% of the proposal stake pool at the beginning of the time, then \\(A\\) should, on average, reap 10% of the total disseminated rewards. As randomness in the proposer election is essential to current PoS systems, this cannot be ensured deterministically. Instead, the popular choice of electing a proposer (in Eq (7.6)) with probability proportional to the fractional stake ensures that this holds in expectation. Formally, for all \\(n \\in [T]\\), 一个封闭且公平的 PoS 系统的一个理想属性就是权益比例在期望值上一直保持不变。如果在最开始，\\(A\\) 就为出块权益池贡献了 10% 的权益代币，那么 \\(A\\) 也应该，平均下来，获得总分配奖励的 10%。由于出块人选择的随机性是当前 PoS 系统必不可少的，因此也就无法确切地保证这一点。相反，在公式 \\((7.6)\\)中的这种流行的出块人选择方法下，能够确保这一点符合期望，因为被选中的概率是同其权益份额成比例的。形式上，对于所有的 \\(n \\in [T]\\)，有： \\[ \\mathbb{E} \\left[\\upsilon_{A,r} (n)\\right] = \\upsilon_{A} (0) \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ (7.9) \\] The expected fractional reward for any party stays constant in expectation, irrespective of which reward function is used. This follows from the law of total expectation and the fact that 无论使用哪种奖励函数，任何一方的期望奖励比例在期望值上都保持不变。这来源于总期望定律和以下事实： \\[ \\begin{array} {l} {\\mathbb{E} \\left[ \\upsilon_{A,r} (n) \\mid \\upsilon_{A, r}(n-1) = \\upsilon \\right]} \\\\ {=\\upsilon \\frac{\\upsilon S(n-1)+r(n-1)} {S(n)} + (1 - \\upsilon) \\frac {\\upsilon S(n-1)} {S(n)}} \\\\ {=v}\\end{array} \\] where \\(S(n)\\) is the total stake at time \\(n\\). 其中，\\(S(n)\\) 是时间 \\(n\\) 时的总权益。 Even with the same expected fractional stake, the choice of the reward function can change the distribution of the final stake dramatically. We propose using the variance of the final fractional stake, Var\\((\\upsilon_{A,r} (T))\\), to measure the level of uncertainty for different choices of the reward function. 即使在相同的预期权益比例下，奖励函数的选择也会显著改变最终权益的分配。我们建议使用最终权益比例的方差，Var\\((\\upsilon_{A,r} (T))\\)，来衡量不同奖励函数选择的不确定性水平。 Deﬁnition 7.2.1. For two reward functions \\(r_1\\): \\([T] \\rightarrow \\mathbb{R}^{+}\\) and \\(r_2\\): \\([T] \\rightarrow \\mathbb{R}^{+}\\) with the same total reward, \\(\\sum_{n=1}^{T} r_{1}(n) = \\sum_{n=1}^{T} r_{2}(n)\\), we say \\(r_1\\) is more equitable than \\(r_2\\) if 定义7.2.1. 对于两个奖励函数 \\(r_1\\): \\([T] \\rightarrow \\mathbb{R}^{+}\\) 和 \\(r_2\\): \\([T] \\rightarrow \\mathbb{R}^{+}\\) 拥有相同的总奖励值，即，如果满足以下条件（即 \\(r_1\\) 对应的最终权益比例的方差小于 \\(r_2\\) 的），我们就说 \\(r_1\\) 比 \\(r_2\\) 更公平： \\begin{equation} \\operatorname{Var}\\left(\\upsilon_{A,r_{1}} (T)\\right) \\leq \\operatorname{Var}\\left(\\upsilon_{A, r_{2}}(T)\\right) \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ (7.10) \\end{equation} （映射 \\(r: [T] \\rightarrow \\mathbb{R}^{+}\\)即为从集合 \\([T]\\) 到实数集 \\(\\mathbb{R}^{+}\\) 的函数 \\(r(n)\\)，定义域 \\(n \\in [T]\\)，函数值在实数范围内。） With this notion of equitability, there is a core optimization problem of interest to a PoS system designer: given a fixed total reward \\(R\\) to be dispensed, how do we distribute it over the time \\(T\\) to achieve the highest equitability? Perhaps surprisingly, we show that this optimization has a simple closed form solution. 有了这种均衡性的概念，PoS系统设计者就有了一个核心的利益优化问题：如果给定一个固定不变的待分配奖励总额 \\(R\\)，该如何在整个时间周期 \\(T\\) 内对其进行分配才能实现最高的均衡性呢？也许令人惊讶，我们证明了这种优化有一种简单的封闭式解决方案。 Theorem 2. The geometric reward \\(r_g\\) defined in (7.8) achieves the highest equitability. 定 理 2. 在公式（7.8）中定义的几何奖励函数 \\(r_g\\) 实现了最高均衡性。 If equitability is a primary design goal, this gives the optimal reward function. Intuitively, one might prefer to dispense larger rewards towards the end, when the stake pool is also large. At the same time, one needs to dispense some reward in the beginning to grow the stake pool. The optimal trade-off is met with the geometrically increasing reward. 如果均衡性是首要的设计目标，这就给出了一个最佳的奖励函数。直观地说，当股份池也很大时，人们可能更喜欢一直到最后都分配到更大的奖励。同时，一个人需要在开始就分配一些奖励来扩大其权益池。以几何形式增长的奖励就是最佳权衡结果。 Proof of Theorem 2. We prove that 定理2. 的证明 我们证明了，对于任何满足 \\(r \\in \\mathbb{R}^{T}\\)，即 \\(r\\) 的取值在实数集内，例如满足 \\(\\sum_{n=1}^{T} r(n) = R\\)，且对于任何的\\(n \\in [T]\\) 有 \\(r(n) \\geq 0\\)，则有： \\begin{equation} \\operatorname{Var}\\left(\\upsilon_{A,r_g} (T)\\right) \\leq \\operatorname{Var}\\left(\\upsilon_{A, r}(T)\\right) \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ (7.11) \\end{equation} for all \\(r \\in \\mathbb{R}^{T}\\) such that \\(\\sum_{n=1}^{T} r(n) = R\\) and \\(r(n) \\geq 0\\) for all \\(n \\in [T]\\). 为此，我们证明了对于以下优化问题，\\(r_g\\) 是唯一的最优解： \\begin{equation} \\begin{array} {c} \\operatorname{minimize}_{r \\in \\mathbb{R}^{T}} \\quad \\operatorname{Var}\\left(v_{A, r}(T)\\right) \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ (7.12) \\\\ {\\text {s.t.} \\quad \\sum_{n \\in[T]} r(n)=R} \\\\ {r(n) \\geq 0, \\forall n \\in[T]}\\end{array} \\end{equation} From the analysis of a time-dependent Pólya’s urn model [141], we know the variance from the following formula. 通过分析一个依赖于时间的波利亚罐子模型[141]，我们通过以下准则知道了方差。 Lemma 7.2.2. Let \\(e^{\\theta_{n}} \\triangleq S(n) / S(n-1)\\), then 引 理 7.2.2. 定义 \\(e^{\\theta_{n}} \\triangleq S(n) / S(n-1)\\)，那么 \\begin{equation} \\operatorname{Var} \\left(\\upsilon_{A,r} (T)^{2} \\right) \\ = \\left(\\upsilon_{A} (0) - \\upsilon_{A} (0)^{2} \\right) \\left(1 - \\frac {S(0)^{2}} {S(T)^{2}} \\prod_{n=1}^{T} \\left(2 e^{\\theta_{n}} - 1 \\right) \\right) \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ (7.13) \\end{equation} After some affine transformation and taking the logarithmic function of the objective, we get an equivalent optimization of 通过一些仿射变换，取目标的对数函数，得到目标的等价优化： \\begin{equation} \\operatorname{maximize}_{\\theta \\in \\mathbb{R}^{T}} \\quad \\sum_{n=1}^{T} \\log \\left(2 e^{\\theta_{n}} - 1 \\right) \\ \\quad \\quad \\quad \\quad (7.14) \\end{equation} \\begin{equation} \\text {s.t.} \\quad {\\sum_{n \\in[T]} \\theta_{n}=\\log (1+R)}, \\end{equation} \\begin{equation} \\quad \\quad \\quad \\quad \\quad \\quad \\theta_{n} \\geq 0, \\forall n \\in[T], \\ \\quad \\quad \\quad \\quad \\quad (7.15) \\end{equation} This is a concave maximization on a (rescaled) simplex. Writing out the KKT conditions with KKT multipliers \\(λ\\) and \\(\\{\\lambda n\\}_{n=1}^{T}\\), we get 这是一个（重新标度）单纯的凹极大值。写出KKT条件，其中KKT乘子为 \\(λ\\) 而 \\(\\{\\lambda n\\}_{n=1}^{T}\\)，我们得到： \\begin{equation} \\begin{aligned} \\frac {2 e^{\\theta_{n}}} {2 e^{\\theta_{n}}-1} - \\lambda_{n} - \\lambda & = 0 \\quad \\quad \\quad \\quad (7.16) \\\\ \\lambda_{n} & \\geq 0 \\quad \\quad \\quad \\quad (7.17) \\\\ \\theta_{n} \\lambda_{n} &=0 \\quad \\quad \\quad \\quad (7.18) \\end{aligned} \\end{equation} A solution θ to these conditions must satisfy that \\(θ_n\\) is either zero or \\(\\left(1 /\\|\\theta\\|_{0} \\right) \\log (1+R)\\). Among these solutions, we show that \\(\\theta^{*}=((\\log (1+R)) / T) \\mathbb{1}\\) is the unique optimal solution, where \\(\\mathbb{1}\\) is a vector of all ones. Consider a solution of the KKT conditions that is not \\(\\theta^{*}\\). Then, we can strictly improve the objective by the following operation. Let \\(i,j \\in [T]\\) denote two coordinates such that \\(θ_i=0\\) and \\(θ_j≠0\\). Then, we can create \\(\\tilde{\\theta}\\) by mixing \\(θ_i\\) and \\(θ_j\\), such that \\(\\tilde{\\theta}_n = \\theta_n\\) for all \\(n ≠ i,j\\) and \\(\\tilde{\\theta}_i = \\tilde{\\theta}_j = (1⁄2)\\theta_j\\). We claim that \\(\\tilde{\\theta}\\) achieves a smaller objective function as \\(\\log \\left(2 e^{\\theta_{j}} - 1\\right) 以上条件的 \\(\\theta\\) 的解必须满足：\\(\\theta_n\\) 要么是零，要么是 \\(\\left(1 /\\|\\theta\\|_{0} \\right) \\log (1+R)\\)。在这些解中，我们发现 \\(\\theta^{*}=((\\log (1+R)) / T) \\mathbb{1}\\) 是唯一最优解，其中 \\(\\mathbb{1}\\) 是单位向量。假想KKT条件的一个解不是 \\(\\theta^{*}\\)。那么，我们完全可以通过以下运算来改善目标。让 \\(i,j \\in [T]\\) 代表两个坐标，即 \\(θ_i = 0\\) 和 \\(θ_j ≠ 0\\)。那么，我们可以创建一个 \\(\\tilde{\\theta}\\) 来混合表示 \\(θ_i\\) 和 \\(θ_j\\)，即对于所有 \\(n ≠ i,j\\)，且 \\(\\tilde{\\theta}_i = \\tilde{\\theta}_j = (1⁄2)\\theta_j\\)，满足 \\(\\tilde{\\theta}_n = \\theta_n\\)。我们提出利用 \\(\\tilde{\\theta}\\) 获得了一个较小的目标函数，如：\\(\\log \\left(2 e^{\\theta_{j}} - 1\\right) In terms of the reward function, this translates into \\(S(n)/S(n-1) = (1+R)^{1/T}\\) and \\(r(n) = (1+R)^{n/T} - (1-R)^{(n-1)⁄T}\\). 就奖励函数而言，这可以翻译成：\\(S(n)/S(n-1) = (1+R)^{1/T}\\) 和 \\(r(n) = (1+R)^{n/T} - (1-R)^{(n-1)⁄T}\\)。 7.2.3.2 Equitable choices of the total reward R（总奖励R的合理选择） The equitability of a system is determined by four factors: the number of block proposals \\(T\\), choice of reward function \\(r\\), initial stake of a party \\(\\upsilon_A(0)\\), and the total reward \\(R\\). Note that because we normalized the initial stake \\(S(0)\\) to be one, \\(R\\) represents the ratio between the total rewards dispensed and the initial stake \\(S(0)\\). Some of these factors should be chosen with respect to external factors (e.g. interest rate and valuation of the crypto currency) and practical considerations (e.g. incentivizing participation of proposers). In this section, we study the scenario where the system designer has the freedom to choose \\(R\\), either by setting the initial stake size \\(S(0)\\) and / or by setting the total reward during \\(T\\). The focus in how equitability trades off with the choice of \\(R\\), and how this trade-off changes with respect to the choice of the reward function \\(r\\) during this interval. 一个系统的均衡性由四个因素决定：出块数量 \\(T\\)、奖励函数 \\(r\\) 的选择、某一个参与方的初始权益 \\(\\upsilon_A (0)\\) 和总奖励 \\(R\\)。注意，由于我们将初始权益 \\(S(0)\\) 标准化为 \\(1\\)，\\(R\\) 代表分配的总奖励和初始股份 \\(S(0)\\) 之间的比率。其中一些因素应根据外部因素（如利率和加密货币的估值）和实际考虑因素（如激励出块人参与）进行选择。在本节中，我们研究了系统设计者可以自由选择 \\(R\\) 的场景，要么通过设置初始权益的大小 \\(S(0)\\) ，要么通过设置 \\(T\\) 期间的总奖励，或者两个参数同时设置。重点讨论了在均衡性和 \\(R\\) 的选择之间如何做出权衡，以及这种权衡在这个时间间隔期间如何随着奖励函数 \\(r\\) 的选择而发生变化。 Concretely, we consider a scenario where T is a large enough integer, and \\(\\upsilon_A (0)\\) of each party is also fixed as it is not up to the system designer to choose. To make the system more equitable, we want to minimize the variance of the final stake of all parties simultaneously. We study what choices of \\(R\\) and \\(r\\) achieve a desired level of variance, normalized by \\((\\upsilon_A (0) - \\upsilon_A(0)^2 )\\) which is the worst-case variance for each party. This happens when the fractional stake \\(\\upsilon_A (T)\\) converges to a binary distribution with support set \\(\\{0,1\\}\\). As \\(\\mathbb{E} [\\upsilon_{A} (T) ] = \\upsilon_{A} (0)\\), the variance of this Bernoulli distribution is \\(\\upsilon_A (0) - \\upsilon_A(0)^2\\) . Among all distributions supported on \\([0,1]\\) with mean \\(\\upsilon_A (0)\\), this has the largest variance. 具体来说，我们考虑这样一个场景，\\(T\\) 是一个足够大的整数，并且每一方的 \\(\\upsilon_A (0)\\) 也是固定的，因为这不取决于系统设计者的选择。为了使系统更加公平，我们希望同时最小化各方最终权益的差异。我们研究了如何选择 \\(R\\) 和 \\(r\\) 从而能达到期望的方差水平，标准化为 \\((\\upsilon_A (0) - \\upsilon_A(0)^2 )\\)，这是每一方在最坏情况下的方差。当权益分数 \\(\\upsilon_A (T)\\) 收敛于一个支撑集为 \\(\\{0,1\\}\\) 的二元分布的时候，这种情况就会发生。当期望 \\(\\mathbb{E} [\\upsilon_{A} (T) ] = \\upsilon_{A} (0)\\) 时，此伯努利分布的方差为 \\(\\upsilon_A (0) - \\upsilon_A(0)^2\\)。支撑集在区间 \\([0,1]\\) 上、平均数为 \\(\\upsilon_A (0)\\)的所有分布中，这是最大方差。 Geometric reward function. For \\(r_g(n)\\), we have \\(e^(θ_n)=(1+R)^(1⁄T)\\). It follows from Lemma 7.2.2 that 几何奖励函数 \\(\\quad\\) 对于 \\(r_g (n)\\)，有 \\(e^(θ_n )=(1+R)^(1⁄T)\\)。依据引理7.2.2，则： \\begin{equation} \\frac{\\operatorname{Var} \\left(\\upsilon_{A, r_{g}}(T) \\right)} {\\upsilon_{A}(0) - \\upsilon_{A}(0)^{2}} = 1 - \\frac {\\left(2(1+R)^{1 / T} - 1 \\right)^{T}} {(1+R)^{2}} \\ \\quad \\quad \\quad \\quad \\quad \\quad (7.19) \\end{equation} When \\(R\\) is fixed and we increase \\(T\\), we can distribute small amounts of rewards across \\(T\\) and achieve vanishing variance. On the other hand, if \\(R\\) increases much faster than \\(T\\), then we are giving out increasing amounts of rewards per time slot and the uncertainty grows. This follows from the above variance formula, which we make precise in the following. 当 \\(R\\) 固定时，提高 \\(T\\), 我们可以在 \\(T\\) 期间内分配小量奖励实现零方差。另一方面，如果 \\(R\\) 的增长速度比 \\(T\\) 快得多，那么我们会在每个时间段内给予越来越多的奖励，不确定性就会增加。这是从上面的方差公式得出的，我们在下面做了清晰的说明。 Proposition 7.2.3. \\(\\quad\\) For a closed PoS system with a total reward \\(R(T)\\) chosen as a function of T and a geometric reward function \\(r_g (n)=(1+R(T))^(n⁄T) - (1+R(T))^((n-1)⁄T)\\), it is sufficient and necessary to set \\begin{equation} R(T)=\\left(\\left(\\frac{1}{1-\\sqrt{\\frac{\\log (1 /(1-\\varepsilon))}{T}}}\\right)^{T}-1\\right)(1+o(1)) \\quad \\quad \\quad \\quad \\quad \\quad (7.20) \\end{equation} in order to achieve \\(\\lim_{T \\rightarrow \\infty} \\operatorname{Var}\\left(\\upsilon_{A, r_{g}} (T) \\right) = \\varepsilon\\left(\\upsilon_{A}(0) - \\upsilon_{A} (0)^{2} \\right)\\). 命 题7.2.3. \\(\\quad\\) 对于一个封闭式 PoS 系统，设其总奖励选择为关于 \\(T\\) 的函数 \\(R(T)\\)，以及几何奖励函数 \\(r_g (n)=(1+R(T))^{n⁄T} - (1+R(T))^{(n-1)⁄T}\\)，为了达到极限值 \\(\\lim_{T \\rightarrow \\infty} \\operatorname{Var}\\left(\\upsilon_{A, r_{g}} (T) \\right) = \\varepsilon\\left(\\upsilon_{A}(0) - \\upsilon_{A} (0)^{2} \\right)\\)，将 \\(R(T)\\) 按公式7.20进行设置是一个充分必要条件。 This follows from substituting the choice of \\(R(T)\\) in the variance in Eq. (7.19), which gives 这来源于等式（7.19）中用方差替换 \\(R(T)\\) 的选择，它给出： \\begin{equation} \\begin{aligned} \\lim_{T \\rightarrow \\infty} \\frac {\\operatorname{Var} (\\upsilon_{A,r_g}(T))} {\\upsilon_A (0) - \\upsilon_A (0)^{2}} &= \\lim _{T \\rightarrow \\infty} 1 - \\left(1 - \\frac {\\log (1 /(1-\\varepsilon))} {T} \\right)^{T}(1+o(1)) \\\\ &=\\varepsilon \\end{aligned} \\ \\quad \\quad \\quad \\quad \\quad \\quad (7.21) \\end{equation} This is monotonically non-decreasing in R and non-increasing in \\(T\\), as expected from our intuition. For example, if R is fixed, one can have the initial stake \\(S(0)\\) as small as \\(\\exp (-\\sqrt{\\mathrm{T}} / (\\log T))\\) and still achieve a vanishing variance. As the geometric reward function achieves the smallest variance (Theorem 2), the above \\(R(T)\\) is the largest reward that can be dispensed while achieving a desired normalized variance of \\(\\varepsilon\\) in time \\(T\\) (with initial stake of one). This scales as \\(R(T) \\simeq(1 + 1 / \\sqrt{\\mathrm{T}})^{T} \\simeq \\mathrm{e}^{\\sqrt{T}}\\). Equivalently \\(R/R(T)\\) is the smallest initial stake one can start with, while dispensing \\(R\\) rewards in time stem[T]. We need more initial stake or less total reward, if we choose to use other reward functions. 正如我们的直觉所预期的那样，这是在 \\(R\\) 上单调非递减的，在 \\(T\\) 上是单调非递增的。例如，如果 \\(R\\) 是固定的，初始权益 \\(S(0)\\) 可以小到 \\(\\exp (-\\sqrt{\\mathrm{T}} / (\\log T))\\)，仍然可以获得零方差。当几何奖励函数达到最小方差（定理2），上面的 \\(R(T)\\) 是可分配的最大奖励，同时可以达到在时间 \\(T\\) 内渴望的标准方差 \\(\\varepsilon\\)（初始权益是1）。这可以用 \\(R(T) \\simeq(1 + 1 / \\sqrt{\\mathrm{T}})^{T} \\simeq \\mathrm{e}^{\\sqrt{T}}\\) 来衡量。相等地，当在时间 \\(T\\) 内分配 \\(R\\) 奖励时，\\(R/R(T)\\) 是某一方可以开始的最小初始权益。如果我们选择使用其他的奖励函数，我们需要更多的初始权益或者更少的奖励总额。 Geometric rewards may not be appropriate in practice. If one were to concatenate multiple epochs with geometric reward functions, the drop in block rewards from the end of one epoch to the beginning of the next could be dramatic. This could cause proposers to (temporarily) leave the system, thereby preventing blockchain growth. Hence for purely practical reasons, geometric rewards may be a less desirable solution than constant rewards. We therefore include analogous variance calculations for the constant reward function. Specifically, our focus is on understanding how large the initial stake pool needs to be in order to ensure low variance in proposer stake. 几何奖励在实践中可能不合适。如果要将多个纪元与几何奖励函数连接起来，从一个纪元的结束到下一个纪元的开始，块奖励的减少可能会是戏剧性的（译者言：采用几何奖励，两个时间纪元间的过渡是断崖式的，例如比特币以四年为一个纪元，块奖励四年减半）。这可能导致出块者（暂时）离开系统，从而阻碍区块链的成长。因此，纯粹出于实际原因，几何奖励可能是比固定奖励更不理想的方案。因此，我们为固定奖励函数计入了类似的方差计算。具体来说，我们的重点是了解初始权益池需要有多大，才能确保出块人权益的低方差。 Constant reward function. \\(\\quad\\) Consider the constant reward function of Eq. (7.7). As \\(e^{\\theta_{n}} = (1 + nR / T) /(1 + (n-1) R / T)\\), it follows from Lemma 7.2.2 that 固定奖励函数 \\(\\quad\\) 考虑方程（7.7）的固定奖励函数。由于 \\(e^{\\theta_{n}} = (1 + nR / T) /(1 + (n-1) R / T)\\)，从引理 7.2.2 可以看出： \\begin{equation} \\begin{aligned} \\frac{\\operatorname{Var} \\left(\\upsilon_{A,r_c} (T)\\right)} {\\upsilon_{A}(0) - \\upsilon_A (0)^{2}} &= 1- \\frac {1 + R + \\frac{R}{T}} {1 + R + \\frac{R}{T} + \\frac {R^{2}} {T}} \\\\ &= \\frac {R^{2}} {(T+R)(1+R)} \\end{aligned} \\ \\quad \\quad \\quad \\quad \\quad \\quad (7.22) \\end{equation} Again, this is monotonically non-decreasing in \\(R\\) and non-increasing in \\(T\\), as expected. The following condition immediately follows from Eq. (7.22). 再者，果不其然，这是在 \\(R\\) 上单调非递减的，并且在 \\(T\\) 上是单调非递增的。从等式（7.22）可以立刻得出以下条件。 Proposition 7.2.4. \\(\\quad\\) For a closed PoS system with a total reward \\(R(T)\\) chosen as a function of \\(T\\) and a constant reward function \\(r_c (n) = R(T)⁄T\\), it is sufficient and necessary to set \\begin{equation} R(T) = \\frac {\\varepsilon T} {1 - \\varepsilon} (1+o(1)), \\ \\quad \\quad \\quad \\quad \\quad \\quad (7.23) \\end{equation} in order to achieve \\(\\lim_{T \\rightarrow \\infty} \\operatorname{Var} \\left(\\upsilon_{A,r_c}(T) \\right) = \\varepsilon \\left(\\upsilon_{A}(0) - \\upsilon_{A}(0)^{2}\\right)\\). 命 题 7.2.4. \\(\\quad\\) 对于一个总奖励为 \\(R(T)\\) 且选择固定奖励函数 \\(r_c (n)\\) 的封闭式 PoS 系统，其中 \\(R(T)\\) 是关于T的函数，\\(r_c (n) = R(T)⁄T\\)，为了达到极限 \\(\\lim_{T \\rightarrow \\infty} \\operatorname{Var} \\left(\\upsilon_{A,r_c}(T) \\right) = \\varepsilon \\left(\\upsilon_{A}(0) - \\upsilon_{A}(0)^{2}\\right)\\)，将 \\(R(T)\\) 设置为 \\begin{equation} R(T) = \\frac {\\varepsilon T} {1 - \\varepsilon} (1+o(1)), \\ \\quad \\quad \\quad \\quad \\quad \\quad (7.23) \\end{equation} 是充分必要条件。 （注：\\(ο(1)\\)表示一个关于 \\(1\\) 的高阶无穷小,也就说有一个函数与 \\(1\\) 相比的极限为 \\(0\\); 例如：若 \\(lim(β/α)=0\\)，则称“\\(β\\) 是比 \\(α\\) 较高阶的无穷小”。意思是在某一过程(\\(x→x_0\\)或 \\(x→∞\\) 这类过程)中，\\(β→0\\) 比 \\(α→0\\) 快一些） By choosing a constant reward function, the cost we pay is in the size of the total reward, which can only scale as \\(O(T)\\). Compared to \\(R(T) \\simeq e^{\\sqrt{T}}\\) of the geometric reward, there is a significant gap. Similarly, in terms of how small initial stake can be with fixed total reward \\(R\\), constant reward requires at least \\(S(0) \\simeq R/T\\). Hence by choosing \\(S(0)\\) to be at least a constant fraction of the sum block rewards over time, we can ensure low variance even with a constant reward function. 选择一个固定奖励函数，我们的支付成本是总奖励的大小，它只能用 \\(O(T)\\) 来衡量。与几何奖励的 \\(R(T) \\simeq e^{\\sqrt{T}}\\) 相比，存在明显的差距。相似地，就固定总奖为 \\(R\\) 时初始权益可以有多小而言，固定奖励要求初始总权益至少满足 \\(S(0) \\simeq R/T\\)。因此，随着时间的推移，选择 \\(S(0)\\) 是总区块奖励的一个常数比例，即使使用固定奖励函数，我们也可以确保较低的方差。 "},"Decentralized_Payment_Systems_Economics/CH03_Transaction_Fees.html":{"url":"Decentralized_Payment_Systems_Economics/CH03_Transaction_Fees.html","title":"Transaction Fees","keywords":"","body":" Table of Contents 7.3 Transaction Fees（交易费用） 7.3.1 Fee management today（当今的费用管理方法） 7.3.2 Design considerations（费用设计考虑） 7.3.2.1 User-selected fees, miner gets full transaction fees（用户选择的费用，矿工获得全额交易费用） 7.3.2.2 User-selected fees, decoupled rewards（用户选择的费用，奖励分离） 7.3.2.3 Algorithmic fees, miner gets full transaction fees（基于算法收费，矿工获得全额交易费） 7.3.2.4 Algorithmic fees, decoupled rewards.（基于算法收费，奖励分离） 7.3 Transaction Fees（交易费用） Another class of incentives known as transaction fees are drawn from users’ transactions and awarded to nodes who process that node’s transactions. This can include both the block proposer and/or validator. A primary question in cryptocurrencies is how to choose transaction fees. A common approach—used in Bitcoin and Ethereum, for example—is to allow users to propose their own fees for each transaction. In such a system, miners are incentivized to prioritize high-fee transactions when forming blocks; the higher the transaction fee, the lower the conﬁrmation delay. Most cryptocurrencies also set a minimum transaction fee to prevent users spamming the network with transactions. Two important questions characterize the selection of transaction fees. The ﬁrst is how to choose the magnitude of transaction fees; namely, should fees be proposed by users, imposed by the system, or some combination thereof? Typical considerations include scaling fees with the transaction’s bytesize, monetary value, or both. The second question is how to allocate fees once they are collected. Recent work has shown that naive (and very common) methods of allocating fees can lead to incentive-incompatibility as well as increased confirmation latency. We begin this section by presenting an industry-standard approach to fee management in Section 7.3.1, and discussing why such an approach is unacceptable for a low-latency payment system. Next, we discuss alternatives, and highlight their advantages and disadvantages 7.3.2. 另一种激励措施被称为交易费用，这来自于用户的交易，并被奖励给处理该节点交易事务的节点。这可能同时包含了出块者和验证者，或者只是二者之一。加密货币的一个首要问题就是如何选择交易费用。例如，比特币和以太坊中使用的一种常见方法是允许用户为每笔交易提出自己的费用。在这种系统中，当产生区块时，鼓励矿工优先处理高收费交易；交易费用越高，确认延迟越低。大多数加密货币还设置了最低交易费用，以防止用户向网络发送垃圾交易。交易费用的选择有两个重要的问题。第一个问题就是如何选择交易费用的量级；也就是说，费用是由用户提出，由系统强制执行，或者是他们的某种组合？典型的考虑因素包括按照交易尺寸，币值或者两者来缩放费用。第二个问题是如何在收集费用后分配费用。 最近的工作表明，分配费用的方法太过于单纯（和非常常见）可能导致激励不兼容以及增加的确认延迟。我们在小节7.3.1中提出了一种行业标准的费用管理方法开始本节，并讨论为什么这种方法对于低延迟的支付系统是不可接受的。接下来，我们讨论替代方案，并在小节7.3.2中突出其优缺点。 7.3.1 Fee management today（当今的费用管理方法） Most existing cryptocurrencies allow users to set their own fees; validators choose whether to process a given transaction based on whether the offered transaction fee is high enough. If a miner (or proposer) includes a transaction in a block, that node reaps the full transaction fee as a reward. If a given transaction is not included in a block by any miner after some period of time, that same transaction can be re-broadcast with a higher fee. Although Bitcoin and Ethereum place lower bounds on the size of transaction fees, in practice, users tend to choose substantially higher transaction fees. This natural approach to fee selection is widely adopted, but it has three important negative repercussions: high congestion, high fees, and incentive incompatibility. We begin by describing each of these repercussions more precisely. 大多数现存的加密货币都允许用户自己设定交易费用；验证者根据给出的交易费用是否足够高来选择是否处理一个指定的交易。如果矿工（或者出块者）将一个交易打包到区块中，那个节点收获全部的交易费用作为奖励。如果一个指定的交易在一段时间以后还没有被任何一个矿工打包到区块中去，那么同一个交易可以用更高的费用被重新广播。虽然比特币和以太坊在交易费用的大小上设置了下限，但在实践中，用户实质上倾向于选择更高的交易费用。这种自然的费用选择方法被广泛采用，但它有三个重要的负面影响：高拥堵、高费用和激励不相容。首先我们更准确地描述一下这些后果。 Congestion \\(\\quad\\) Current fee systems contribute critically to congestion. Intuitively, this happens because current mechanisms incentivize validators to choose which transactions to confirm based on transaction fees; this in turn forces users to pay to bypass congestion at equilibrium. To make this statement precise, consider a simpliﬁed system in which new blocks are produced as a Poisson process of rate \\(µ\\), each of which can contain up to \\(K\\) transactions. Transactions arrive in the system at rate \\(λ\\), and each transaction offers a transaction fee \\(b\\), chosen by the user. Let \\(c\\) denote the (random) cost per unit time of delaying a transaction’s confirmation, with \\(c \\sim F[0, \\overline{c}]\\), where \\(\\overline{c}\\) is a positive constant. So if a single transaction’s confirmation is delayed by time \\(\\Delta\\), a delay cost of \\(c \\Delta\\) is incurred. Here \\(F(\\cdot)\\) denotes a cdf with density \\(f(\\cdot)\\) and tail probability \\(\\overline{F}(c) := 1 - F(c)\\).The congestion in the system \\(ρ\\) is defined as \\(\\rho := \\frac {\\lambda} {\\mu K}\\). Let \\(W_K (ρ)\\) denote the expected transaction confirmation delay in a system (in blocks) with block size \\(K\\) and congestion \\(ρ\\), \\(R_K (ρ)\\) the total revenue per unit time raised from users, and \\(D_K (ρ)\\) the total delay cost incurred per unit time. Consider the following result by Huberman et al.: 拥 堵 \\(\\quad\\) 目前的收费系统是引起拥堵的很重要的原因。直观来讲，发生这样的情况是因为现在的机制鼓励验证者可以根据交易费用的大小去选择要确认哪一笔交易；这相应地就会强迫用户在平衡状态时要为了绕过拥堵而支付成本。为了使这个描述更加的准确，考虑这样一个简单的系统，其中新区块的产生是一个速率为 \\(μ\\) 的泊松过程，每一个区块可以容纳多达 \\(K\\) 笔交易。交易以 \\(λ\\) 的速度到达系统，每笔交易提供的交易费是 \\(b\\)，这是由用户选择的。用 \\(c\\) 表示单位时间延迟交易确认的（随机）成本，而 \\(c \\sim F[0, \\overline{c}]\\)，其中 \\(\\overline{c}\\)为正常数。因此，如果单笔交易的延迟时间是 \\(\\Delta\\)，则会产生 \\(c \\Delta\\) 的延迟成本。这里的 \\(F(\\cdot)\\) 代表一个密度为 \\(f(\\cdot)\\)、尾部概率为 \\(\\overline{F}(c) := 1 - F(c)\\) 的累积分布函数（CDF）。系统的密集度 \\(ρ\\) 定义为：\\(\\rho := \\frac {\\lambda} {\\mu K}\\) 。我们用 \\(W_K (ρ)\\) 表示一个区块容量为 \\(K\\)、密集度为 \\(ρ\\) 的系统中的预期交易确认延迟，\\(R_K (ρ)\\) 表示单位时间从用户处获得的总收益，\\(D_K (ρ)\\) 表示单位时间产生的总延迟成本。以下是Gur Huberman等人的一些结论： Theorem 3 ([94]). \\(\\quad\\) At equilibrium, if \\(ρ = 0\\), both revenue and delay cost are \\(0\\). For all \\(ρ \\in (0,1)\\), 定 理 \\(3\\) ([94]) \\(\\quad\\) 在均衡条件下，如果密集度 \\(ρ = 0\\)，收益和延迟成本都是 \\(0\\)。对于所有的 \\(ρ \\in (0,1)\\)。 \\begin{equation} \\begin{aligned} R_{K}^{\\prime}(\\rho) &=K \\rho \\int_{0}^{\\overline{c}} \\overline{F}(c)^{2} W_{K}^{\\prime}(\\rho \\overline{F}(c)) d c>0, \\\\ D_{K}^{\\prime}(\\rho) &=\\frac{R_{K}(\\rho)+D_{K}(\\rho)}{\\rho}>0. \\end{aligned} \\end{equation} In other words, both revenue (and with it infrastructure provision by miners) and delay cost are strictly increasing in \\(ρ\\). 换言之，收益（连带矿工提供的基础设施）和延迟成本是随着密集度 \\(ρ\\) 而严格递增的。 A primary, troubling repercussion of this result is that congestion is not merely a side effect of technical scalability challenges. Rather, it is fundamental; validators are not incentivized to work without congestion. As stated in [94]: An implication of [Theorem 3] is that congestion and delays are necessary for the system to function. Low congestion ρ leads to low delay costs, as blocks are rarely full and each transaction is likely to be processed in the next block. But when blocks are rarely full users have little incentive to pay transaction fees to gain priority, and the system raises little revenue. Without sufficient revenue the number of miners…can become too small, making the system unreliable. 这一结果的一个主要的、令人忧虑的影响是，拥堵不仅仅是技术可扩展性挑战的副作用。相反，它是十分重要的；在没有拥堵的情况下，验证者就没有工作的动力。如[94]所述： 【定理3】的一个含义是系统的运行需要一定的拥堵和延迟。低密集度 \\(ρ\\) 导致低延迟成本，因为区块很少是满的，每个交易可能在下一个块中处理。但是，当数据区块很少是满的时，用户很少有动力支付交易费用以获得优先权，而系统也很少增加收入。如果没有足够的收入，矿工的数量…可能会变得太小，使系统不可靠。 This instability among miners under low congestion conditions is discussed more carefully when we consider incentive compatibility. We want to highlight that although [94] was written for the PoW setting, their results are not specific to PoW. Rather, they stem from the combination of three factors: (1) blocks are produced at a constant rate with a limited block size, (2) different transactions give miners (proposers) diﬀerent reward amounts, and (3) miners get to choose which transactions to include in each block. If a similar fee mechanism were adopted in a PoS system, the same effects would emerge, due to the fact that block times are lower bounded (by protocol and/or by physical constraints). This fundamental relation between congestion and user-selected fees is problematic in a high-throughput payment system. 在我们考虑激励相容性时，更仔细地讨论了低拥堵条件下矿工之间的不稳定性。我们要强调的是，尽管 [94] 是为PoW设置编写的，但它们的结果并不是只特定于PoW。相反，它们是由三个因素组合而成的：（1）区块以固定的速度生产，且区块大小有限；（2）不同的交易给矿工（出块者）不同的奖励金额；（3）矿工可以选择在每个区块中包含哪些交易。如果在一个POS系统中采用类似的收费机制，同样的效果也会出现，因为事实上PoS系统里区块时间的限制较低（受协议和/或物理约束）。在高吞吐量支付系统中，拥堵与用户选择费用之间的这种基本关系是有问题的。 High fees \\(\\quad\\) Another substantial problem with the current fee structure is that fees can be unbounded. Consider the following result from Huberman et al., which considers the same model from the prior discussion on congestion: 高手续费 \\(\\quad\\) 当前的费用结构的另一个实质性问题是费用可以不受限制。考虑Huberman等人得出的以下结果，该结果考虑了之前关于拥堵的讨论得出的相同模型： Theorem 4 ([94]). \\(\\quad\\) At equilibrium, transaction fees coincide with the payments that result from selling priority of service in a Vickrey-Clark-Groves (VCG) auction. 定理4（[94]） \\(\\quad\\) 在均衡状态下，交易费用与维克里（VCG）拍卖中为销售优先服务支付费用是一个道理。 A well-known property of VCG auctions is that participants are incentivized to bid an amount equal to the externality they impose upon others. This may not be problematic on average, but these amounts can become artiﬁcially inflated due to social factors, world events, random fluctuations in system load, etc. Indeed, in December of 2017, Bitcoin fees exceeded $20 per transaction [92]. This volatility and unboundedness is explicitly at odds with the requirements of a payment system. Merchant adoption hinges critically on the guarantee that fees will not grow beyond a maximum threshold; this point has been touted as a primary reason why cryptocurrencies can never replace fiat money [164]. VCG拍卖的一个众所周知的特点是，参与者被激励出价，其金额等于他们强加给其他人的外部效应。平均而言，这可能没有问题，但由于社会因素、世界事件、系统负载的随机波动等原因，这些金额可能会被人为膨胀。事实上，2017年12月，比特币收费一度超过每笔交易20美元[92]。这种波动性和不确定性显然与支付系统的要求不符。商家的采用主要取决于保证费用不会超过最大阈值；这一点已经被吹捧为加密货币永远无法取代法币的主要原因[164]。 A key observation is that whereas congestion arises mainly because of the way fees are disbursed, high or volatile fees result from a combination of two factors: first, fees are proposed by users. Second, validators receive higher rewards for transactions with higher fees, and choose which transactions to include. It is this combination that leads to the VCG result, which in turn leads to unpredictable fees. Hence, any solution to this problem should tackle both factors; it is not enough to simply change the way that fees are disbursed. 一个关键的注意点是，鉴于拥堵主要是因为交易费的支付方式造成的，高或不稳定的费用是由两个因素的综合造成的结果：第一，费用是由用户提出的；第二，验证者可以从收费较高的交易中获得更高的奖励，并可以选择要打包哪些交易。正是这两者的结合导致了 VCG 的结果，从而导致了不可预测的费用。因此，任何解决这个问题的方法都应该同时解决这两个因素；仅仅改变费用的支付方式是不够的。 Incentive incompatibility \\(\\quad\\) A third critical repercussion of the current approach to transaction fee management is incentive incompatibility. In particular, in underutilized systems, it can introduce undesirable equilibria in terms of proposal strategies. Carlsten et al. show that in the absence of inflation, rational Bitcoin miners are no longer incentivized to mine on the longest chain [40]. The intuition is that if miners are only collecting transaction fees, then they are incentivized to include as many transactions as possible in each block. This means that right after a block is mined, the number of transactions available for inclusion in the next block is minimal, as is the associated reward. Thus, when choosing between forks, miners are incentivized to adopt one with fewer transactions in the final block, since such forks leave more transaction fees for the next miner. By exploiting this observation, selfish miners can convince other miners to build on side chains. 激励不相容 \\(\\quad\\) 当前的交易费用管理方法的第三个重要影响是激励不相容。特别是，在未充分利用的系统中，它可以在提案策略方面引起一些不需要的平衡。Carlsten等人表明在没有通货膨胀的情况下，理性的比特币矿工不再被激励到最长链上挖矿[40]。直觉地，如果矿工只收取交易费用，那么他们会被激励在每个区块中尽可能多地打包交易。这意味着在一个区块刚被挖出之后，可以包含在下一个块中的交易数量是最小的，相关的奖励也是最小的。因此，当在不同的分叉之间进行选择时，矿工被鼓励采用最终区块中交易费用较少的分叉，因为此类分叉会为下一个矿工留下更多的交易费用。通过利用这种言论，自私挖矿者可以说服其他矿工建立侧链。 More precisely, [40] shows the existence of equilibria that do not involve honest mining. Their model is as follows: consider a constant stream of incoming transactions. For any time interval \\(\\mathcal {T} = [t_1,t_2]\\), let \\(g(\\mathcal {T}) = t_2 - t_1\\) denote the fees accumulated by the transactions in interval \\(\\mathcal {T}\\) (i.e. one unit of fees per unit time). Notice that the model considers transactions as continuous quantities that can be infinitesimally split between miners. Because of the one-to-one correspondence between transaction times and associated fees, we will interchangeably allow \\(\\mathcal {T}\\) to denote both a time interval and a set of transactions; the meaning should be clear from context. Suppose there is no network latency, and no limit on block size (equivalently, there are few enough transactions in the system that a miner can always include all outstanding transactions in the next block). For a block \\(B\\), let \\(o_B\\) denote the node that proposed block \\(B\\). A key assumption is that when a miner mines a block at time t on block \\(B\\), it can choose to include any subset \\(\\mathcal{T}^{\\prime} \\subseteq[0, t]\\) of outstanding transactions in the new block, thereby collecting fees \\(g(\\mathcal{T}^{\\prime}) = \\left|\\mathcal{T}^{\\prime}\\right|\\). Let \\(L_B (t)\\) denote the amount of outstanding transactions in interval \\([0,t]\\), i.e., transactions that have not been claimed by \\(B\\) or its predecessors. For an amount of outstanding transactions \\(L_B (t)\\), suppose agents use function \\(f(L_B (t))\\) to determine how many transactions to consume in the next block. The authors also assume that if the chain has height \\(H\\), a miner will either build on the chain at height \\(H+1\\) or fork the last block, and build a conflicting block at height \\(H\\); let \\(H_B\\) denote the height of block \\(B\\). Let \\(M_H\\) denote the block at height \\(H\\) that leaves the most unclaimed transactions, i.e., 更准确地说，[40]显示了存在一种不涉及诚实采矿的平衡。他们的模型如下：考虑一个持续的交易输入流。在任意的时间间隔 \\(\\mathcal {T} = [t_1,t_2]\\) ，我们用 \\(g(\\mathcal {T}) = t_2 - t_1\\) 表示在时间间隔 \\(T\\) 内的交易所累积的费用（即每单位时间收取一个单位的费用）。请注意，该模型将交易看作是可以在矿工之间进行无限小分割的连续数量。由于交易时间和相关费用之间的一对一对应关系，我们将允许 \\(T\\) 可互换地去表示一个时间间隔和一组交易；其含义应从上下文中明确。假设没有网络延迟，也没有对区块大小的限制（相当于，系统中的交易足够少，矿工总是可以在下一个区块中包含所有未完成的交易）。对于一个区块 \\(B\\)，我们用 \\(o_B\\) 来代表为区块 \\(B\\) 做提案的节点。一个关键的假设是，当一个矿工在时间t内从区块 \\(B\\) 上挖出一个块时，它可以选择在新的区块中包含任何未完成交易的子集 \\(\\mathcal{T}^{\\prime} \\subseteq[0, t]\\)（即时间区间\\([0,t]\\)内的任何交易组），从而收取费用 \\(g(\\mathcal{T}^{\\prime}) = \\left|\\mathcal{T}^{\\prime}\\right|\\)。我们用 \\(L_B (t)\\) 来表示时间间隔 \\([0,t]\\) 内未完成交易的数量，也就是，还未被区块B或其父块广播的交易。对于大量未完成的交易 \\(L_B (t)\\)，假设代理使用函数 \\(f(L_B (t))\\) 来确定下一个区块中要消耗多少交易。作者还假设，如果链的高度为 \\(H\\)， 矿工要么在链高度 \\(H+1\\) 上建立新区块，要么分叉上一个区块，在高度\\(H\\) 建造一个争议区块；用\\(H_B\\) 来表示区块 \\(B\\) 的高度。用 \\(M_H\\) 来表示在块高度为 \\(H\\) 时留下最大未广播交易的那个区块，即： \\begin{equation} M_{H} = \\arg \\max_{B} \\{L_{B}(t) : H_{B} = H \\}. \\end{equation} （即 \\(M_H\\) 就是在区块高度 \\(H_B=H\\)、使得函数 \\(L_B (t)\\) 取得最大值的那个区块 \\(B\\)，区块 \\(B\\) 只是一个泛指的区块。） Similarly, let \\(G_H (t) = L_{M_{H-1}} (t) - L_{M_H} (t)\\) denote the gap between the most unclaimed fees available at height \\(H-1\\) and the most unclaimed fees at height \\(H\\). [40] considers a class of strategies where each miner chooses (a) which block to build on, and (b) how many transactions to consume in their block. Algorithm 1 describes this procedure. 同样，我们用 \\(G_H (t) = L_{M_{H-1}} (t) - L_{M_H} (t)\\) 表示在块高度 \\(H-1\\) 的最大未广播费用与在高度 \\(H\\) 的最大未广播费用之间的差额。[40]考虑了一类策略，其中每个矿工选择（a）在哪个块上构建新块，以及（b）在其块中消耗多少交易。算法 \\(1\\) 正好描述了这个过程。 Theorem 5 ([40]). \\(\\quad\\) For any constant \\(y\\) such that \\(2 y - \\ln (y) \\geq 2\\), define 定 理 5（[40]）. \\(\\quad\\) 对于满足 \\(2 y - \\ln (y) \\geq 2\\) 的任意常数 \\(y\\)，定义： \\begin{equation} f(x) = \\left \\{ \\begin{array}{ll}{x} & {\\text { if } x \\leq y} \\\\ {-W_{0} \\left(-y e^{x-2 y}\\right)} & {\\text { if } x \\in (y, 2 y-\\ln (y)-1)} \\\\ {1} & {\\text { else }}\\end{array}\\right. \\quad \\quad \\quad \\quad \\quad \\quad (7.24) \\end{equation} where \\(W_0 (·)\\) denotes the upper branch of the Lambert W function which satisfies \\(W_0 (x e^x )=x\\) for all \\(x \\in\\left[-\\frac{1}{e}, \\infty\\right)\\). Then it is an equilibrium for every miner to mine with strategy Function-fork(\\(f\\)) (Algorithm 1) as long as every miner is non-atomic, and miners only mine on top of chains of length \\(H\\) or \\(H − 1\\), where \\(H\\) denotes the length of the longest chain in the system. Furthermore, in such an equilibrium, the expected number of unconfirmed transactions at time \\(n \\in \\mathbb{R}\\) scales as \\(\\Omega(\\sqrt{n})\\). 式中，\\(W_0 (·)\\) 表示 Lambert W 函数的上分支，对于所有的 \\(x \\in\\left[-\\frac{1}{e}, \\infty\\right)\\)，它满足 \\(W_0 (x e^x )=x\\)。然后，使用fork函数\\(f\\)作为挖矿策略（算法1），这对于每一个矿工都是一种平衡，只要每个矿工都是非原子级的，并且矿工们只在链长度 \\(H\\) 或者 \\(H-1\\) 上挖矿，其中H代表系统中最长链的长度。此外，在这种均衡中，在时间 \\(n \\in \\mathbb{R}\\) 内，未确认交易的预期数量用 \\(\\Omega(\\sqrt{n})\\) 来衡量。 Miner gets full \\(\\ \\) transaction fees Delcoupled rewards User-selected \\(\\ \\) fees Bitcoin [130] \\(\\ \\) Ethereum [186] Cardano [101,100] \\(\\ \\) Fruitchains [137] Algorithmic \\(\\ \\) fees Table 7.1: Design space for transaction fee mechanisms. To the best of our knowledge, no blockchain systems today chooses transaction fees purely algorithmically. That being said, several cryptocurrencies impose algorithmic lower bounds on fees, but allow users to offer higher fees if desired (e.g., Bitcoin, Cardano, Ethereum). （表7.1：交易费用机制的设计空间。据我们所知，目前没有区块链系统纯粹是从算法上选择交易费用。也就是说，一些加密货币对费用施加算法下限，但允许用户根据需要提供更高的费用（如比特币、艾达币、以太坊）。） This theorem suggests that Bitcoin is not stable when miners are incentivized only with transaction fees, whereas block rewards help stabilize the reward against temporal fluctuations in the transaction pool size. The \\(\\Theta(\\sqrt{n})\\) transaction backlog is problematic, and the strategic incentives are not just edge cases; the paper shows numerically that honest behavior is itself not a Nash equilibrium. Möser and Böhme observe related behavior in a longitudinal measurement of Bitcoin’s transaction history [129]. 这一理论暗示，当只用交易费用来激励矿工时，比特币是不稳定的，而区块奖励有助于稳定挖矿回报来抵抗交易池规模的暂时性波动。\\(\\Theta(\\sqrt{n})\\) 的交易积压是成问题的，战略激励不仅仅是边缘案例，本文从数字上说明诚实行为本身不是纳什均衡。Möser 和 Böhme观察了比特币交易历史纵向测量中的相关行为[129]。 As with the results on congestion and fee volatility, this result is not speciﬁc to PoW. Rather, it results from miners deriving different rewards from different transactions, and hence being incentivized to process high-fee transactions. Broadly, there are two approaches for protecting against the challenges presented in [40]. The first is to ensure that there are always more transactions than there is space in each block: essentially, create congestion. This scenario is prevalent in Bitcoin today, which may help explain why these attacks have not been observed in the wild. However, our goal in adopting PoS is precisely to avoid congestion, especially as a means of network control. A second approach is to decouple block rewards from the transactions they process. We explore such options in the following section. 与拥堵和费用波动的结果一样，这一结果并不特定于PoW。相反，这是由于矿工可以从不同的交易中获得不同的回报，因此被鼓励去处理手续费高的交易。广泛来说，有两种方法来防止在[40]中所展现出来的挑战。第一就是确保在每一个区块中总是有更多的交易而不是空间：本质上来说，就是创造拥堵。这种情况普遍存在于今天的比特币中，这可能有助于解释为什么在野外没有观察到这些攻击。然而，我们采用PoS的目的恰好就是为了避免拥堵，特别是将其作为一种网络控制手段而言。第二种方法是将区块奖励和其处理的交易分离。我们将在下面的部分中探讨这一选项。 7.3.2 Design considerations（费用设计考虑） The transaction fee structure for Unit-e has not been finalized. We are particularly interested in two main design choices: (1) whether fees are chosen algorithmically or selected by users, and (2) how transaction fees are disseminated to users. This design space is summarized in Table 7.1, along with a partial listing of current cryptocurrencies in each operating point. In this section, we will describe each of the quadrants in Table 7.1 along with the corresponding tradeoffs. Unit-E的交易费用结构尚未定稿。我们对两个设计选择特别感兴趣：（1）手续费是根据算法选择还是由用户选择；（2）如何向用户分发交易费用。在表7.1中总结了这种设计空间，以及当前的加密货币在各自操作点上的一些列举。在本节中，我们叙述表7.1的每个象限，以及相应的权衡。 7.3.2.1 User-selected fees, miner gets full transaction fees（用户选择的费用，矿工获得全额交易费用） This operating point is by far the most popular today, being used in Bitcoin, Ethereum, Monero, and others. We discussed the drawbacks of this approach in detail in Section 7.3.1. To summarize, there are three main problems with this approach: (1) it incentivizes miners to create congestion, (2) transaction fees are unbounded, and (3) it is susceptible to strategic behavior. Because of these problems, which have been well-documented both theoretically and in practice, we do not view this operating point as viable for Unit-e. 这个操作点是目前为止最流行的，被用于比特币、以太坊、门罗币等。我们在第7.3.1节中详细讨论了这种方法的缺点。综上所述，该方法存在三个主要问题：（1）激励矿工制造拥堵；（2）交易费用没有限制；（3）易受战略行为的影响。由于这些问题在理论上和实践上都有充分论证，我们不认为这个操作点对于Unit-e来说是切实可行的。 7.3.2.2 User-selected fees, decoupled rewards（用户选择的费用，奖励分离） Many of the problems from Section 7.3.1 arise because miners can substantially alter their transaction fee rewards by changing which transactions they include in each block. One way to address this problem is by decoupling the transaction fees in a given block from the reward collected by the block miner. If miners cannot significantly alter their rewards by optimizing the transactions in blocks, they are less incentivized to prioritize certain transactions over others. 第7.3.1节中的许多问题都是产生于因为矿工可以通过改变每个区块中要包含哪些交易来本质上改变其交易费用奖励。解决这个问题的一种方法是将给定区块中的交易费用与挖出块的矿工收取的奖励进行分离。如果矿工不能通过优化区块中的交易来显著改变其奖励，那么他们就没有动力去优先处理某些交易。 This operating point is not widely used in live cryptocurrencies, with the exception of Cardano [100]. Nonetheless, the idea of (partially) decoupling a transaction’s fee from the miner of the block containing that transaction has been explored in several works, including inclusive blockchains [113], Fruitchains [137], and Ouroboros [101]. Many of the papers studying this idea are designed for the PoW setting. The basic idea is that the miner of a block does not necessarily reap all the transaction fees in that block, but shares them with other miners who have also contributed to network security and validation. There are many ways to implement such a directive; one explicit mechanism is proposed in Fruitchains, where transaction fees are split evenly over a sequence of consecutive blocks. A key property that Fruitchains exhibit is fairness, defined below. 除艾达币[100]外，此操作点在现存的加密货币中并未被广泛使用。尽管如此，将交易费用和打包该交易的区块的矿工进行分离（部分地）的想法已在若干工作中得到探讨，包括一些普适区块链[113]、水果链[137]和Ouroboros [101]。许多研究这个想法的论文都是为PoW设置而设计的。基本思想就是，一个区块的矿工不一定要获得该区块中的所有交易费用，而是与其他矿工共享这些费用，因为其他矿工也为网络安全和验证做出了贡献。实现这种方针的方法有很多种；在水果链中提出了一种明确的机制，即在一系列连续的块上均匀地划分交易费用。水果链展示的一个关键特性就是公平，定义如下。 Definition 7.3.1 ([137]). \\(\\quad\\) Consider a Byzantine adversary that controls at most fraction \\(β\\) of compute power (stake); the remaining compute power (stake) is controlled by an honest party. A blockchain protocol is \\(δ\\)-approximately fair if there exists a time duration \\(T_0\\) such that for all \\(T \\geq T_{0}\\), in the view of each honest player, the honest party is guaranteed to obtain at least fraction \\((1−δ)(1−β)\\) of blocks with overwhelming probability in every time window of duration \\(T\\). 定义7.3.1([137]). \\(\\quad\\) 想象一个拜占庭的对手，他最多能控制的算力（权益）比例为 \\(β\\)；剩下的算力（权益）由一个诚实派控制。如果存在一个时间持续期 \\(T_0\\) 满足所有的 \\(T \\geq T_{0}\\)，在每一个诚实参与者看来，诚实派保证在持续期 \\(T\\) 内的每一个时间窗口都具有压倒性的概率获得至少 \\((1−δ)(1−β)\\) 比例的区块，这样的区块链协议是接近 \\(δ\\) 公平的。 Fairness is closely related to our notion of equitability from Section 7.2.3. A key difference is that equitability only makes sense for random processes with fixed mean over time (i.e., processes that are stationary up to order 1), whereas fairness encompasses general non-stationary stochastic processes. 公平性与我们在第7.2.3节中提出的均衡性概念密切相关。一个关键的区别是，均衡性只对平均数随着时间固定的随机过程（即达到1阶的平稳过程）的才有意义，而公平性则包括了一般的非平稳随机过程。 Fruitchains proposes a mechanism where by instead of directly including transactions in blocks, miners mine a “fruit” for each transaction [137]. When a transaction first appears in the system, miners start solving a proof-of-work puzzle specific to that transaction, with a different hardness parameter from the main blockchain. This proof-of-work puzzle must include a pointer to a recent block within the previous \\(T(κ)\\) blocks, where κ is a security parameter, and \\(T(κ)\\) is a (pre-specified) polynomial function of the security parameter. A solution to this puzzle, concatenated with the puzzle itself, is called a fruit, and gets broadcast to the network. Regular block miners include fruits in their blocks, rather than plaintext transactions. Fruitchains satisfy the following key property: 水果链提出了一种机制，矿工不再将交易直接包含在区块中，而是在每个交易中去开采“fruit”[137]。当一个交易首次出现在系统中时，矿工们开始去解决一个特定于该交易的工作量证明难题，这个难度参数与主链是不同的。这个工作量证明难题必须包括一个指向先前的 \\(T(k)\\) 个区块中最近一个块的指针，其中k是一个安全参数，\\(T(k)\\) 是关于安全参数的（预先指定的）多项式函数。这个难题的一个解决方案，与难题本身连接在一起，被称为“水果（fruit）”，并被广播到网络。常规的区块矿工在他们的区块中包含水果，而不是纯文本的交易。水果链满足以下关键属性： Theorem 6 (Fairness, [137]). \\(\\quad\\) For any constant \\(0 定理6（公平性，[137]） \\(\\quad\\) 对于任何常数 \\(0 Notice that fairness holds even without considering incentive mechanisms. To obtain incentive-compatibility, Fruitchains makes a key design decision, which is to distribute rewards (block rewards and transaction fees) evenly to the \\(T(k)\\) block miners preceding each block. Suppose that within any stretch of \\(T(k)\\) transactions, the total reward from transaction fees and block rewards is \\(V\\). We say that honest mining is a \\(\\beta^{*}\\)-coalition-safe \\(\\gamma\\)-Nash equilibrium if, with overwhelming probability, no coalition of \\(\\beta 要注意，即使不考虑激励机制，公平也是成立的。为了获得激励相容性，水果链做出了一个关键的设计决策，即把奖励（区块奖励和交易费用）平均分配给每个区块之前的区块 \\(T(k)\\) 的矿工。假设在 \\(T(k)\\) 个交易的任何一个延伸范围内，交易费用和区块奖励合起来的总回报为 \\(V\\)。不考虑正在处理的交易，如果不存在小于 \\(\\beta^{*}\\) 的联盟 \\(\\beta\\) 能够以压倒性的概率获得超过一个乘法因子 (1 + γ) 的效用，那么我们认为诚实挖矿是一个 \\(\\beta^{*}\\) 联盟安全的 \\(\\gamma\\) 纳什均衡。根据该奖励分配方案，水果链满足以下特性： Remark 7.3.2 ([137]). \\(\\quad\\) Consider a blockchain protocol that satisfies \\(δ\\)-approximate fairness with respect to \\(β\\) attackers. If rewards are allocated to the \\(T(k)\\) block miners preceding each block (including the block itself), honest behavior is a \\(β\\)-coalition-safe, \\(3δ\\)-Nash equilibrium. 论述 7.3.2 ([137]) \\(\\quad\\) 考虑一个区块链协议要满足在拥有 \\(β\\) 攻击者时接近 \\(δ\\) 公平。如果奖励在每个区块之前（包括这个区块本身）被分配给区块 \\(T(k)\\) 的矿工，诚实行为就是一个 \\(β\\) 联盟安全的、\\(3δ\\) 纳什均衡。 This remark is straightforward to derive. Fairness implies that within each stretch of \\(T(κ)\\) blocks, the fraction of adversarial blocks is upper bounded by \\(\\beta (1 + \\delta)\\), so the adversary’s reward is upper bounded by \\(\\beta (1 + \\delta) V\\). By fairness, if the adversary had followed the honest protocol, it would be guaranteed to reap a reward of at least \\((1 - \\delta) \\beta V\\). Hence the adversary gains a factor of at most \\begin{equation} \\frac {(1 + \\delta)} {(1 - \\delta)} \\leq 1 + 3\\delta \\end{equation} in rewards for \\(\\delta 这个论述很容易得出。公平意味着在 \\(T(κ)\\) 个区块的每一个延伸之内，敌对区块的比例上限是 \\(\\beta (1 + \\delta)\\)，所以对手的奖励上限是 \\(\\beta (1 + \\delta) V\\) 。公平地说，如果对手遵循诚实的协议，将保证会获得至少 \\((1 - \\delta) \\beta V\\) 的奖励。因此对手最多可获得的奖励与以下乘数因子相关： \\begin{equation} \\frac {(1 + \\delta)} {(1 - \\delta)} \\leq 1 + 3\\delta \\end{equation} 其中 \\(\\delta There is a key downside to sharing transaction fees across a sequence of block proposers, while also allowing users to propose their own fees. Since miners do not collect all the transaction fees from a block, they are less incentivized to include transactions with higher fees first; this means that users have a much weaker incentive to propose fees above the minimum. A key question that must be answered is whether such a system can raise enough transaction fee revenue to pay for network security. At the moment, there is no research quantifying this question (as far as we know). 通过区块提案者的顺序去均分交易费用，同时也允许用户提出自己的费用，这有一个关键的缺陷。因为没有从一个区块中收取所有的交易费用，因此他们没有动力去优先打包更高费用的交易；这意味着，用户提出高于最低水平的费用的动机就要弱得多了。这样就必须要回答一个关键的问题，这样的一个系统是否能够筹集足够的交易费用收入来为网络安全买单呢？目前，还没有研究对这个问题进行量化（据我们所知）。 7.3.2.3 Algorithmic fees, miner gets full transaction fees（基于算法收费，矿工获得全额交易费） A third operating point is that transaction fees could be chosen purely algorithmically, but miners would still reap the full transaction fees of each block they mine. To the best of our knowledge, there are no cryptocurrencies or papers advocating for this approach. Nonetheless, there are related workflows in existing systems. For instance, the Bitcoin Core wallet has a slider that allows the user to choose a desired processing speed; the wallet then algorithmically chooses a fee based on the blockchain’s historical processing rates as a function of fees. Since the underlying blockchain is just Bitcoin, the miner that includes said transaction would reap the (algorithmically-chosen) fee. 第三个操作点是，交易费用可以通过纯粹的算法来选择，但是矿工们仍然可以获得他们挖出的每个区块的全部交易费用。据我们所知，还没有任何加密货币或论文在提倡这种方法。尽管如此，在现有的系统中还是有相关的工作流。例如，比特币的核心钱包有一个滑动条，允许用户选择需要的处理速度；然后钱包根据区块链的历史处理费率，算法性地选择一个费用作为收费函数。由于底层区块链就是比特币，打包上述交易的矿工将获得（算法选择的）费用。 The previous example belies a key point: our reason for exploring algorithmic fees in the first place is to prevent users from paying higher fees to enable faster transaction processing. This is the key source of congestion, as described in Section 7.3.1. A relevant question, then, is how an algorithm might choose a transaction fee. 前一个例子证明了一个关键点：我们一开始就探讨基于算法收费的原因是为了避免用户支付更高的费用，以实现更快的交易处理。如第7.3.1节所述，这是拥堵的关键源头。那么，一个中肯的问题就是算法如何来选择交易费用呢？ Fundamentally, transaction fees pay for two properties: security and convenience. This cost can be broken down into the internal (computational and storage) cost of validating and storing transactions, and the external (communication, security) cost of coming to consensus with the rest of the network. Internal costs are primarily governed by transaction byte size; the larger the transaction, the more resources are required to store the transaction. External costs are more subtle to quantify. At first glance, these costs also seem to scale primarily with transaction byte size, since the consensus protocol does not explicitly differentiate between transactions and byte size determines communication cost. However, in practice, transaction value also plays an important role, for a few reasons. 从根本上讲，交易费用为两个属性买单：安全性和便利性。这个成本可以分解为验证和存储交易的内部（计算和存储）成本，以及与网络其他人达成共识的外部（通信、安全）成本。内部成本主要由交易尺寸的字节大小决定；交易尺寸越大，存储交易所需的资源就越多。外部成本要量化起来就更加微妙了。乍一看，这些成本似乎主要是用交易的字节大小来衡量，因为共识协议并没有明确区分交易和字节大小决定的通信成本。然而，在实践中，交易价值也起着重要的作用，有这么几个原因。 Processing cost. \\(\\quad\\) High-value transactions require better security; they are more appealing targets, and therefore bear a higher standard for validation and finalization. Since it is common practice to wait longer before considering a high-value transaction as confirmed, the network implicitly expends more effort to confirm high-value transactions.4 Security. \\(\\quad\\) Taking a more global view, transaction fees in aggregate fund the security of the network as a whole. Since higher-value payments increase the need for security, they should also bear a larger burden in terms of paying for that increased security. User-proposed fees do not satisfy this requirement, because they are only tied to transaction value through the user’s preferences. Economic fairness. \\(\\quad\\) Finally, existing payment networks (e.g., credit cards) typically set fees as a fixed percentage of transaction value. If Unit-e’s fees are lower than those of traditional payment systems, then it is capturing a surplus for users. In order to distribute that surplus fairly among users, transaction fees should similarly be set as a percentage of transaction value. 1.处理成本 \\(\\quad\\) 高价值的交易需要更好的安全性；它们是更具吸引力的目标，因此要承担更高标准的验证和定稿。由于在将高价值交易视为已确认交易之前需要等待更长的时间是常见的做法，因此网络会隐性地花费更多的精力来确认高价值交易。 2.安全性 \\(\\quad\\) 从更全局的角度来看，交易费用归结起来为整个网络的安全提供了资金。由于更高价值的支付增加了对安全的需求，就提高安全性所作的支付而言，他们也应该承担更大的责任。用户自主提议的收费满足不了这一要求，因为他们仅仅是通过用户的参数选择与交易价值挂钩的。 3. 经济公平 \\(\\quad\\) 最终，现有的支付网络（如信用卡）通常是设定一个和交易价值固定百分比的费用。如果Unit-E的费用低于传统支付系统的费用，那么它将为用户夺得盈余。为了在用户之间公平地分配那些盈余利益，也应该类似地按照交易价值的百分比进行交易费用的设置。 These arguments collectively suggest that transaction fees should somehow scale with transaction value (not necessarily linearly). We therefore consider a fee mechanism that is programmatically determined. For each transaction, wallet software will evaluate a function \\(w(·)\\) that takes as inputs a number of features, including transaction value \\(v\\), transaction byte size \\(b\\), and possibly other parameters capturing the current level of network health \\(h\\). Including network health in the computation enables adaptive fees that respond to network conditions, such as congestion and/or gaps in security. Although we have not specified yet how w should be defined, it should satisfy a few basic properties: 这些论点共同表明，交易费用应该以某种方式与交易价值（不一定是线性的）成比例。因此，我们考虑一个由程序决定的收费机制。对于每笔交易，钱包软件将估算出一个函数 \\(w(·)\\)，该函数可视为在输入一些特征，包括交易价值 \\(v\\)、交易字节大小 \\(b\\)，也可能是捕获当前网络健康水平 \\(h\\) 的其他参数（译者注：即收费和 \\(v、b、h\\) 挂钩）。在计算中包含网络健康状况可以实现响应网络状况的自适应费用，例如拥堵和/或安全漏洞。虽然我们还没有详细说明如何定义 w，但它应该满足一些基本特性： Boundedness: For all \\(v, b, h \\geq 0\\), 有界性：对于所有的 \\(v, b, h \\geq 0\\)，有： \\begin{equation} \\underline{w} \\leq w(v, b, h) \\leq \\overline{w} v \\end{equation} where \\(\\underline{w}\\) is a hard-coded lower bound on the transaction fee, chosen to make spamming attacks costly. Similarly, \\(\\overline{w}\\) is an upper bound on the fee rate, or the amount of fees per unit transaction value. We expect to choose \\(\\overline{w}\\) based on merchant feedback. 即收费有上下边界。其中 \\(\\underline{w}\\) 是交易费用的硬编码下限，选来作为进行垃圾邮件攻击的成本。同样，\\(\\overline{w}\\) 是收费费率的上限，或者是单位交易价值的费用金额。我们希望根据商家反馈选择 \\(\\overline{w}\\)。 Monotonicity (transaction value): For any \\(v_{1} 单调性（交易价值）：对于任何的 \\(v_{1}、 v_{2}、b、h\\)，其中\\(v_{1} \\begin{equation} w\\left(v_{1}, b, h\\right) \\leq w\\left(v_{2}, b, h\\right) \\end{equation} 即交易价值低的收费低。 Monotonicity (transaction byte size): For any \\(b_{1} 单调性（交易字节大小）：对于任何的 \\(b_{1}、b_{2}、v、h\\)，其中 \\(b_{1} \\begin{equation} w \\left(v, b_{1}, h\\right) \\leq w \\left(v, b_{2}, h\\right) \\end{equation} 即交易字节越大，收费越高。 Many functions satisfy these broad requirements, with different tradeoffs. Consider the operating point where miners reap the full transaction fees of each block they mine; intuitively, for a given function w, the weaker its dependency on transaction value, the less congestion we expect to see. This is because of the arguments in Section 7.3.1; congestion is caused by miners choosing which transactions appear in each block. At the same time, weakening this dependency degrades the system’s security properties. A key research question is to analyze the effects of different transaction fee functions on the congestion-security tradeoff. 许多函数可以通过不同的权衡来满足这些广泛的需求。考虑这样一个操作点，矿工获得他们挖到的每一个区块中的全部交易费用；直观地说，对于一个给定的函数 \\(w\\)，它对交易价值的依赖性越弱，我们期望看到的拥堵就越少。这是因为在第 7.3.1 节的讨论中说到，拥堵是由于矿工可以自主选择在每个区块中出现哪些交易所引起的。但是，削弱这种依赖性会降低系统的安全属性。一个关键的研究议题就是分析不同交易费用函数对于拥堵与安全之间的权衡所产生的影响。 In summary, the approach of choosing transaction fees purely algorithmically has some attractive properties; primarily, transaction fee rates would no longer be unbounded. However, the core problem of congestion remains. High-fee transactions will still be processed earlier, which promotes a hierarchy among transactions, and raises questions of fairness to users. 总之，纯粹通过算法选择交易费用的方法拥有一些引人注目的特性；首当其冲的就是，交易费率不再是没有边界的。然而，拥堵的核心问题仍然存在。高收费的交易仍然会被优先处理，这促使交易与交易之间有了层次等级，增加了用户之间公平性的问题。 7.3.2.4 Algorithmic fees, decoupled rewards.（基于算法收费，奖励分离） The fourth operating point consists of choosing fees purely algorithmically, while also partially decoupling the allocation of transaction fees from the block(s) that included those transactions. This is the least well-understood among the four operating points, but it has some appealing properties. First, transaction fees can be bounded. Second, congestion can be reduced, by reducing the incentive for miners to strongly favor transactions with high fees. Third, unlike the operating point in Section 7.3.2.2 (user-selected fees, decoupled rewards), it does not matter that users are not incentivized to propose higher fees, since we can algorithmically choose fees that support network functionality. A key downside of this approach is complexity; analyzing the incentives of miners and the relation between the fee structure and network viability may be quite complicated if the transaction fee algorithm is complex. We view this as the main obstacle to this approach, and an important direction for future research and consideration in the transaction fee design of Unit-e. 第四个操作点包括纯算法地选择费用，同时也部分地将交易费用的分配与包含这些交易的区块分离。这是四个操作点中最不容易理解的，但它有一些吸引人的特性。首先，交易费用是有边界的。其次，通过削弱矿工偏爱高收费交易的激励，可以减少拥堵。再者，与第7.3.2.2节（用户自选费用、奖励分离）中的操作点不同，不鼓励用户提出更高的费用，但这并不重要，因为我们可以从算法上选择支持网络功能的费用。这种方法的一个主要缺点是复杂性；如果交易费用算法很复杂，分析矿工的激励机制以及费用结构与网络生存能力之间的关系可能会非常复杂。我们认为这是本方法的主要障碍，但也是未来研究的一个重要方向，同样是在设计Unit-e的交易费用时考虑的一个重要方向。 "},"Decentralized_Payment_Systems_Economics/CH04_Acknowledgement.html":{"url":"Decentralized_Payment_Systems_Economics/CH04_Acknowledgement.html","title":"Acknowledgement","keywords":"","body":" Table of Contents 7.4 Acknowledgement（鸣谢） Bibliography（参考文献） 7.4 Acknowledgement（鸣谢） The authors thank K. Ruan and G. Wang for collaborations on the design and analysis of the geometric incentive mechanism. This chapter includes material from [103] (Section 7.1) and [69] (Section 7.2). 作者感谢 K. Ruan 和 G. Wang 在几何激励机制的设计与分析方面的协作。本章引用了参考文献[103]（第7.1节）和[69]（第7.2节）的素材。 \\(\\quad\\) \\(\\quad\\) \\(\\quad\\) \\(\\quad\\) \\(\\quad\\) Bibliography（参考文献） [37] Vitalik Buterin and Virgil Griﬃth. Casper the friendly ﬁnality gadget. arXiv preprint arXiv:1710.09437, 2017. [40] Miles Carlsten, Harry Kalodner, S Matthew Weinberg, and Arvind Narayanan. On the instability of bitcoin without the block reward. In Proceedings of the 2016 ACM SIGSAC Conference on Computer and Communications Security, pages 154–167. ACM, 2016.(http://randomwalker.info/publications/mining_CCS.pdf) [61] Jacob Donnelly. What is the ’halving’? a primer to bitcoin’s big mining change. 2016. [68] GiuliaFanti, LeonidKogan, SewoongOh, KathleenRuan, PramodViswanath, andGeruiWang. Compounding of wealth in proof-of-stake cryptocurrencies. arXiv preprint arXiv:1809.07468, 2018. [69] Giulia Fanti, Leonid Kogan, Sewoong Oh, Kathleen Ruan, Pramod Viswanath, and Gerui Wang. Compounding of wealth in proof-of-stake cryptocurrencies. arXiv preprint https://arxiv.org/pdf/1809.07468.pdf, 2018. [92] Alyssa Hertig. Bitcoin fees are down big: Why it happened and what it means. February 2018. [94] Gur Huberman, Jacob D Leshno, and Ciamac C Moallemi. Monopoly without a monopolist: An economic analysis of the bitcoin payment system. 2017. [100] Aggelos Kiayias, Elias Koutsoupias, Mario Larangeira, Lars Brunjes, Dimitris Karakostas, and Aikaterini Stouka. Incentives and staking in cardano. https://staking.cardano.org/. [101] Aggelos Kiayias, Alexander Russell, Bernardo David, and Roman Oliynykov. Ouroboros: A provably secure proof-of-stake blockchain protocol. In Annual International Cryptology Conference, pages 357–388. Springer, 2017. [103] Leonid Kogan, Max Orhstrand, Giulia Fanti, and Pramod Viswanath. Economics of proof-ofstake payment systems. Working paper, 2018. [113] Yoad Lewenberg, Yonatan Sompolinsky, and Aviv Zohar. Inclusive block chain protocols. In International Conference on Financial Cryptography and Data Security, pages 528–547. Springer, 2015. [129] Malte Möser and Rainer Böhme. Trends, tips, tolls: A longitudinal study of bitcoin transaction fees. In International Conference on Financial Cryptography and Data Security, pages 19–33. Springer, 2015. [130] Satoshi Nakamoto. Bitcoin: A peer-to-peer electronic cash system, 2008. [137] Rafael Pass and Elaine Shi. Fruitchains: A fair blockchain. In Proceedings of the ACM Symposium on Principles of Distributed Computing, pages 315–324. ACM, 2017. [141] Robin Pemantle. A time-dependent version of pólya’s urn. Journal of Theoretical Probability, 3(4):627–637, 1990. [164] Hyun Song Shin. Cryptocurrencies and the economics of money, Jun 2018. [177] Nicolas Van Saberhagen. Cryptonote v 2.0, 2013. [183] Ethereum Wiki. Sharding roadmap. https://github.com/ethereum/wiki/wiki/ Sharding-roadmap. [186] Gavin Wood. Ethereum: A secure decentralised generalised transaction ledger. Ethereum project yellow paper, 151:1–32, 2014. "},"Token_Economics_Incentive_design/":{"url":"Token_Economics_Incentive_design/","title":"Token Economics Incentive design","keywords":"","body":"激励设计 加密经济学到Token经济的激励设计 参考文献： [1] what-is-cryptoeconomics [2] making-sense-of-cryptoeconomics [3] Ben El Baz 关于激励设计的课程 [4] 区块链共识算法 [4] Paxos算法原理1 、2 "},"Token_Economics_Incentive_design/CH01.html":{"url":"Token_Economics_Incentive_design/CH01.html","title":"加密经济学和Token经济的起源和定义","keywords":"","body":"加密经济学和Token经济的起源和定义 什么是加密经济学？ 加密经济学概念最早是在以太坊创始人 Vitalik 的ppt 中提出，这里有一篇解释其PPT的文章。 Vitalik认为加密经济学主要涵盖三块： 设计一个有目的性的系统,即期望特性（desired properties） 用加密学证明过去的事情 用经济激励来保证你的系统目标可以维持到未来 他认为：加密经济学主要是用激励机制来保证系统的安全性。 加密经济学的重要性 加密经济学可以让互不认识、互不信任的各个参与方达成共识 密码学和经济激励是加密经济学最重要的元素，以此可以建立一个具有共识能力、不依赖可信赖权威机构的去中心化网络。 加密经济学是加密货币和数字资产的基础 加密经济学分析的是由比特币开创的去中心化数字经济中的经济互动，是加密货币和数字资产的基础。 加密经济学是通过密码学和博弈论来设计去中心化的计算网路 密码学的作用 密码学的用途是:证明过去的事情。 第一，加密工具，比如数字签名，我发起一个交易，或一个信息，因为我有私钥，那么系统就可以证明这是过去发生的事情。 第二，哈希算法，即工作量证明（proof of work），可以证明有人做过工作，还可以证明过去的交易没有被更改。 第三， 默克尔树（merkle tree），可以证明交易数据的有效性，而不用提供所有的子交易的数据。可以验证少量的数据，例如一个哈希，就可以知道这笔交易是否有效。这就是 backward-facing，密码学在这些方面通过数学公式可以证明过去的事情的真实性。 博弈论的作用 博弈论的用途：鼓励和预测未来行为 因为你用的token或叫coins可以创造一些激励，影响所有这个市场参与者的动作和他们的角色，以此来影响未来。我们可以对真实的行为进行奖励，也可以对欺骗做出token的惩罚。博弈论便是用这样的方法来保证未来的一些行为。 加密经济学既证明过去，又保障未来，所以有人称加密经济学叫做逆向设计未来（reverse-engineering future）。第一步是确定清楚系统的目标，即想要系统达到什么样的状态。然后根据目标去设计前面的东西。 比特币中的加密经济学应用 第一部分：目标设计 比特币的目标设计。比特币系统的第一目标是：只可追加的区块链（append-only blockchain），意思是只可增加区块、不能修改或删除前面的区块；另外一个目标是：系统只额能允许一些有效的交易，这个跟UTXO有关。 第二部分：加密工具 比特币中的加密工具。比特币用到的密码学工具包括数字签名和哈希算法等，用工作量证明来确保花费了计算工作，同时也用哈希连接每一个区块，来保证不可篡改。 第三部分：激励设计 比特币里的激励设计。比特币的激励分为奖励和惩罚两部分。奖励是，挖出区块就有奖励，最早挖出一个块有50BTC奖励，奖励矿工做真实的行为，还有给交易手续费来吸引更多的矿工去挖矿。它的惩罚呢？如何避免非真实行为？原因是PoW，你需要花费cpu的算力来做区块验证。如果你在一个不被允许的或是一个非主链的区块上去挖矿，你就会浪费你的计算资源，这就是要给惩罚。另外一个惩罚，如果你要进行攻击，也是有成本的，因为达到51%的攻击，需要很多硬件，需要很大的成本。 什么是token经济 token经济就是使用token的激励来设计的一个经济系统，一个市场，或一个商业网络。主要围绕需求、供给给予激励，具体包括：限制或减少供给、提高需求等。 激励的最终目标： 确保token价格稳定 确保token价格有长期升值空间 确保网络能吸引足够的参与者 加密经济学和token经济的区别 适用场景 加密经济学是用在底层计算机网络、去中心化的计算及网络设计。而token经济设计是针对上层的token化商业（tokenized businesses），比如DAPP或其他应用，它币加密经济学更偏向应用层面。 比特币和以太坊系统就是最早的加密经济学设计，属于底层。还有比如二层网络，这也是去中心化的计算网络。而像社交网络、社交媒体或者实体经济相关的应用，都属于token经济研究的范畴。 工具上的区别 加密经济学和去中心化计算网络的目标，是做一个合理的、成功的共识机制，因为共识机制是在不需要成本很高的中介下，让很多单独的分布式计算节点，在什么是真实的交易和什么是错误的交易上达成一致。所以设计加密经济学的工具就包括博弈论、P2P网络、密码学、货币理论和病毒循环（viralloops）等，这些东西都加起来就是机制设计。而机制设计还需要考虑商业模式的分析，还有网络参与者或者市场参与者的动力分析，还有激励设计的战略，还有怎样设定规则来执行前面的思维，这是共识机制的输出。 共识机制做好了就可以达到一个低成本、高实用性的网络，而且这个网络会随着时间的推移获得一个高增长率。然后形成长期稳定的分布式网络。如果做不好，就可能失败。 设计token商业化要使用的工具包括博弈论、智能合约、货币理论、积分奖励和病毒循环，这些加起来就是一个设计token激励模型的工具。这里面同样会有商业模式的分析，还有网络参与者或市场参与者的动力分析，还有激励设计的战略，以及怎样设定规则来执行前面的思维。如果设计的好，可以有一个长期稳定的商业，设计不好就失败。 对比可知，加密经济学是要设计一个分布式计算网络，token经济是要设计一个token化商业。区别在于加密经济学的工具包含密码学、博弈论、和P2P网络，这些属于更底层的设计，是基于密码学所作的数字资产，它包括了BTC这些币和基于公链所发行的数字资产；而token经济是包含token合约，就是智能合约，然后还有另一方面就是忠诚度奖励（loyalty rewards）系统，或者叫积分系统，类似于传统行业，怎么用一些积分来吸引用户到你的平台，来吸引用户反复使用你的产品或者服务。 但二者有要给共同的目标，都需要理解参与者的需求和动机，并设计激励措施来鼓励系统预期的行为。 所以加密经济学是底层的一种设计，token经济更多偏向应用层面的设计，但他们都是一种激励设计。 "},"Token_Economics_Incentive_design/CH02.html":{"url":"Token_Economics_Incentive_design/CH02.html","title":"机制设计和博弈论基础","keywords":"","body":"机制设计和博弈论基础 机制设计 一、什么是机制设计 加密经济学的核心就是机制设计，机制设计就是一门设定规则的科学。机制设计是通过设定规则，然后让不同参与者的战略行为达到一个理想的结果。 二、机制设计跟加密经济学的关系 两者的涵盖范围不同，加密经济学的设计更倾向于在加密领域，而机制设计则适用于所有范围。 三、机制设计发展史 亚当.斯密——“看不见的手”、“人会为了自身利益最大化” 亚当.斯密作为国富论的创始人在经济学史上拥有重要的地位。因为他的思想形成了一个核心前提：个人的动机主要要出于自身的利益，而这种集体的自身利益，也就是所谓“看不见的手”，它是推动整个社会进步到最佳状态的原因。尽管这个想法并不完美，但它有助于我们更好的理解自身利益的力量。 安东尼.奥古斯丁.库尔诺——竞争企业如何决定生产 库尔诺的主要研究在了解工厂是如何决定他们的生产水平的。库尔诺的贡献是他将公司定义为一种“战略性的行动”，“战略性的行动”意味着公司根据公司对手的生产情况进行战略性的回应。理论的核心思想是通过分析从不同决策中获得的价值来衡量并判断竞争对手将采取什么行动，这个理念形成了博弈论决策的基础。 约翰.冯.诺伊曼——《博弈论与经济行为》 约翰.纳什——纳什均衡、莱昂尼德.赫维奇——机制设计理论 埃里克.马斯金、罗杰.迈尔森、威廉.维克瑞——拍卖理论 四、机制设计最好的应用场景 最好的应该就是拍卖设计，拍卖设计的主要目标是如何让所有的竞价者报出他们的真实价格。 最高价拍卖 最高价拍卖就是出价最高的竞价者会获得拍卖品。 举个例子，现在我在竞拍一件艺术品。我对这件艺术品的估值为10元，也就是说，我最高愿意出10元买到这件艺术品。 那么会有两种可能的情况。 第一种情况，我按我的直实心理价格10元出价，这时如果竞拍成功，那么我自己的收益为10元估价减10元出价，等于0元。 第二种情况，我出价一个比我真实估价更低的价格，比如9元，这时如果我竞拍成功，我的额外收益就是10元减去9元出价，也就是收益1元。 我们能看出，这种最高价的拍卖机制，实际上是在激励竞价者隐藏自己的真实估价，而以低于自己估价的金额来出价，因为这样更可能赚到超额的收益。这对拍卖方来说是一个不好的机制，它无法让所有竞价者报出他们的真实价格，而如果所有竞价者都不说出自己的真实估价，那么拍卖品最终成交的价格就会比较低。 次高价拍卖 在次高价拍卖中，拍卖品也卖给出价最高的竞价者。但是，最高出价者支付的价格却不是自己出的价格，而是所有出价者中排第二高的价格。 举个例子，这次我和你都在竞拍一件艺术品。如果我是最高的竞价者，我出价10元，而你是出价第二高的人，你出价9元，那最后的拍卖结果是我拍卖成功，但是我只需支付9元。我们计算一下这时我的收益：我估价10元，我出价也是10元，然后我支付9元，收益1元。 这种机制就不会激励出价者隐藏自己对拍卖品的估价。系统反过来会让参与者给出他们对拍卖品的真实估价，所以次高价拍卖的机制设计，比最高价拍卖合理。 博弈论 一、什么是博弈论 博弈论，英文叫Game Theory，其实就是一个研究如何做决策的学科。具体来说，博弈论研究的是“决策主体的行为在直接相互作用时，如何进行决策，以及这种决策如何达到均衡”的问题。其实，就是说，人在采取哪种行动时，不但要考虑到自身的决策行为对其他人的可能影响，以及其他人的行为对自身的可能影响，通过选择最佳行动计划，来寻求收益或效用的最大化。 二、博弈论为什么重要 因为它有一些预测的价值，考虑到不同人的自身利益和市场激励，博弈论可以起到一些市场预测的作用。如果我们能够识别出设计的不好的市场激励，那么我们就能预测表现不佳的市场。 三、几个博弈论中的经典问题 目前在生物学、经济学、国际关系、计算机科学、政治学、军事战略和其他很多学科都有广泛的应用。博弈论主要研究公式化了的激励结构间的相互作用。是研究具有斗争或竞争性质现象的数学理论和方法。也是运筹学的一个重要学科。博弈论考虑游戏中的个体的预测行为和实际行为，并研究它们的优化策略。 策略(strategies)：一局博弈中，每个局中人都有选择实际可行的完整的行动方案，即方案不是某阶段的行动方案，而是指导整个行动的一个方案，一个局中人的一个可行的自始至终全局筹划的一个行动方案，称为这个局中人的一个策略。如果在一个博弈中局中人都总共有有限个策略，则称为“有限博弈”，否则称为“无限博弈”。 得失(payoffs)：一局博弈结局时的结果称为得失。每个局中人在一局博弈结束时的得失，不仅与该局中人自身所选择的策略有关，而且与全局中人所取定的一组策略有关。所以，一局博弈结束时每个局中人的“得失”是全体局中人所取定的一组策略的函数，通常称为支付（payoff）函数。 次序（orders）：各博弈方的决策有先后之分，且一个博弈方要作不止一次的决策选择，就出现了次序问题；其他要素相同次序不同，博弈就不同。 博弈涉及到均衡：均衡是平衡的意思，在经济学中，均衡意即相关量处于稳定值。在供求关系中，某一商品市场如果在某一价格下，想以此价格买此商品的人均能买到，而想卖的人均能卖出，此时我们就说，该商品的供求达到了均衡。 纳什均衡(Nash Equilibrium) 纳什均衡是一种策略组合，使得同一时间内每个参与人的策略是对其他参与人策略的最优反应。 假设有n个局中人参与博弈，如果某情况下无一参与者可以独自行动而增加收益（即为了自身利益的最大化，没有任何单独的一方愿意改变其策略的），则此策略组合被称为纳什均衡。 纳什均衡的数学定义：在博弈 G = {S1,…,Sn：u1,…,un}中，如果由各个博弈方的各一个策略组成的某个策略组合(s1*,…,sn*)中，任一博弈方 i 的策略si*，都是对其余博弈方策略的组合(s1*,…si-1,si+1,…,sn)的最佳对策，也即 ui（s1,…s*i-1,si*,s*i+1,…，sn*） ≥ ui（s1*,…s*i-1,sij*,s*i+1,…，sn*）对任意sij ∈ Si都成立，则称（s1*,…，sn*）为G的一个纳什均衡。 在纳什均衡点上，每一个理性的参与者都不会有单独改变策略的冲动。纳什均衡点存在性证明的前提是“博弈均衡偶”概念的提出。所谓“均衡偶”是在二人零和博弈中，当局中人A采取其最优策略a,局中人B也采取其最优策略b,如果局中人B仍采取b,而局中人A却采取另一种策略a，那么局中人A的支付不会超过他采取原来的策略a的支付。这一结果对局中人B亦是如此。 "},"Token_Economics_Incentive_design/CH03.html":{"url":"Token_Economics_Incentive_design/CH03.html","title":"共识机制","keywords":"","body":"共识机制 区块链能够不依赖中间可信方达成可信共识，解决了在不可信信道上传输可信信息、价值转移的问题，而共识机制则解决了区块链如何在分布式场景下达成一致性的问题。区块链的伟大之处就是它的共识机制在去中心化的思想上解决了节点间互相信任的问题。区块链能在众多节点达到一种较为平衡的状态也是因为共识机制。尽管密码学占据了区块链的半壁江山，但是共识机制是保障区块链系统不断运行下去的关键。 在分布式的思想刚被提出来时，人们就开始根据FLP定理和CAP定理设计共识算法。 规范的说，理想的分布式系统的一致性应该满足以下三点： 可终止性（Termination）：一致性的结果可在有限时间内完成。 共识性(Consensus)：不同节点最终完成决策的结果应该相同。 合法性(Validity)：决策的结果必须是其他进程提出的提案。 但是在实际的计算机集群中，可能会存在以下问题： 节点处理事务的能力不同，网络节点数据的吞吐量有差异 节点间通讯的信道可能不安全 可能会有作恶节点出现 当异步处理能力达到高度一致时，系统的可扩展性就会变差（容不下新节点的加入）。 科学家认为，在分布式场景下达成完全一致性是不可能的。但是工程学家可以牺牲一部分代价来换取分布式场景的一致性，上述的两大定理也是这种思想，所以基于区块链设计的各种共识机制都可以看作牺牲那一部分代价来换取多适合的一致性，在这种思想上进行一个灵活的变换，即在适当的时间空间牺牲一部分代价换取适应于当时场景的一致性，可以实现灵活的区块链系统，即可插拔式的区块链系统。 在分布式系统中有无作恶节点分为拜占庭容错和非拜占庭容错机制。 拜占庭容错的共识算法 PoW：proof of work，比特币莱特币等货币型区块链（公有链） 工作量证明是矿工在处理交易数据（对数据也是进行哈希）的同时不断的进行哈希计算，求得一位前23位为0的哈希值，这个值成为nonce黄金数。当全网有一位矿工哈希出nonce时，他就会把自己打包的区块公布出去，其他节点收到区块验证区块后就会一致性认为这个区块接到了区块链上，就继续进行下一个区块的打包和哈希计算。在这个过程中，中本聪大神是通过算力的比拼牺牲了一部分最终一致性（因为会有分叉的产生）并且需要等待多个确认，但是这种简单暴力的方法却保证了整个区块链系统的合法性，而且把区块链系统的健壮性提升到极致，就算全网只剩下一个节点运行，这个区块链系统还是会继续运行下去。同时 PoW 也充分提高了区块链系统的安全性，依靠 51% 攻击理论去破坏区块链系统是只有疯子才会采取的方法。 比特币的 PoW 机制是第一个成功的加密经济学应用。它很好的结合了加密学和博弈论，做到了经济学中的“激励相容的纳什均衡（Incentive compatible Nash equilibtium）”，在这种情况下，比特币矿工的最优选择是确认真实交易。PoW 运用了数字签名、哈希算法等加密学手段来验证数据，使得过去的数据能被准确地记录。同时它用比特币作为挖矿人的奖励，用算力消耗及电费作为惩罚。 PoW 机制作为开创性的共识机制极具意义，但它并不完美。 PoW 的优点： 完全去中心化。 节点自由进出，容易实现。 破坏系统花费的成本巨大。 PoW 存在的问题： 浪费算力和电力来挖矿。 早期的 PoW 机制下交易最终确认比较慢。每个交易至少需要六个确认，有时可能要等一个小时才能完成一笔交易。 PoW 可能面临自私挖矿（selfish-mining）的风险。自私挖矿，就是一个矿工可能会不让别人知道他发现的区块，以便给自己寻找下一个区块增加优势。 对于“在错误的链上的挖矿”这件事，PoW 机制没有直接去惩罚，而只是通过在孤块上挖矿的收益为负，会浪费电这种方式来间接的惩罚。 后来，由于ASIC挖矿设备的出现，其更强劲的计算能力，使得拥有ASIC设备的人们和机构通常可以比其他人拥有更高的概率挖到区块，因此产生了另一种担忧，我们先看一张哈希算力分布表： 图片来源：Blockchain.info 可以看到，约有65%的算力是被5家矿池瓜分的！理论上来说，这5个大矿池可以联合起来并在比特币网络上发动51%攻击。 而在之后出现的一些共识机制，就是在试图解决 PoW 的问题。 从激励的角度来看，在PoW机制里，矿工会面临这样的一个选择：现在我面前有A和B两条链，那么我在哪条链上挖矿的收益最大呢？ 在POW机制里，有四种选择： 选择一、是我不挖矿。这时预计收入是零，因为没有投入，当然也无产出。 选择二，A链挖矿成功率是90%，我在A链挖矿，预计收入是0.9。 选择三，B链挖矿成功率是10%，我在B链挖矿，预计收入0.1。 选择四，是我在A和B链上同时挖矿。因为算力是有限的，所以我在A链分配50%的算力，B链上分配50%。在这种情况下，我的预计收入是 0.9*50% + 0.1*50% =0.50。 那么如果你是矿工，你会怎么选择呢？对比一下收入，就能知道一个理性的人一定会选择二，只在A链上挖矿，因为它的预计收入最高。 这样看来，PoW机制是一个很好的激励设计，因为它通过激励实现了让矿工在正确的链上挖矿。 但是PoW的耗电、交易确认慢等问题并没有解决，所以出现了后面的权益证明机制，简称 PoS。 PoS：proof of stake，点点币、量子链、升级后的ETH等 从比特币诞生以来，PoW 的设计理念成为数字货币和区块链的主流共识机制，但是由于其对能源的消耗巨大，2013年点点币（Peercoin）系统中提出并实现了另一种共识机制——权益证明。简单地说，PoS 就是当矿工需要确认一笔交易的真实性和准确性时，不是发送交易哈希值来证明，而是通过网络进行投票来确认。 PoS的实现原理及公式 没有挖矿过程，在创世区块内写明了权益分配比例，之后通过转让、交易的方式（通常就是ICO），逐渐分散到用户手里，并通过“利息”的方式新增货币，实现对节点的奖励。 PoS的公式为： hash(block_header) = 币龄的计算：coinage = 币的个数*币的剩余使用时间 其中，coinage表示币龄，这将意味着，币龄越大，越容易得到答案。而其中币龄的计算是通过挖矿者拥有的币乘以每个币的剩下使用时间得到，这也将意味着拥有的币越多，也越容易得到答案。这样，PoS 解决了 PoW 中浪费资源的问题，同时确认速度也得到了很大提升。另有观点认为在 PoS 中挖矿者不可能拥有全网51%的币，所以也解决了51%攻击的问题。 但是PoS共识机制有一个缺点，就是在这种机制下，出现了 “无厉害关系”（Nothing at Stake）的问题。 回到之前 PoW 的四种投票选择。对于使用POS的区块链来说，四种选择的前三种和 PoW 情况下是一样的，但是因为 PoS 机制下，挖矿不需要算力，只需要投票就行了。所以对于第四个选择，可以选择同时在A链（正确的链）和B链进行投票，预计收入就是 (0.1 + 0.9) 等于1，比选择二的0.9更高。也就是说，在PoS机制下，同时在A、B两条链挖矿是比只在A链正确的链上挖矿更优的选择。 如果你是一个验证者，你可以简单地把钱投到A、B两条链上，完全无需担心间接的不良后果。不管发生什么事，你都总是可以赢，不会失去任何东西，不管你的行为有多恶意。 这就是PoS中的“无厉害关系”问题，为了解决这个问题，为了解决这个问题，以太坊目前在开发另一种共识机制Casper PoS，它是传统 PoS 的改进版。Casper POS的解决方案简单说是这样的：系统会明确惩罚矿工在错误的区块上开采。也就是说，如果我要参与挖矿，必须先抵押一些 ETH 在一个资金池里，如果我采用一种恶意的方式行动、试图做“无利害关系”的事，比如不在该区块上面去挖矿，或者自私挖矿时，我将立即遭到惩罚，系统会扣掉（deposit slashing）一些我抵押的ETH。 实际上在2014年的Tendermint BFT共识机制的白皮书中讨论了使用“消减存款”来解决“无利害关系”问题的想法，这是Tendermint的关键创新之一。Tendermint 也是 Cosmos 使用的 BFT 共识协议。 所以在 Casper PoS 机制下，如果一个矿工选择同时在A链（正确的链）和B链上挖矿的话，就会被扣钱，导致收益减少，所以我不得不遵守规则在A链上挖矿。有人说，如果用哈希来验证算力的 PoW，可以定义为加密学验证（Cryptographic Proof）的话，那么 Casper PoS 就可以定义为加密经济学验证（Cryptoeconomic Proof）， Casper PoS 是一个很重要的创新。 PoS还有一种变体，就是委托权益证明机制（Delegated Proof of Stake），简称 DPoS。。 DPoS：Delegated Proof of Stake，委托权益证明 DPoS是指，所有持有token的人通过token投票选出部分节点，然后委托这些选出来的节点来验证区块，类似于董事会投票机制。DPoS 机制也是为了 PoS 解决“无利害关系”问题。EOS 和 Cosmos 采用的就是 DPoS 机制。 在 EOS 里，所有持有 token 的人投票选举超级节点，持有 EOS 相对于拥有投票权，然后由超级节点来验证区块。 Cosmos 的机制也和EOS类似，不同的是投票选出的节点如果挖到矿，会将区块奖励按比例分享入股该节点的用户。 那 DPoS 机制为什么可以解决 Nothing at stake 的问题呢？ DPoS 和 Casper PoS 为解决 Nothing at stake 的问题提供了不同的方法。 EOS 中的 DPoS ，因为超级节点一直在被投票，所有如果超级节点确实做了恶意行为，对多个链投票，那么社区可以投票给其他的超级节点，并将其从超级节点的候选池中删除。那么 Cosmos 中的 DPoS，如果验证节点违法协议，会被扣掉押金，因此它认为这是一个足够强大的激励和惩罚措施，可以避免“无利害关系”问题。 EOS的超级节点投票机制也有缺点，那就是：在EOS里节点有更强烈、贿赂选民的动机。 比如 P+Epsilon 攻击，它的意思是一个攻击者可以影响很多人的投票结果，而且可以零成本地实现这种攻击。为什么说零成本呢？想象一种情况，当投票者A与多数人投票相同时，就能获得奖赏。如果多数人投1，他投1，奖励是P；如果多数人投0，他投0，奖励也是P。否则奖励是0.假设有一天大家要去投票，真正应该要投“0”，但是攻击者承诺如果投票者A投1，并且并且大多数人投0，将支付“P+E”的奖励，这强烈地激励他投1.所有其他的投票者得到相同的交易，结果是大多数人投票1，因此攻击者不花钱就能影响大多数人投一个错误的值。DPoS 的系统为什么受这个攻击的影响比较大呢？是因为它的协议目前无法惩罚投票者（token voters），虽然在EOS里你要抵押token才能投票，但EOS协议目前没有规则说如果你的投票被贿赂，你的 token stake 就会被扣掉。但是其他的 DPoS 系统在解决这个问题。 比如在 Cosmos 中，投票的token持有人必须将其token押在押金池中，如果他们或他们投出的节点做了恶意的事情，比如投票给虚假数据，或者贿赂其他人，那么他们会被扣押金作为惩罚。相比EOS，这种机制提高了作恶的成本，从而更能防止恶意行为。 DPoS 和 Casper PoS 的主要区别是，在 DPoS 系统中，有认证权的节点是被token持有者选举出来的，然而在 Casper PoS 中，任何token持有者都可以将一定数量的 ETH 发送到网络中成为一个节点。Casper PoS 还在发展中，具体机制可能也会在为了随时间发生变化。 总的来说，DPoS 减少了记账节点规模，属于弱中心化，效率有所提高。但由于牺牲了去中心化的概念，并不适合公有链。 PBFT：Practical Byzantine Fault Tolerance，实用拜占庭容错算法 拜占庭共识算法（PBFT）也是一种常见的共识证明。这个算法在保证活性和安全性（liveness & safety）的前提下提供了(N-1)/3的容错性。这是一种基于消息传递的一致性算法，基于拜占庭将军问题，算法经过三个阶段达成一致性：预准备（pre-prepare）、准备(prepare)和确认(commit)，这些阶段可能因为失败而重复进行。流程如下图所示： 其中C为发送请求端，0123为服务端，3为宕机的服务端，具体步骤如下： Request：请求端C发送请求到任意一节点，这里是0 Pre-Prepare：服务端0收到C的请求后进行广播，扩散至123 Prepare：123，收到后记录并再次广播，1 —> 023，2 —> 013，3因为宕机无法广播 Commit：0123节点在 Prepare 阶段，若收到超过一定数量的相同请求，则进入 Commit 阶段，广播 Commit 请求 Reply：0123节点在 Commit 阶段，若收到超过一定数量的相同请求，则对C进行反馈 根据上述流程，在 N ≥ 3F + 1 的情況下一致性是可能解決的，N为总节点数，F为有问题的节点数。 N=4 F=0 时： | | 得到数据 | 最终数据 | | :----: | :--------: | :--------: | | A | 1 1 1 1 | 1 | | B | 1 1 1 1 | 1 | | C | 1 1 1 1 | 1 | | D | 1 1 1 1 | 1 | N=4 F=1 时： | | 得到数据 | 最终数据 | | :----: | :--------: | :--------: | | A | 1 1 1 0 | 1 | | B | 1 1 0 1 | 1 | | C | 1 0 1 1 | 1 | | D | 0 1 1 1 | 1 | N=4 F=2 时： | | 得到数据 | 最终数据 | | :----: | :--------: | :--------: | | A | 1 1 0 0 | NA | | B | 1 0 0 1 | NA | | C | 0 0 1 1 | NA | | D | 0 1 1 0 | NA | 由此可以看出，拜占庭容错能够容纳将近1/3的错误节点误差，IBM创建的Hyperledger就是使用了该算法作为共识算法。 非拜占庭容错的共识机制 非拜占庭容错的共识机制即不考虑有恶意节点的情况，人们考虑到1990 年由 Leslie Lamport 提出的 Paxos 共识算法，在工程角度实现了一种最大化保障分布式系统一致性（存在极小的概率无法实现一致）的机制。 Paxos Paxos是一种基于消息传递且具有高度容错特性的一致性算法。一个典型的例子是Zookeeper。 Paxos中有三类角色Proposer、Acceptor及Learner。在具体的实现中，一个进程可能同时充当多种角色。比如一个进程可能既是Proposer又是Acceptor又是Learner。还有一个很重要的概念叫提案（Proposal）。最终要达成一致的value就在提案里。 1). proposer 提出提案，提案信息包括提案编号和提议的value; 2). acceptor 收到提案后可以接受(accept)提案; 3). learner 只能\"学习\"被批准的提案; 算法保重一致性的基本语义: 1). 决议(value)只有在被proposers提出后才能被批准(未经批准的决议称为\"提案(proposal)\"); 2). 在一次Paxos算法的执行实例中，只批准(chosen)一个value; 3). learners只能获得被批准(chosen)的value; 由上面的三个语义可演化为四个约束: 1). P1:一个acceptor必须接受(accept)第一次收到的提案; 2). P2a:一旦一个具有value v的提案被批准(chosen)，那么之后任何acceptor 再次接受(accept)的提案必须具有value v; 3). P2b:一旦一个具有value v的提案被批准(chosen)，那么以后任何 proposer 提出的提案必须具有value v; 4). P2c:如果一个编号为 N 的提案具有value v，那么存在一个多数派，要么他们中所有人都没有接受(accept)编号小于 N 的任何提案，要么他们已经接受(accpet)的所有编号小于 N 的提案中编号最大的那个提案具有value v; Paxos算法分为两个阶段。具体如下： 阶段一： (a) Proposer选择一个提案编号K，然后向半数以上的Acceptor发送编号为 K 的Prepare请求。 (b) 如果一个Acceptor收到一个编号为 K 的Prepare请求，且 K 大于该Acceptor已经响应过的所有Prepare请求的编号，那么它就会将它已经接受过的编号最大的提案（如果有的话）作为响应反馈给Proposer，同时该Acceptor承诺不再接受任何编号小于 K 的提案。 阶段二： (a) 如果Proposer收到半数以上Acceptor对其发出的编号为N的Prepare请求的响应，那么它就会发送一个针对 [K,V] 提案的Accept请求给半数以上的Acceptor。注意：V 就是收到的响应中编号最大的提案的value，如果响应中不包含任何提案，那么V 就由Proposer自己决定。 (b) 如果Acceptor收到一个针对编号为 K 的提案的Accept请求，只要该Acceptor没有对编号大于 K 的Prepare请求做出过响应，它就接受该提案。 算法演示： （PBFT 和 Paxos 参考阅读文献1, 2,3） "},"Token_Economics_Incentive_design/CH04.html":{"url":"Token_Economics_Incentive_design/CH04.html","title":"Token分类和Token经济的设计","keywords":"","body":"Token分类和Token经济的设计 Token经济是把token设计作为一种激励手段的经济系统或市场。 在对某个商业模式进行分析后，Token经济的设计主要分为： 第一、设定供给 第二、创造需求 token的定义 什么是“token”呢？有人翻译为令牌，有人称其为通证。还有一种广泛的称谓叫“代币”。 “token\"一词，来源于网络通讯中，token 的原意是指“令牌、信令”。IBM 曾经推过一个局域网协议，叫做Token Ring Network，令牌环网。网络中的每一个节点轮流传递一个令牌，只有拿到令牌的节点才能通讯。这个令牌，是一种权利，或者说权益证明。 区块链的 token被广泛认识，归功于以太坊及其订立的 ERC20标准。基于这个标准，任何人都可以在以太坊上发行自定义的 token，这个 token 可以代表任何权益和价值。现在用 token 来作为代币权益证明进行 ICO 是一个普遍的做法。因此，业界有人认为将token直译为“代币”有失偏颇。因为 token 所代表的，可以是一切权益证明，不止于货币。持有数字token就代表一种可以获得某种利益的权利，是一种权益证明。因此，国内有人将token译为“通证”，意为“可流通的加密数字权益证明”。 而我们熟知的比特币，中本聪在设计它时是想让它称为支付货币。这种token就是一种维持区块链运营所发行的社区内代币，由社区成员共同背书，用以激励矿工验证及创造区块，矿工需用POW工作证明来换取；在社区内充当价值计量、存储和交换媒介；可自由兑换为其他数字货币甚至数字法币。这一类就可以理解为可以流通的数字加密的货币。 另外一个角度，对于复合ERC20代币标准的token，即基于以太坊创建的二级token，它是被创建在一个智能合约中的，这个智能合约就是一个账本，在账本中记录着所有持有token的人的地址和余额。这时的token事实上就是账本余额的一个单位，通过更新账本来交易token。 用层级分类法对token进行分类 首先，所有的token资产的第一层分类是“数字资产”。数字资产下有两个子类： 数字令牌（digital tokens） 数字货币（digital currencies） 从数字货币往下细分，又可以分出多个子类： 去中心化点对点数字货币，比如BTC 以法币做抵押的数字货币，如USDT/GUSD/TUSD等 以数字货币为抵押的货币，如DAI 从数字令牌往下细分，也可以分出两个子类： 资产抵押型token 实用型token 资产抵押型token包含了传统可证券化的资产，比如股权、不动产、债券、基金等。 实用型token包含：分布式计算系统的token、分布式应用型token、以及其他种类分布式计算资源token（例如文件存储token Filecoin，带宽token Orchid）。 这里主要探讨数字token，而非数字货币。在对token的理解上，聚焦于token带给持有者什么样的权益。 总体来说，token持有者主要又三种权益：所有权，收益权，以及使用权。最早提出这种分类框架的是万向区块链的肖风博士。 提供所有权和收益权的token一般被看作证券。例如，如果你持有一个公司的股票，你就拥有此公司的一部分资产，这从法律上讲就是证券；如果一个token提供给你的是某个网络的所有权，那么它也可以被称为证券。再者，如果你拥有未来现金流的收益权，例如债券，那么它也可以被称为证券。如果一个token能给你带来保障性的未来现金流，那么它也可以视作证券。一个证券型token的例子是 Spice VC token，这种token赋予了持有VC基金的收益权。（关于证券完整的法律描述，可以阅读“Howey Test”的有关内容） 而提供使用权的token就是适用型token。我们通过划分不同分类的使用权，实用型token又分为支付型token和工作token两种类型。 支付型token 用于在区块链网络中支付服务费，或者获取一些额外的利益或好处。 举个例子，在比特币网络中，我们需要支付btc来使用比特币账本。在以太坊网络中，我们需要用GAS来使用以太坊虚拟机EVM。Golem网络中的代币GNT也是类似的用途。在Binance区块链上，我们使用BNB来支付手续费可以享受手续费打折。 工作token 用于获取区块链网络中的工作权或投票权。 第一种方式是抵押token，将它冻结到一个地址，于是网络的参与者就可以拥有工作权，可以参与生产区块或者提供服务的其他工作。比如在预测市场Augur中，通过抵押代币REP，可以为预测市场提供数据。 第二种方式是抵押获取投票权，也有人将其归类为 government token（治理型token）。有一些区块链系统，比如EOS、Cosmos或者Dfinity等，都需要抵押token才能参与社区治理。 区块链网络中的token结构 一些区块链网络中只有一种token，比如比特币网络中只有BTC。 还有一些网络中有多个token，是多token的结构。比如 Cosmos，在 Cosmos 网络中，拥有两种token，分别是 Photon 和 Atom。其中，Photon 属于 payment token，用于在 Cosmos 网络中支付服务费。而 Atom 属于 work token，是用来抵押获取Cosmos网络的治理权和验证区块的。现在也有越来越多的POS网络拥有多种token。 还有一些区块链网络做 de-couple。将支付型token的价格和交易费的成本做了一个区分。 比如在以太坊网络中，交易手续费是使用GAS来支付的，但GAS和以太坊之间的汇率（gas price）是由矿工来调整的，进而降低了以太币的价格和升值对网络交易费用的影响。 所以不同的区块链网络可以具有不同的token结构。 token经济的设计过程 token经济设计的第一步是分析商业模式 商业模式分析六问： 一、市场中的参与者是谁？你需要列出所有的参与者。 二、参与者的动力是什么？你需要分析每一个参与者自身的动力。 三、你能用什么激励来吸引他们加入和使用这个平台？常见的激励方式，由对新用户进行奖励，或对使用系统的人进行奖励等。列出你可能会采用的激励手段。 四、你可以设定什么样的奖励和惩罚措施来鼓励诚实的行为，惩罚不诚实的行为？ 五、token的价值是来自于哪？它包含的权益包括哪些？这些权益如何能够让持有者获利？如果这些权益额能让我赚钱，那么会更想要买这个token，因此这个问题于token需求由非常强的关系。 六、什么是正确的区块链设计方法？ 关于前五个问题，下表中列出了某个token经济系统中的所有参与者，分析了他们的动力，和用什么奖励和惩罚措施来影响他们的行为。同时列出了在这个区块链网络或经济系统中需要用到的资源。 Resource Provider Motivations Rewards Penalties Proposing blocks Full Node Earn profit Block reward Slashing/wasted energy Validating blocks Full Node Earn profit Block reward Slashing deposit Providing storage Full Node/Client Earn profit Incentive reward Slashing deposit Growing New Users Existing Users Earn profit Give token bonus for new sign ups Slash for Sybil attacks Providing pro services Legal film Earn profit Give token rewards - Providing education Normal user Earn profit Incentive rewards - Become a node Normal use Earn profit,expand business Block rewards Slashing/wasted energy ... ... ... ... ... 这里的资源不仅仅指的是计算资源，拿BNB来举例：在BNB的经济系统中，新用户也可以算是一种资源，那么谁来提供新用户呢？谁是系统的参与者？也许是现有用户。怎么激励他们呢？那就是给他们一些分红。比如币安的邀请返佣机制，当老用户邀请新用户来主持使用币安时，老用户可以得到新用户的交易手续费的一部分作为分红。 如果你邀请来的不是真实用户，可以通过其他手段来惩罚：比如邀请之前你需要抵押一些钱，如果你邀请来的用户不真实，抵押的钱就会被扣掉。 关于第六个问题，是关于区块链选型的问题。其核心就是选择什么样的区块链网络，是更加中心化的，许可制（permissioned）的区块链，还是更加去中心化的，开放（permission less）的区块链。 比如有一些区块链网络，由于需要受到监管，所以不能完全的开放。如果你要做的是一个更加中心化的，许可制的区块链网络，那么你就可以给予网络参与者更多的信任，设计不一样的激励措施。 如果是在现有的区块链网络上构建自己的token经济，比如开发dapp，那么就不需要在矿工，或者硬件提供者身上花费token奖励了。 token经济的设计 token经济设计，就是通过设计token的供应和需求，来实现token激励的目标，它的总目标有两个：第一个是促使token升值，第二个是维持token的价格稳定。 这两个问题看似有点矛盾。 那么，促使token的价格升值，是因为token的价格上涨会在早期吸引新的用户，加入这个系统中来，是一种激励手段。而为什么又要维持token价格的稳定呢？假如你口袋中的token价格一直是上涨的，那么这个时候，可能会出现两种问题： 第一，因为系统的服务费是以token计价的，所以系统的使用成本会提高； 第二，人们可能会倾向于囤积token，而不是使用它。 关于第一个问题，可以设定一个类似于以太网gas price的机制来不断的调节系统使用的成本。这个稳定要么可以中心化控制，要么可以通过市场来控制。而第二个问题，它只是让用户倾向于使用其他的token来兑换支付。 因此，token升值和token稳定不一定又矛盾关系，细节要看具体的经济模型。 本文参照 Ben El Baz 关于激励设计的课程讲座所写 "},"Token_Economics_Incentive_design/CH05.html":{"url":"Token_Economics_Incentive_design/CH05.html","title":"Token的供给和需求","keywords":"","body":"Token的供给和需求 Token的供给 设计Token供给的目的 设计Token供给很重要，它是实施Token激励的工具。通过Token供给的策略，提供有价值的Token，激励引导或者惩罚参与者在网络中的行为。此外，通过Token供给政策，还可以设计激励机制来吸引消费者、生产者、投资者和网络贡献者。 本质上，Token供给的设计需要回答四个主要问题： 总供应量是有限的还是无限的？ 怎么增加或者减少Token的供给？ 是否应该限制某些Token的转让？限制谁？以及多少时间？ 更新设计的决策流程是什么？ Token的发行 如何设置Token的总发行量，各个参与者又该如何进行Token的分配？ 首先，Token的总量发行有两种方式：a)设置有限供应 b)设置无限供应。今天仍有很多关于哪个方法更好的辩论，但实际上，方法取决于具体应用。例如，比特币最大供应量有限，在未来，不会再增发比特币。有些人认为，这会刺激大家持有比特币而不是消费，从而使比特币成为“存储价值”货币，而不是“支付媒介”的货币。这里的原因是，如果比特币供应在未来没有增加，那么相对其它增加供应的Token，比特币将能够更好地保持价值。但这样做的问题在于，它激励了用户持有比特币，而不是消费比特币，这对那些希望比特币，是以商品服务进行交易的人们来说并不是很理想。 还有一些人认为应该设置无限供应，通货膨胀的供应，更适合想要用于消费经济的Token，假设需求是不变的，它会随着供给的增加而失去价值，因此这是一个激励消费而不是持有的设计。 还有一个重要的考虑因素是激励矿工。由于比特币是固定的总供应量，未来矿工将无法获得挖矿奖励，就只能依靠交易费来激励并维护网络安全。但我们也不知道，未来的交易费是否足以激励矿工，通过硬件的方式来保护比特币网络，因此，对于一个网络，构建Token的供应方式实际上取决于，是否需要矿工，以及你的Token有什么使用场景。 下面是一个如何设定有限Token供应的案例。如果你是想，通过众筹Token，来为项目开发者提供资金，那么设置总量的一种方法是从计划募集多少资金来进行倒推。 举个例子，你的项目想众筹1000万美金，那么Token总量该设计为多少呢？购买的用户、创始团队等参与者在创始区块中分别占有多大比例的Token呢？ 根据以往项目的经验，众筹占总Token量的比例，可以控制在20%到30%。也就是说，1000万美金可以买到你项目的20%的Token总量，用Token总量来算你项目的总市值，就是5000万美金。把这个市值和你的竞争对手做比较，大概就会知道你的市值是不是合理了。在做这个比较的时候，你可能要拿创世区块时的总量来比，这样就会更准确些。 创始团队的Token持有比例一般在10%左右，顾问和其它贡献方低于5%。 除了投资者、创始团队、顾问的部份以外，剩下的Token必须用作激励，也就说大部份Token都是用于激励的。很多明星项目都保留了很高比例的Token来做激励。到目前为止，最成功的去中心化系统，比特币网络中，100%的Token都用于激励。 那么Token的单价怎么定呢？ 这个值比较灵活，是基于项目方自己对Token单价的偏向。比如你觉得每个Token的价格为一美元比较合理，你的项目市值是5000万，那你的Token总量就应该是5000万个。如果你觉得每个Token0.1美金合适，在市值不变情况下那么Token总量就应该是5亿个。 举个栗子：理解Token的发行 为了更好地理解Token的发行，我们以去中心化存储项目Filecoin来举例 Filecoin的Token中70%都用于激励。因为在Filecoin的网络中，核心资源的是存储空间，挖矿者提供存储空间，自然应该获得奖励。这里我们应该注意，不管你的项目是搭建一整个网络还是应用，首先你都要明确自身最重要的资源是什么，同时这个资源由谁来提供，最终想明白怎样激励这些人来提供这些资源。 10%的Token分配给了投资人。用来给项目提供发展所需要的资金，和激励不同的人来拓展该网络。 还有5%的Token给了社区支持者和开发者，因为Filecoin是一个开源社区，Token激励可以吸引不同的人来参与和贡献到该生态中。 剩下还有15%的Token给到了Protocol Labs(中文名为协议实验室)，也就是Filecoin的创始团队，主要用于研究开发以及市场运营。当然，Filecoin是一个开源项目，早期的确需要实验室的存在，也需要社区的维护，但最终还是希望通过Token激励整个社区的参与者进行开发和维护它。 另外，大家可以注意Filecoin采用的归属期（vesting period)政策。归属期是指你的Token逐步被释放出来的时间周期。设置归属期的目标是确保Token的持有者在项目中停留更长的时间。在Filecoin的设计中，投资者的归属期在六个月到一年，协议实验室和基金会都是六年。 以上就是Token供给中的“发行”部分，包括怎么设定Token总量、Token分配给谁以及如何分配。分配给谁这个问题很重要，因为谁持有Token，谁就会有动力去参与这个系统的建设。 Token的抵押 设计Token供给需要考虑的第二个方面是抵押 一旦Token被抵押，这些Token就不属于流通供给量（circulating supply),被抵押的Token相当于被冻结在持有人的地址中。 最近有很多项目都在通过一些激励手段去鼓励人们去抵押Token。比如Dash的超级节点，只要你抵押它的Token就可以参与该节点的挖矿过程；在Ethereum Casper里，你要抵押Token才能成为一个验证节点；在Dfinity中，你要抵押Token才能挖矿，才能参与治理和投票；但在唯链中，你需要持有它的VET Token才能获得它新增的VHTO token。 Token的销毁 设计Token经济时需要考虑的最后方面，是Token的销毁 在设计Token经济时还需要考虑，是否用Token销毁来当激励，也就是消耗掉Token。虽然销毁不是强制性的，但它是控制供应和奖励某些活跃持有者的一种策略。 举几个例子： 前面提到币安的BNB，BNB每个季度20%的利润，回购市场上的Token，然后把这些市场买回来的token发送到一个不可回收的地址上，相当于把这些Token销毁。这个方法可以减少流通的数量，以支撑BNB的价格。 另外一个有趣的例子是Factom。Factom有一个平衡模型，叫“Burn-and-mint Equilibrium”。用户使用Token支付，并不是转账到哪里，而是直接销毁。这相当于制造了token供应的短缺。如果用户不断的增长，使用Factom的token频次增加，销毁的token就更多，稀缺性变强，推动token的价格上升。此外，如果网络上的交易量很低，那么更多的token就会被挖出来，增加供应，这可能会使token的价格回落。 治理 除了上面提到的问题以外，token设计者还要考虑，如何修改上述token数量政策的规则。这就是所谓的治理。治理是非常重要的，举例来说，一旦你建立了发行政策，那谁有权利和责任来改变它呢？目前来看，项目要么实施“链上治理”，使用token投票来表决政策的变化，要么使用“非链上治理”，通过基金会、开发者或公司来决定规则的变化。 Token的需求 什么是“Token的需求” 我们先看一下，在经济学里，是怎么定义“需求”的。经济学中的需求，是指在一定的时期内，在一定的价格水平下，消费者愿意并且能够购买的商品数量。 那么在token经济中，token需求就是用户对token的需求总量。token需求大概可以分为两类：一类是使用token在网络里交换商品和服务，另一类是通过token接收参与网络时获得的收益。 这里要强调的是：token只是用户使用你的基础网络，或产品时的一个媒介而已。要么用户使用你的token来买服务，要么商户使用你的token来提供服务给用户并赚钱。这就是驱动token需求的核心点。通常来说，你的基础产品做的越好，就会有越多的用户对你的token产生需求，因为用户需要通过token来接触这个产品。反过来，如果你的产品体验很差，那么不管你设计再多的激励，也永远不可能创造出长期的token需求。 但是，目前大部分人对token的需求还停留在“炒作”和“投机”，真正的token需求被这些表面现象遮掩了，这让人们对token有很大的误解。token作为激励的一种方式，有很大的存在意义。 设计Token需求的目标 目标有两种： 第一，让token的持有者带来赚钱的机会和使用价值。如果我持有token，，而且我通过token的权益，可以工作赚钱，我当然会有动力购买它。另外，如果我持有token，可以用它来买独特的产品，或享受更便宜的服务，我就有动力购买它。 第二，用token来激励网络或dApp的活跃度。也就是说，用token来激励新用户注册，和提高用户的活跃度。一个token的价值，体现在参与者在网络中的活跃度。这些网络活动加起来，就是一个经济体。网络中的活动越多，比如说服务供应商和服务用户之间的交易越多，这个经济体和它的token的价值就越高。再说具体一点，就是一个网络或一个dApp被使用的越多，就有越多交易发生，而如果处理每笔交易都用到token，那么token的需求就越多。 Token的需求分类 一个基本的经济体就是一群消费者和生产者，他们购买和销售商品和服务。因此，设计一个好的token经济，关键是列出网络经济中可以交换的所有可能的数字商品和服务，然后根据这些设计token。 我们提到过，我们把用户对token的需求分为两类：一是使用token在网络里交换商品和服务，这一类叫做token的购买需求；二是通过token接收参与网络时获得的收益，这一类叫做token的资本收益需求。 token的购买需求 首先来看token的购买需求。我们可以将购买需求进一步拆分，也就是使用token购买和使用token出售的需求，分别创造了消费侧需求和生产侧需求。消费侧需求是指购买token来消费网络商品和服务的需求；生产侧需求是指购买token来提供赚取利润的商品和服务的需求。消费侧和生产侧的需求都推动了token的购买需求。而创造强劲的token购买需求可以帮助token维持购买支持，这是定价的重要驱动因素。 token的资本收益需求 除了token的购买需求之外，另一种token需求是资本收益需求。这仅仅是因为相信token会升值（通过像BNB这样的回购或投机信仰），或者因为token保证一些回报给持有人（如空投或利润分享）。 除了设计购买需求外，重要的是要为用户设计足够的渠道来实际获取token。目前，token常见获取方式主要包括购买、兑换、挖矿、行为激励4大常见方式，购买主要指通过现金购得所需要的token；兑换包括利用一类token换取一定量的等值token，也是当下最常见的一类；挖矿和行为激励其实很像，都是需要通过做出贡献来获取对应的token，这是token经济良性发展的重要支撑。 如何提高token的购买需求 总结一下，设计token需求的要点就是首先从生产侧和消费侧提高token的购买需求，同时设计足够的渠道来让用户获取token。 提高生产侧token需求 让我们先来讨论一下如何从token需求的生产侧来提高token需求。token经济中的生产者通过向网络经济用户出售和贡献资源而赚取token。 对于一个在生态系统中的生产者，他需要贡献自己的资源才能参与到网络之中，包括贡献存储、贡献算力、参与系统开发、推荐新用户等。生产侧需求是指购买token的欲望产生的购买需求。创造生产侧需求的一种方法是要求生产商在网络上提供服务之前获取和持有token。这些服务应该为生产者从费用和奖励中获得利润。有两种类型的生产者参与权可以设计成token：计算机网络参与权和商业网络参与权。计算机网络参与权的一个例子是，像Cosmos中的token-Atom一样，抵押Atom才能获得验证的奖励。商业网络参与权的一个例子是，押注以获得执行其它工作的收益权，如Augur中的token REP。 为了吸引消费者到经济中来，并使持有token对生产者而言有价值，你需要找到方法来吸引早期生产者到经济中来。简而言之，就是从如何吸引用户提供资源、让这个网络增长的角度来思考。做到这一点的最好方法之一是使用token奖励，激励生产者贡献资源。 举个栗子： 接下来举一个从生产侧出发设计token需求的例子方便大家理解。在Steem网络中，用户可以通过写文章和点赞来获得token收益；2018年大火的交易所Fcoin同样是这类路径，所谓的“交易即挖矿”便是对用户行为的反馈来做出激励，从而获得token。 在Fcoin的例子中，token的设计者认为交易量是他们希望参与者能贡献的重要资源，所以Fcoin系统会根据用户贡献的交易量来发放相应的token-FT作为奖励。但不幸的是，由于Fcoin的激励体系导致了“坏的增长”，所以它是不可持续的。“坏的增长”是说有人为了获得奖励大量去“刷”假交易量，最后导致平台流失用户。设计token经济时最难的部分，就是去权衡在早期为了增长用户，你的网络应该采用多大强度的激励。如果这一点设计的不恰当，你就会吸引错误的用户，带来“坏的增长”，这可能会给网络带来风险。Fcoin另外一个没做好的点，是它没有给FT设计出足够价值。它的购买需求不强。如我刚刚提到的，token的购买需求是来自于它是否有足够的赚钱机会，不仅仅是投机升值赚钱机会。 如果说token代表了数字资产和权益，根据当下社会经济的发展，获得途径应该偏向劳动或者付出，从而获得相应的资产，同时随着参与度的提高，在权益方面获得相应的回报。这样的一个经济体才是健康的，其token的需求也不会时高时低，token价值也不会发生剧烈的波动。 提高消费侧token需求 如何提高消费侧token需求。简单地说，token需求的消费侧是由使用token可以消费多少不同的商品和服务，也就是说你所有使用token的方式驱动的。这里所说的商品和服务包括支付智能合约交易费、账户转账交易费、支付应用程序服务等。在考虑token的获得渠道后，我们还需要慎重地考虑如何让用户获得token之后有使用途径，而不仅仅是囤积token获利。当然，如果用户有意将token作为一种升值资产持有，并不是不可以，但对另一部分人来说，token还需要有一个合理的使用空间，也就是消费和使用路径。 那这个就是从提高使用token频率的角度，来思考对提升token需求量的办法。在这方面，我们首先需要考虑一个项目提供什么样的服务，以及可以对什么样的参与者收取token或者要求抵押token？其次，谁愿意接受token作为收入？这个项目发行的token和法币的关系是如何的？是否有通畅的法币兑换通道？如果没有的话，很难建立一个合理的经济模型，这一点对于目前的中国来说还很难，但虽然如此还是有一些中国项目，在现有的合规框架之下可以发展的很好。 我们从一些交易所的平台积分来看，这类token在满足流通属性的前提下，还加入了抵扣手续费的特性，这也算是一种token消费路径，至于持有积分的分成，也勉强算是获得了权益认可。只是这些“薅羊毛”般的数量完全不能满足持有者的胃口，这也是为什么会有一些交易所，针对自家的积分推出了一系列的“锁仓机制”，利用未来的预期，来减少token的流通量。 为了理解锁仓机制的原理，我们来分析一下供需情况，你可以参考文稿中的供需曲线来学习，请拿出一张纸，跟着我一起画出一个横坐标和纵坐标，横坐标代表数量，纵坐标代表价格。再画一条从左上到右下的需求曲线，和一条从左下到右上的供应曲线。两条线的交点就是供应和需求的均衡点，对应着均衡销量和价格。当供应减少时，供给曲线左移，即使需求不变的情况下，价格也会相应的升高，这是最简单的理解那些锁仓机制的积分玩法。当然，如果再刺激需求的增加，最后均衡的价格还会有所抬升。 一个健康的经济体大多数情况下都是随着市场的波动而发生相应的变化，这也是理解token价格最基本的锚定点。但赋予token合理的使用空间，也是影响需求的重要因素，如果用户只有获得token的路径，没有合理消费token的路径，并不能让token价值真正体现出来。这是因为消费token时，通常会为网络上的服务提供商创造收入，从而激励更多生产商加入网络并加强经济。 反过来看，既然获得路径可以是行为性的获得，那么消费路径理论上也要遵循该原则，即行为或价值的转换必然要消耗一部分token，可以是价值的获取、使用权的转移或者物品的索取都会带来消耗。消费路径的缺失往往会使得整个token系统受到单边价值下降的影响，即使是有价值的token，最终也会遭到用户的抛弃。 正因如此，我们在观摩一个token价值的体现就要去平衡获取端和消费端的影响，尽量找到一个平衡点使得流入和流出的价值在某个健康的比例内，否则就会造成类似Fcoin和火牛频这样的悲剧发生。Fcoin失败的原因在于忽略了消费侧和生产侧（consumption-side and production-side demand）的真正需求，用户没有任何持有token的长期价值，所谓的分红也是在剥削后来者的价值，这种机制当然会遭到市场的猛烈打击。 目前的token消费路径大多停留在售出的层面，或者作为费用的抵扣，并没有考虑如何为一个经济体赋能，如何让token持有者享受到消费的乐趣。很大程度上，token设计者居然左右不了消费路径，但规则的制定和效益的锚定还是能够为社区发展带来合理的方案，否则消费路径的缺失会将整个token价值引导为螺旋向下的状态。 token消费路径的设计需要衡量token获得路径，借此来平衡两者之间的关系，包括量级、维度、制约情况等等。因为消费路径关乎着整个token价值的“输出端”，而“输出端”是指如何消费token，从而带动token价值发展螺旋向上，这是在设计token消费路径前需要考虑的一个重要问题。 提高token购买需求的第二个方式，也就是提高token消费侧需求，简单地说，就是让token更多地被使用。 利用token建立“病毒循环” 除了有合理的购买需求以外，一个成功网络经济需要建立一个正反馈的“病毒循环”（viral loop）。 病毒循环的建立也可以用token来帮忙。“病毒循环”（Viral loop）一词来源于亚当.潘恩伯格（Adam L.Penenberg）的书，在书出作者讲述了包括Netscape、eBay、PayPal、YouTuBe、Facebook、Twitter在内，全世界最成功企业依靠病毒循环发展状壮大的故事。 什么是病毒循环？ 事实上，病毒循环是一种营销手段，指的是利用和类似病毒感染的方法，利用激励机制，将产品的“受体”转化为“主体”，继而“感染”更多的新受体。它主要的目的是用来加快网络的增长速度。 也就是说token的发行需要吸引新用户参与，新用户的参与者越多，越能完善这个项目的生态，进而吸引更多用户参与。 比特币的机制就是一个很好的案例： 比特币病毒循环的第一步，是发行一些新的token，这些token是一些资源生产商的收益，在比特币中资源生产商是矿工。参与挖矿可获得收益，这会吸引更多的矿工参与进来，进而就会提高比特币网络的安全性。因为越多的矿工参与记账，则篡改交易需要的算力也就越高，实际上也就降低了交易被篡改的概率，因而保障了系统的安全性。比特币系统的安全性越高，就越能吸引更多的用户到这个网络中来交易。用户数量越高，交易量就越大，那这个token系统的估值也就越高，token升值也提高了矿工的报酬，从而进入下一个循环。 就像我们开头讲到的那样，token对消费者或者生产者的价值，直接取决于网络中用户的数量和用户的活动。因此，为了增加需求，我们应该设计增加网络活动的token激励机制。提升网络使用量主要有两种方式。第一种是吸引更多新用户，第二种是提升重复使用率。比如一些平台币，如果你的交易量达到一定数值后，你可以获得一定折扣，它会激励你去多交易。在传统的商业活动中，企业会通过顾客忠诚度计划来激励顾客多消费，英文是customer loyalty program，中国指积分系统。如酒店、航空公司、餐厅等商业机构推出的积分卡等等，都是为提升用户忠诚度。有很多具体的方式，如消费满多少钱可以获得一定折扣；或者买五赠一、买十赠一；或者达到一定消费量可以获得一个奖励或礼物；或者设置等级，不同的等级拥有不同的权利等等。 在设计token经济系统的时候，前面这些传统商业中的作法，都可以给我们很多借鉴和方向。比如，你可以要求先抵押一定量的token才可以让新会员参与网络协作，比如做一个矿工等等。第二种情况是类似于BNB这种平台币，如果你的交易量达到一定程度，就可以获得一定的折扣。第三种情况是给予拥有token的用户一些特定权力。美国有个PROPS的区块链项目，去年通过CoinList进行了私募，它大致可以理解为一个去中心化的YouTuBe，持有token的内容生产者，可以使用token来接广告、让自己创造的内容优先被展示等。 总结 一个好的token价值结构，一定会在需求端费尽心思去打磨，保证该经济体系内，不会因为需求的变化而影响到整个token价值。当然需求的打磨跟产品经理，通过需求打磨产品很类似，只不过还要加入经济的设定，因为token的资产性和权益性是互联网产品所不具备的。 本文参照 Ben El Baz 关于激励设计的课程讲座所写 "},"Token_Economics_Incentive_design/CH06.html":{"url":"Token_Economics_Incentive_design/CH06.html","title":"用货币经济学进行token设计","keywords":"","body":"用货币经济学进行token设计 什么是货币经济学？ 货币经济学是研究不同货币理论的经济学分支，专门研究中央银行等机构，如何利用货币供应量和利率等变量，来影响货币价格和经济中商品和服务的需求。 在机制设计和博弈论中，货币经济学家实用激励工具来设计他们想要的结果。例如，中央银行可以提高或降低短期利率，来激励或抑制人们借钱。如果利率很低，那么你需要支付的利息就很低，这会刺激借贷，并给你更多的钱来消费。从理论上讲，这创造了更多的消费，增加了经济活动。这个例子向你展示了，货币经济学家如何利用激励手段，来达到预期的结果。 货币经济学是一个复杂的话题，因此，在此只讨论两个对token设计者最有用的领域： 货币的功能和特征 交换方程 货币经济学和token经济学的关系 货币的功能和特征 在分布式网络中，Token通常被作为网络服务的支付货币。但是，作为token设计者，为什么要实用token作为支付货币，而不是美元、欧元、日元或人民币？为了回答这个问题，我们先了解货币的功能和特征。 货币有三个主要功能： 一、交换媒介 货币可以让人们更容易通过一个共同的对象，也就是现金，来相互交换商品和服务。 二、价值储存 货币是用来储存和保护你的财富。 三、记账单位 就是测量物品的多少和物品的价值。 但有很多货币形式都可以满足这个三个功能，那么该如何比较不同的货币形式的效用？如何评估是选择token还是法币？ 货币经济学家认为货币有六个主要特征：耐久性、可转移性、可分割性、可替代性、有限供给和可接受性。我们从这六个方面来比较在以太坊网络上实用ETH支付和实用数字美元支付。 首先，从耐久性，也就是这笔钱能承受多大的环境压力。数字美元和以太币具有相同的耐久性。 然后看第二个特征——可转移性，也就是交易成本最低的情况下，资金的转移能力有多强。ETH能够在几分钟内以较低的成本在全球范围内传输，而数字美元需要1-2个工作日，并且具有较高的电汇成本。ETH能够通过以太坊网络上的智能合约进行传输，这是它的可编程性，这可能使成本更低的分布式商业应用成为可能，而数字美元无法发送到只能合约。在可转移性上，ETH优于数字美元。 再来看可分割性，也就是一笔钱可以分成多少个小数。数字美元的最小单位是0.01美元，也就是1美分。而ETH可以切分为10的18次方份，这让以太能用于价值低于0.01美元的小额交易。可分割性这一点，ETH更优。 货币的第四个特征——可替代性，也就是不同货币单位之间的相似性。数字美元和ETH具有相同的可替代性，因为他们都是数字单位。 第五个特征——有限的供给，也就是看货币的供给有多稀缺。这一点，对于创建受保护的价值存储很重要。数字美元和ETH，基本上有相同的措施来控制新发行货币的供给。 最后一个特征——可接受性，这是指不同地区的商人对货币的接受程度。数字美元被世界各地的企业和人们接受，而目前接受ETH支付的商家明显要少得多。在可接受性这一点，ETH就目前来看略逊一筹。但是在未来，像比特币这样的数字货币，能否成为世界货币，那就另当别论了，这是个变数。当然对于某一个其他的商业token，可能很难达到这种接受度。 Ben El Baz认为，Token设计者可以结合上述分析结果，比较网络的特定设计和目标，来评估是否实用新的支付货币而不是法定货币。 交换方程式 许多货币经济学家认为，货币数量直接影响一个经济体中商品和服务的价格。1911年欧文·费舍尔将这种关系形式化为一个方程式，称为“交换方程式”，也叫“费雪方程式”。方程如下： M*V = P*Q \"M\"是指货币的总供给量。“V”指货币的流通速度，也就是一段时间内货币总供给量的平均换手次数。“P”是指一个经济体在一段时间内，以货币计价的商品和服务的平均价格水平。“Q”是指一个经济体在一段时间内购买的商品和服务的总数。 举个栗子： 想象你住在一个孤岛上。在这个岛上人们把贝壳当钱用。一年之内，人们在这个岛上交易100件不同的货物。这些货物的平均价格是10个贝壳。使用交换方程式，将价格（10）乘以交易总数（100），计算方程式右侧，等于总经济活动（1000）。方程式的左边呢？假设岛上的贝壳供应量是50。为了让1000个贝壳的经济活动有足够的贝壳来使用，你需要这50个贝壳在一年内换手20次。这个20就是货币的流通速度。 对于token设计者来说，理解这个方程很重要，有两个原因： 首先，它向你展示了货币的价格（也称“货币的购买力”）是如何取决于货币供应量、货币流通速度和经济体内的贸易额的。货币经济学家在设计放宽或收缩货币供应量增长，来影响价格水平的货币政策时，就依赖于这一原则。经济学家还认为，贸易额可以直接影响价格；然而，他们认为政策不能用来改变流通速度和影响价格。 其次，我们可以看到，交换方程不适合计算不同货币之间的汇率，例如，它不能用于计算token-美元汇率。逻辑很简单：这个公式只告诉你，随着token供应的增加或交易量的增加，商品和服务的token价格是如何变化的。token-美元汇率是完全不同的；token-美元价格是token与美元的比率（一种汇率），这是一些设计者希望在价格上升值的；它不是token与商品和服务的比率。 如何利用费雪公式提高token设计技巧 首先，不要制造复杂的激励来操纵token流通速度。流通速度不重要。 其次，MV=PQ 本身不能用于确定token-美元汇率。但是，如果你的目标是稳定token价格，那么 MV=PQ 可以帮助你设计货币政策，来稳定你网络上交易的token定价。例如，如果你希望每笔交易保持10token的稳定价格，你可以设计你的token货币政策，根据交易量或交易速度的变化，增加或减少token供应，来在 MV=PQ 情况下，保持稳定的token价格。 再者，MV=PQ 还是有个“间接”的方法可以预估token-USD汇率，不过这个比较数学性。可以参考比特币的白皮书中对流通的讲解，这里的重点还是想让大家认识到网络使用量和token数量的重要性。 "}}